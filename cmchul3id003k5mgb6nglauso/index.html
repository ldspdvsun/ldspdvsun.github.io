<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="keywords" content="Hexo Theme Redefine">
    
    <meta name="author" content="Sunmy">
    <!-- preconnect -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    
    <!--- Seo Part-->
    
    <link rel="canonical" href="https://ldspdvsun.github.io/cmchul3id003k5mgb6nglauso/"/>
    <meta name="robots" content="index,follow">
    <meta name="googlebot" content="index,follow">
    <meta name="revisit-after" content="1 days">
    
    
    
        
        <meta name="description" content="Sunmy&#96;s Blogs">
<meta property="og:type" content="article">
<meta property="og:title" content="PyTestAllure">
<meta property="og:url" content="https://ldspdvsun.github.io/cmchul3id003k5mgb6nglauso/index.html">
<meta property="og:site_name" content="Sunmy&#96;s Blogs">
<meta property="og:description" content="Sunmy&#96;s Blogs">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://i.postimg.cc/MZ0wLRpF/wallhaven-exl88k.png">
<meta property="article:published_time" content="2023-09-12T06:31:27.000Z">
<meta property="article:modified_time" content="2025-06-29T13:05:24.281Z">
<meta property="article:author" content="Sunmy">
<meta property="article:tag" content="Pytest">
<meta property="article:tag" content="Allure">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.postimg.cc/MZ0wLRpF/wallhaven-exl88k.png">
    
    
    <!--- Icon Part-->
    <link rel="icon" type="image/png" href="https://avatars.githubusercontent.com/u/86214331?s=96&amp;v=4" sizes="192x192">
    <link rel="apple-touch-icon" sizes="180x180" href="https://avatars.githubusercontent.com/u/86214331?s=96&amp;v=4">
    <meta name="theme-color" content="#A31F34">
    <link rel="shortcut icon" href="https://avatars.githubusercontent.com/u/86214331?s=96&v=4">
    <!--- Page Info-->
    
    <title>
        
            PyTestAllure | Sunmy`s Blogs
        
    </title>

    
<link rel="stylesheet" href="/fonts/Chillax/chillax.css">


    <!--- Inject Part-->
    

    
<link rel="stylesheet" href="/css/style.css">


    
        
<link rel="stylesheet" href="/css/build/tailwind.css">

    

    
<link rel="stylesheet" href="/fonts/GeistMono/geist-mono.css">

    
<link rel="stylesheet" href="/fonts/Geist/geist.css">

    <!--- Font Part-->
    
    
    
    
    
    
        
<script src="/js/build/libs/anime.min.js"></script>

    

    <script id="hexo-configurations">
    window.config = {"hostname":"ldspdvsun.github.io","root":"/","language":"zh-CN","path":"search.json"};
    window.theme = {"articles":{"style":{"font_size":"16px","line_height":1.5,"image_border_radius":"14px","image_alignment":"center","image_caption":false,"link_icon":true,"delete_mask":false,"title_alignment":"left","headings_top_spacing":{"h1":"5rem","h2":"4rem","h3":"2.8rem","h4":"2.5rem","h5":"2.2rem","h6":"2rem"}},"word_count":{"enable":true,"count":true,"min2read":true},"author_label":{"enable":true,"auto":false,"list":[]},"code_block":{"copy":true,"style":"mac","highlight_theme":{"light":"github","dark":"vs2015"},"font":{"enable":false,"family":null,"url":null}},"toc":{"enable":true,"max_depth":5,"number":false,"expand":true,"init_open":true},"copyright":{"enable":true,"default":"all_rights_reserved"},"lazyload":true,"pangu_js":false,"recommendation":{"enable":true,"title":"推荐阅读","limit":3,"mobile_limit":2,"placeholder":"https://i.postimg.cc/52qB9kNm/10.png","skip_dirs":[]}},"colors":{"primary":"#A31F34","secondary":null,"default_mode":"light"},"global":{"fonts":{"chinese":{"enable":false,"family":null,"url":null},"english":{"enable":false,"family":null,"url":null},"title":{"enable":false,"family":null,"url":null}},"content_max_width":"1000px","sidebar_width":"210px","hover":{"shadow":true,"scale":false},"scroll_progress":{"bar":false,"percentage":true},"website_counter":{"url":"https://cn.vercount.one/js","enable":true,"site_pv":true,"site_uv":true,"post_pv":true},"single_page":true,"preloader":{"enable":true,"custom_message":null},"open_graph":{"enable":true,"image":"https://i.postimg.cc/MZ0wLRpF/wallhaven-exl88k.png","description":"Sunmy`s Blogs"},"google_analytics":{"enable":false,"id":null}},"home_banner":{"enable":true,"style":"fixed","image":{"light":"https://i.postimg.cc/bJMg5v9g/0-8.png","dark":"https://i.postimg.cc/MZ0wLRpF/wallhaven-exl88k.png"},"title":"Sunmy`s Blogs","subtitle":{"text":["随心所欲地享受每一天\\(￣︶￣*\\))","随时随地，浏览记录O(∩_∩)O","如果喜欢，建议给个支持( •̀ ω •́ )✧","喜欢的话，留个言好嘛(oﾟvﾟ)ノ","欢迎来到我的博客(｡･∀･)ﾉﾞ","正在努力更新博客(ง •_•)ง","正在不断努力改善博客中ε=( o｀ω′)ノ","文字正在不断轮换(*￣3￣)╭","你有建议？反馈作者(●^◡^●)"],"hitokoto":{"enable":false,"show_author":false,"api":"https://v1.hitokoto.cn"},"typing_speed":100,"backing_speed":30,"starting_delay":500,"backing_delay":1500,"loop":true,"smart_backspace":true},"text_color":{"light":"#9f5221","dark":"#d1d1b6"},"text_style":{"title_size":"2.8rem","subtitle_size":"1.5rem","line_height":1.2},"custom_font":{"enable":false,"family":null,"url":null},"social_links":{"enable":true,"style":"default","links":{"github":"https://github.com/ldspdvsun","instagram":null,"zhihu":null,"twitter":null,"email":"skywalker0@qq.com"},"qrs":{"weixin":null}}},"plugins":{"feed":{"enable":false},"aplayer":{"enable":false,"type":"fixed","audios":[{"name":null,"artist":null,"url":null,"cover":null,"lrc":null}]},"mermaid":{"enable":false,"version":"11.4.1"}},"version":"2.8.2","navbar":{"auto_hide":false,"color":{"left":"#f78736","right":"#367df7","transparency":35},"width":{"home":"1600px","pages":"1000px"},"links":{"Home":{"path":"/","icon":"fa-regular fa-house"},"Archives":{"path":"/archives","icon":"fa-regular fa-archive"},"Tags":{"path":"/tags","icon":"fa-regular fa-tags"},"Categories":{"path":"/categories","icon":"fa-regular fa-list"},"ShuoShuo":{"icon":"fa-solid fa-comment-dots","path":"/shuoshuo"},"Links":{"icon":"fa-regular fa-link","submenus":{"Github":"https://github.com/ldspdvsun","Zhihu":"https://www.zhihu.com/people/ldspdvs"}}},"search":{"enable":true,"preload":true}},"page_templates":{"friends_column":2,"tags_style":"blur"},"home":{"sidebar":{"enable":true,"position":"left","first_item":"menu","announcement":"Be all you can be!","show_on_mobile":true,"links":{"Archives":{"path":"/archives","icon":"fa-regular fa-archive"},"Tags":{"path":"/tags","icon":"fa-regular fa-tags"},"Categories":{"path":"/categories","icon":"fa-regular fa-folder"}}},"article_date_format":"auto","excerpt_length":200,"categories":{"enable":true,"limit":3},"tags":{"enable":true,"limit":3}},"footerStart":"2023/6/1 00:00:00"};
    window.lang_ago = {"second":"%s 秒前","minute":"%s 分钟前","hour":"%s 小时前","day":"%s 天前","week":"%s 周前","month":"%s 个月前","year":"%s 年前"};
    window.data = {"masonry":false};
  </script>
    
    <!--- Fontawesome Part-->
    
<link rel="stylesheet" href="/fontawesome/fontawesome.min.css">

    
<link rel="stylesheet" href="/fontawesome/brands.min.css">

    
<link rel="stylesheet" href="/fontawesome/solid.min.css">

    
<link rel="stylesheet" href="/fontawesome/regular.min.css">

    
    
    
    
<meta name="generator" content="Hexo 7.3.0"></head>



<body>
	<div class="progress-bar-container">
	

	
	<span class="pjax-progress-bar"></span>
	<!--        <span class="swup-progress-icon">-->
	<!--            <i class="fa-solid fa-circle-notch fa-spin"></i>-->
	<!--        </span>-->
	
</div>

<style>
    :root {
        --preloader-background-color: #fff;
        --preloader-text-color: #000;
    }

    @media (prefers-color-scheme: dark) {
        :root {
            --preloader-background-color: #202124;
            --preloader-text-color: #fff;
        }
    }

    @media (prefers-color-scheme: light) {
        :root {
            --preloader-background-color: #fff;
            --preloader-text-color: #000;
        }
    }

    @media (max-width: 600px) {
        .ml13 {
            font-size: 2.6rem !important; /* Adjust this value as needed */
        }
    }

    .preloader {
        display: flex;
        flex-direction: column;
        gap: 1rem; /* Tailwind 'gap-4' is 1rem */
        align-items: center;
        justify-content: center;
        position: fixed;
        padding: 12px;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        width: 100vw;
        height: 100vh; /* 'h-screen' is 100% of the viewport height */
        background-color: var(--preloader-background-color);
        z-index: 1100; /* 'z-[1100]' sets the z-index */
        transition: opacity 0.2s ease-in-out;
    }

    .ml13 {
        font-size: 3.2rem;
        /* text-transform: uppercase; */
        color: var(--preloader-text-color);
        letter-spacing: -1px;
        font-weight: 500;
        font-family: 'Chillax-Variable', sans-serif;
        text-align: center;
    }

    .ml13 .word {
        display: inline-flex;
        flex-wrap: wrap;
        white-space: nowrap;
    }

    .ml13 .letter {
        display: inline-block;
        line-height: 1em;
    }
</style>

<div class="preloader">
    <h2 class="ml13">
        Sunmy`s Blogs
    </h2>
    <script>
        var textWrapper = document.querySelector('.ml13');
        // Split text into words
        var words = textWrapper.textContent.trim().split(' ');

        // Clear the existing content
        textWrapper.innerHTML = '';

        // Wrap each word and its letters in spans
        words.forEach(function(word) {
            var wordSpan = document.createElement('span');
            wordSpan.classList.add('word');
            wordSpan.innerHTML = word.replace(/\S/g, "<span class='letter'>$&</span>");
            textWrapper.appendChild(wordSpan);
            textWrapper.appendChild(document.createTextNode(' ')); // Add space between words
        });

        var animation = anime.timeline({ loop: true })
            .add({
                targets: '.ml13 .letter',
                translateY: [20, 0],
                translateZ: 0,
                opacity: [0, 1],
                filter: ['blur(5px)', 'blur(0px)'],
                easing: "easeOutExpo",
                duration: 1200,
                delay: (el, i) => 300 + 20 * i,
            })
            .add({
                targets: '.ml13 .letter',
                translateY: [0, -20],
                opacity: [1, 0],
                filter: ['blur(0px)', 'blur(5px)'],
                easing: "easeInExpo",
                duration: 1000,
                delay: (el, i) => 15 * i,
                complete: function() {
                    hidePreloader();
                }
            }, '-=700');


        let themeStatus = JSON.parse(localStorage.getItem('REDEFINE-THEME-STATUS'))?.isDark;

        // If the theme status is not found in local storage, check the preferred color scheme
        if (themeStatus === undefined || themeStatus === null) {
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                themeStatus = 'dark';
            } else {
                themeStatus = 'light';
            }
        }

        // Now you can use the themeStatus variable in your code
        if (themeStatus) {
            document.documentElement.style.setProperty('--preloader-background-color', '#202124');
            document.documentElement.style.setProperty('--preloader-text-color', '#fff');
        } else {
            document.documentElement.style.setProperty('--preloader-background-color', '#fff');
            document.documentElement.style.setProperty('--preloader-text-color', '#000');
        }

        window.addEventListener('load', function () {
            setTimeout(hidePreloader, 5000); // Call hidePreloader after 5000 milliseconds if not already called by animation
        });

        function hidePreloader() {
            var preloader = document.querySelector('.preloader');
            preloader.style.opacity = '0';
            setTimeout(function () {
                preloader.style.display = 'none';
            }, 200);
        }
    </script>
</div>

<main class="page-container" id="swup">

	

	<div class="main-content-container flex flex-col justify-between min-h-dvh">
		<div class="main-content-header">
			<header class="navbar-container px-6 md:px-12">
    <div class="navbar-content transition-navbar ">
        <div class="left">
            
            <a class="logo-title" href="/">
                
                Sunmy`s Blogs
                
            </a>
        </div>

        <div class="right">
            <!-- PC -->
            <div class="desktop">
                <ul class="navbar-list">
                    
                        
                            

                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class=""
                                   href="/"
                                        >
                                    <i class="fa-regular fa-house fa-fw"></i>
                                    首页
                                    
                                </a>

                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            

                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class=""
                                   href="/archives"
                                        >
                                    <i class="fa-regular fa-archive fa-fw"></i>
                                    归档
                                    
                                </a>

                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            

                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class=""
                                   href="/tags"
                                        >
                                    <i class="fa-regular fa-tags fa-fw"></i>
                                    标签
                                    
                                </a>

                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            

                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class=""
                                   href="/categories"
                                        >
                                    <i class="fa-regular fa-list fa-fw"></i>
                                    分类
                                    
                                </a>

                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            

                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class=""
                                   href="/shuoshuo"
                                        >
                                    <i class="fa-solid fa-comment-dots fa-fw"></i>
                                    说说
                                    
                                </a>

                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            

                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="has-dropdown"
                                   href="#"
                                        onClick=&#34;return false;&#34;>
                                    <i class="fa-regular fa-link fa-fw"></i>
                                    链接
                                    <i class="fa-solid fa-chevron-down fa-fw"></i>
                                </a>

                                <!-- Submenu -->
                                
                                    <ul class="sub-menu">
                                        
                                            <li>
                                                <a target="_blank" rel="noopener" href="https://github.com/ldspdvsun">
                                                    GITHUB
                                                </a>
                                            </li>
                                        
                                            <li>
                                                <a target="_blank" rel="noopener" href="https://www.zhihu.com/people/ldspdvs">
                                                    ZHIHU
                                                </a>
                                            </li>
                                        
                                    </ul>
                                
                            </li>
                    
                    
                        <li class="navbar-item search search-popup-trigger">
                            <i class="fa-solid fa-magnifying-glass"></i>
                        </li>
                    
                </ul>
            </div>
            <!-- Mobile -->
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fa-solid fa-magnifying-glass"></i>
                    </div>
                
                <div class="icon-item navbar-bar">
                    <div class="navbar-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile sheet -->
    <div class="navbar-drawer h-dvh w-full absolute top-0 left-0 bg-background-color flex flex-col justify-between">
        <ul class="drawer-navbar-list flex flex-col px-4 justify-center items-start">
            
                
                    

                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full "
                           href="/"
                        >
                            <span>
                                首页
                            </span>
                            
                                <i class="fa-regular fa-house fa-sm fa-fw"></i>
                            
                        </a>
                        

                        
                    </li>
            
                
                    

                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full "
                           href="/archives"
                        >
                            <span>
                                归档
                            </span>
                            
                                <i class="fa-regular fa-archive fa-sm fa-fw"></i>
                            
                        </a>
                        

                        
                    </li>
            
                
                    

                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full "
                           href="/tags"
                        >
                            <span>
                                标签
                            </span>
                            
                                <i class="fa-regular fa-tags fa-sm fa-fw"></i>
                            
                        </a>
                        

                        
                    </li>
            
                
                    

                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full "
                           href="/categories"
                        >
                            <span>
                                分类
                            </span>
                            
                                <i class="fa-regular fa-list fa-sm fa-fw"></i>
                            
                        </a>
                        

                        
                    </li>
            
                
                    

                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full "
                           href="/shuoshuo"
                        >
                            <span>
                                说说
                            </span>
                            
                                <i class="fa-solid fa-comment-dots fa-sm fa-fw"></i>
                            
                        </a>
                        

                        
                    </li>
            
                
                    

                    <li class="drawer-navbar-item-sub text-base my-1.5 flex flex-col w-full">
                        
                        <div class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary cursor-pointer text-2xl font-semibold group border-b border-border-color hover:border-primary w-full "
                             navbar-data-toggle="submenu-Links"
                        >
                            <span>
                                链接
                            </span>
                            
                                <i class="fa-solid fa-chevron-right fa-sm fa-fw transition-all"></i>
                            
                        </div>
                        

                        
                            <div class="flex-col items-start px-2 py-2 hidden" data-target="submenu-Links">
                                
                                    <div class="drawer-navbar-item text-base flex flex-col justify-center items-start hover:underline active:underline hover:underline-offset-1 rounded-3xl">
                                        <a class=" text-third-text-color text-xl"
                                           target="_blank" rel="noopener" href="https://github.com/ldspdvsun">GITHUB</a>
                                    </div>
                                
                                    <div class="drawer-navbar-item text-base flex flex-col justify-center items-start hover:underline active:underline hover:underline-offset-1 rounded-3xl">
                                        <a class=" text-third-text-color text-xl"
                                           target="_blank" rel="noopener" href="https://www.zhihu.com/people/ldspdvs">ZHIHU</a>
                                    </div>
                                
                            </div>
                        
                    </li>
            

            
            
                
                    
                    
                    
            
        </ul>

        <div class="statistics flex justify-around my-2.5">
    <a class="item tag-count-item flex flex-col justify-center items-center w-20" href="/tags">
        <div class="number text-2xl sm:text-xl text-second-text-color font-semibold">65</div>
        <div class="label text-third-text-color text-sm">标签</div>
    </a>
    <a class="item tag-count-item flex flex-col justify-center items-center w-20" href="/categories">
        <div class="number text-2xl sm:text-xl text-second-text-color font-semibold">20</div>
        <div class="label text-third-text-color text-sm">分类</div>
    </a>
    <a class="item tag-count-item flex flex-col justify-center items-center w-20" href="/archives">
        <div class="number text-2xl sm:text-xl text-second-text-color font-semibold">70</div>
        <div class="label text-third-text-color text-sm">文章</div>
    </a>
</div>
    </div>

    <div class="window-mask"></div>

</header>


		</div>

		<div class="main-content-body transition-fade-up">
			

			<div class="main-content">
				<div class="post-page-container flex relative justify-between box-border w-full h-full">
	<div class="article-content-container">

		<div class="article-title relative w-full">
			
			<div class="w-full flex items-center pt-6 justify-start">
				<h1 class="article-title-regular text-second-text-color tracking-tight text-4xl md:text-6xl font-semibold px-2 sm:px-6 md:px-8 py-3">PyTestAllure</h1>
			</div>
			
		</div>

		
		<div class="article-header flex flex-row gap-2 items-center px-2 sm:px-6 md:px-8">
			<div class="avatar w-[46px] h-[46px] flex-shrink-0 rounded-medium border border-border-color p-[1px]">
				<img src="https://avatars.githubusercontent.com/u/86214331?s=96&v=4">
			</div>
			<div class="info flex flex-col justify-between">
				<div class="author flex items-center">
					<span class="name text-default-text-color text-lg font-semibold">Sunmy</span>
					
					<span class="author-label ml-1.5 text-xs px-2 py-0.5 rounded-small text-third-text-color border border-shadow-color-1">Lv5</span>
					
				</div>
				<div class="meta-info">
					<div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fa-regular fa-pen-fancy"></i>&nbsp;
        <span class="desktop">2023-09-12 14:31:27</span>
        <span class="mobile">2023-09-12 14:31:27</span>
        <span class="hover-info">创建</span>
    </span>
    
        <span class="article-date article-meta-item">
            <i class="fa-regular fa-wrench"></i>&nbsp;
            <span class="desktop">2025-06-29 21:05:24</span>
            <span class="mobile">2025-06-29 21:05:24</span>
            <span class="hover-info">更新</span>
        </span>
    

    
        <span class="article-categories article-meta-item">
            <i class="fa-regular fa-folders"></i>&nbsp;
            <ul>
                
                
                    
                        
                        <li>
                            <a href="/categories/Python%E7%94%9F%E6%80%81/">Python生态</a>&nbsp;
                        </li>
                    
                    
                
                    
                        <li>
                            | <a href="/categories/%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6/">测试框架</a>&nbsp;
                        </li>
                    
                    
                
            </ul>
        </span>
    
    
        <span class="article-tags article-meta-item">
            <i class="fa-regular fa-tags"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/tags/Pytest/">Pytest</a>&nbsp;
                    </li>
                
                    <li>
                        | <a href="/tags/Allure/">Allure</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    

    
    
        <span class="article-wordcount article-meta-item">
            <i class="fa-regular fa-typewriter"></i>&nbsp;<span>11k 字</span>
        </span>
    
    
        <span class="article-min2read article-meta-item">
            <i class="fa-regular fa-clock"></i>&nbsp;<span>53 分钟</span>
        </span>
    
    
        <span class="article-pv article-meta-item">
            <i class="fa-regular fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>
        </span>
    
</div>

				</div>
			</div>
		</div>
		

		


		<div class="article-content markdown-body px-2 sm:px-6 md:px-8 pb-8">
			<h1 id="Pytest-L1"><a href="#Pytest-L1" class="headerlink" title="Pytest_L1"></a>Pytest_L1</h1><h2 id="Pytest-安装"><a href="#Pytest-安装" class="headerlink" title="Pytest 安装"></a>Pytest 安装</h2><div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install pytest</span><br></pre></td></tr></table></figure></div>

<h2 id="Pytest-命名规则"><a href="#Pytest-命名规则" class="headerlink" title="Pytest 命名规则"></a>Pytest 命名规则</h2><table>
<thead>
<tr>
<th>类型</th>
<th>规则</th>
</tr>
</thead>
<tbody><tr>
<td>文件</td>
<td>test_开头或者_test结尾</td>
</tr>
<tr>
<td>类</td>
<td>Test开头</td>
</tr>
<tr>
<td>方法&#x2F;函数</td>
<td>test_开头</td>
</tr>
</tbody></table>
<ul>
<li>注意：测试类中不可以添加 <strong>init</strong> 构造函数，添加之后，无法识别相关测试用例</li>
</ul>
<h2 id="PyTest-测试用例结构"><a href="#PyTest-测试用例结构" class="headerlink" title="PyTest 测试用例结构"></a>PyTest 测试用例结构</h2><ol>
<li>用例名称</li>
<li>用力步骤</li>
<li>用例断言</li>
</ol>
<ul>
<li>测试用例示例</li>
</ul>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">test_XXX</span>(<span class="params">self</span>):</span><br><span class="line">    <span class="comment"># 测试步骤1</span></span><br><span class="line">    <span class="comment"># 测试步骤2</span></span><br><span class="line">    <span class="comment"># 断言 实际结果 对比 预期结果</span></span><br><span class="line">    <span class="keyword">assert</span> ActualResult == ExceptedResult</span><br></pre></td></tr></table></figure></div>

<ul>
<li>类级别的测试用例</li>
</ul>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">TestXXX</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">setup</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># 资源准备</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">teardown</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># 资源销毁</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_XXX</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># 测试步骤1</span></span><br><span class="line">        <span class="comment"># 测试步骤2</span></span><br><span class="line">        <span class="comment"># 断言 实际结果 对比 预期结果</span></span><br><span class="line">        <span class="keyword">assert</span> ActualResult == ExceptedResult</span><br></pre></td></tr></table></figure></div>

<h2 id="PyTest测试用例断言"><a href="#PyTest测试用例断言" class="headerlink" title="PyTest测试用例断言"></a>PyTest测试用例断言</h2><ul>
<li>什么是断言</li>
</ul>
<p>断言(assert)是一种在程序中的一阶逻辑，目的为了表示与验证软件开发者预期的结果。当程序运行到断言的位置时，对应的断言应该为真。若断言不为真，程序会终止执行，并给出错误信息</p>
<ul>
<li><p>断言写法</p>
<ul>
<li>assert &lt;表达式&gt;<ul>
<li>assert True</li>
<li>assert False</li>
</ul>
</li>
<li>assert &lt;表达式&gt;,&lt;描述&gt;<ul>
<li>assert False,’Test false’</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_plat</span>():</span><br><span class="line">    <span class="keyword">assert</span> (<span class="string">&#x27;linux&#x27;</span> <span class="keyword">in</span> sys.platform),<span class="string">&#x27;改代码只能在linux系统运行&#x27;</span></span><br></pre></td></tr></table></figure></div>

<h2 id="Pytest-测试框架结构"><a href="#Pytest-测试框架结构" class="headerlink" title="Pytest 测试框架结构"></a>Pytest 测试框架结构</h2><table>
<thead>
<tr>
<th>类型</th>
<th>规则</th>
</tr>
</thead>
<tbody><tr>
<td>setup_moudle&#x2F;teardown_module</td>
<td>全局模块级（.py文件）</td>
</tr>
<tr>
<td>setup_class&#x2F;teardown_class</td>
<td>类级（class），只在类中前后运行一次</td>
</tr>
<tr>
<td>setup_function&#x2F;teardown_function</td>
<td>函数级，在类外</td>
</tr>
<tr>
<td>setup_method&#x2F;teardown_method</td>
<td>方法级，类中每个方法执行前后</td>
</tr>
<tr>
<td>setup&#x2F;teardown</td>
<td>在类中，运行在调用方法的前后（重点，相当于setup_method&#x2F;teardown_method缩写）</td>
</tr>
</tbody></table>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">@File    : test_setup_teardown.py</span></span><br><span class="line"><span class="string">@Time    : 2023/2/20 21:34</span></span><br><span class="line"><span class="string">@Author  : Sun</span></span><br><span class="line"><span class="string">@Description : </span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 模块级别，整个py文件只调一次</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">setup_module</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;资源准备：setup_module&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">teardown_module</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;资源销毁：teardown_module&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 函数级、在类外</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">setup_function</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;资源准备：setup_function&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">teardown_function</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;资源销毁：teardown_function&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_case1</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;test_case1&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_case2</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;test_case2&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TestDemo</span>:</span><br><span class="line">    <span class="comment"># 执行类级别，在类执行的前后分别执行setup_class teardown_class</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">setup_class</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;资源准备：setup_class&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">teardown_class</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;资源销毁：teardown_class&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 在类的每个方法前后执行</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">setup</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;资源准备：setup&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">teardown_method</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;资源销毁：teardown_method&#x27;</span>)</span><br><span class="line">        <span class="built_in">print</span>()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_demo1</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;test_demo1&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_demo2</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;test_demo2&#x27;</span>)</span><br></pre></td></tr></table></figure></div>

<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># result</span></span><br><span class="line">D:\Programs\anaconda3\envs\PyTest\python.exe <span class="string">&quot;D:/Program Files/JetBrains/PyCharm 2022.2.3/plugins/python/helpers/pycharm/_jb_pytest_runner.py&quot;</span> --path E:\PycharmProjects\PyTest\test_setup_teardown.py </span><br><span class="line">Testing started at <span class="number">21</span>:<span class="number">50</span> ...</span><br><span class="line">Launching pytest <span class="keyword">with</span> arguments E:\PycharmProjects\PyTest\test_setup_teardown.py --no-header --no-summary -q <span class="keyword">in</span> E:\PycharmProjects\PyTest</span><br><span class="line"></span><br><span class="line">============================= test session starts =============================</span><br><span class="line">collecting ... collected <span class="number">4</span> items</span><br><span class="line"></span><br><span class="line">test_setup_teardown.py::test_case1 资源准备：setup_module</span><br><span class="line">资源准备：setup_function</span><br><span class="line">PASSED                                [ <span class="number">25</span>%]test_case1</span><br><span class="line">资源销毁：teardown_function</span><br><span class="line"></span><br><span class="line">test_setup_teardown.py::test_case2 资源准备：setup_function</span><br><span class="line">PASSED                                [ <span class="number">50</span>%]test_case2</span><br><span class="line">资源销毁：teardown_function</span><br><span class="line"></span><br><span class="line">test_setup_teardown.py::TestDemo::test_demo1 </span><br><span class="line">test_setup_teardown.py::TestDemo::test_demo2 </span><br><span class="line"></span><br><span class="line">============================== <span class="number">4</span> passed <span class="keyword">in</span> <span class="number">0.02</span>s ==============================</span><br><span class="line"></span><br><span class="line">Process finished <span class="keyword">with</span> exit code <span class="number">0</span></span><br><span class="line">资源准备：setup_class</span><br><span class="line">资源准备：setup</span><br><span class="line">PASSED                      [ <span class="number">75</span>%]test_demo1</span><br><span class="line">资源销毁：teardown_method</span><br><span class="line"></span><br><span class="line">资源准备：setup</span><br><span class="line">PASSED                      [<span class="number">100</span>%]test_demo2</span><br><span class="line">资源销毁：teardown_method</span><br><span class="line"></span><br><span class="line">资源销毁：teardown_class</span><br><span class="line">资源销毁：teardown_module</span><br><span class="line"></span><br></pre></td></tr></table></figure></div>

<h2 id="计算器实战"><a href="#计算器实战" class="headerlink" title="计算器实战"></a>计算器实战</h2><p>计算器通过加法、减法、乘法、除法等功能的运算</p>
<h1 id="Pytest-L2"><a href="#Pytest-L2" class="headerlink" title="Pytest_L2"></a>Pytest_L2</h1><h2 id="Pytest参数化用例"><a href="#Pytest参数化用例" class="headerlink" title="Pytest参数化用例"></a>Pytest参数化用例</h2><h3 id="参数化应用场景"><a href="#参数化应用场景" class="headerlink" title="参数化应用场景"></a>参数化应用场景</h3><ul>
<li><p>测试登录场景</p>
<ul>
<li>登录成功</li>
<li>登录数百</li>
</ul>
</li>
<li><p>普通测试用例方法</p>
<ul>
<li>copy多份代码 or 输入多个参数</li>
</ul>
</li>
</ul>
<h3 id="Pytest参数化实现方法"><a href="#Pytest参数化实现方法" class="headerlink" title="Pytest参数化实现方法"></a>Pytest参数化实现方法</h3><ul>
<li>装饰器：</li>
</ul>
<p><strong>@pytest.mark.parametrize(“参数名(与测试用例中需要替换的参数一致)”,[参数值1,参数值2])</strong></p>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@pytest.mark.parametrize(<span class="params"><span class="string">&quot;useranme,password&quot;</span>,[[<span class="string">&quot;right&quot;</span>,<span class="string">&quot;right&quot;</span>],[<span class="string">&quot;wrong&quot;</span>,<span class="string">&quot;wrong&quot;</span>]]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_param</span>(<span class="params">useranme,password</span>):</span><br><span class="line">    login(useranme,password)</span><br></pre></td></tr></table></figure></div>

<h3 id="Mark-参数化测试函数使用"><a href="#Mark-参数化测试函数使用" class="headerlink" title="Mark:参数化测试函数使用"></a>Mark:参数化测试函数使用</h3><h4 id="单参数，可以将数据放在列表中"><a href="#单参数，可以将数据放在列表中" class="headerlink" title="单参数，可以将数据放在列表中"></a>单参数，可以将数据放在列表中</h4><div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pytest</span><br><span class="line"></span><br><span class="line">seach_list = [<span class="string">&#x27;appium&#x27;</span>,<span class="string">&#x27;sellent&#x27;</span>,<span class="string">&#x27;pytest&#x27;</span>]</span><br><span class="line"><span class="comment"># 参数化实现测试用例的动态形成</span></span><br><span class="line"><span class="meta">@pytest.mark.parametrize(<span class="params"><span class="string">&quot;search_key&quot;</span>,[<span class="string">&#x27;appium&#x27;</span>,<span class="string">&#x27;sellent&#x27;</span>,<span class="string">&#x27;pytest&#x27;</span>,<span class="string">&#x27;aba&#x27;</span>,<span class="string">&#x27;&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_search_param</span>(<span class="params">search_key</span>):</span><br><span class="line">    <span class="comment"># 1. 定义搜索词</span></span><br><span class="line">    <span class="comment"># search_key = &quot;appium&quot;</span></span><br><span class="line">    <span class="comment"># 2. 完成断言</span></span><br><span class="line">    <span class="keyword">assert</span> search_key <span class="keyword">in</span> seach_list</span><br><span class="line"></span><br><span class="line"><span class="comment"># RESULT</span></span><br><span class="line">test_param.py::test_search_param[sellent] </span><br><span class="line">test_param.py::test_search_param[pytest] </span><br><span class="line">test_param.py::test_search_param[aba] PASSED                          [ <span class="number">20</span>%]PASSED                         [ <span class="number">40</span>%]PASSED                          [ <span class="number">60</span>%]FAILED                             [ <span class="number">80</span>%]</span><br><span class="line">test_param.py:<span class="number">14</span> (test_search_param[aba])</span><br><span class="line"><span class="string">&#x27;aba&#x27;</span> != [<span class="string">&#x27;appium&#x27;</span>, <span class="string">&#x27;sellent&#x27;</span>, <span class="string">&#x27;pytest&#x27;</span>]</span><br><span class="line"></span><br><span class="line">Expected :[<span class="string">&#x27;appium&#x27;</span>, <span class="string">&#x27;sellent&#x27;</span>, <span class="string">&#x27;pytest&#x27;</span>]</span><br><span class="line">Actual   :<span class="string">&#x27;aba&#x27;</span></span><br><span class="line">&lt;Click to see difference&gt;</span><br><span class="line"></span><br><span class="line">search_key = <span class="string">&#x27;aba&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @pytest.mark.parametrize(<span class="params"><span class="string">&quot;search_key&quot;</span>, [<span class="string">&#x27;appium&#x27;</span>, <span class="string">&#x27;sellent&#x27;</span>, <span class="string">&#x27;pytest&#x27;</span>, <span class="string">&#x27;aba&#x27;</span>, <span class="string">&#x27;&#x27;</span>]</span>)</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_search_param</span>(<span class="params">search_key</span>):</span><br><span class="line">        <span class="comment"># 1. 定义搜索词</span></span><br><span class="line">        <span class="comment"># search_key = &quot;appium&quot;</span></span><br><span class="line">        <span class="comment"># 2. 完成断言</span></span><br><span class="line">&gt;       <span class="keyword">assert</span> search_key <span class="keyword">in</span> seach_list</span><br><span class="line">E       AssertionError: <span class="keyword">assert</span> <span class="string">&#x27;aba&#x27;</span> <span class="keyword">in</span> [<span class="string">&#x27;appium&#x27;</span>, <span class="string">&#x27;sellent&#x27;</span>, <span class="string">&#x27;pytest&#x27;</span>]</span><br><span class="line"></span><br><span class="line">test_param.py:<span class="number">20</span>: AssertionError</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">test_param.py::test_search_param[] FAILED                                [<span class="number">100</span>%]</span><br><span class="line">test_param.py:<span class="number">14</span> (test_search_param[])</span><br><span class="line"><span class="string">&#x27;&#x27;</span> != [<span class="string">&#x27;appium&#x27;</span>, <span class="string">&#x27;sellent&#x27;</span>, <span class="string">&#x27;pytest&#x27;</span>]</span><br><span class="line"></span><br><span class="line">Expected :[<span class="string">&#x27;appium&#x27;</span>, <span class="string">&#x27;sellent&#x27;</span>, <span class="string">&#x27;pytest&#x27;</span>]</span><br><span class="line">Actual   :<span class="string">&#x27;&#x27;</span></span><br><span class="line">&lt;Click to see difference&gt;</span><br><span class="line"></span><br><span class="line">search_key = <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @pytest.mark.parametrize(<span class="params"><span class="string">&quot;search_key&quot;</span>, [<span class="string">&#x27;appium&#x27;</span>, <span class="string">&#x27;sellent&#x27;</span>, <span class="string">&#x27;pytest&#x27;</span>, <span class="string">&#x27;aba&#x27;</span>, <span class="string">&#x27;&#x27;</span>]</span>)</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_search_param</span>(<span class="params">search_key</span>):</span><br><span class="line">        <span class="comment"># 1. 定义搜索词</span></span><br><span class="line">        <span class="comment"># search_key = &quot;appium&quot;</span></span><br><span class="line">        <span class="comment"># 2. 完成断言</span></span><br><span class="line">&gt;       <span class="keyword">assert</span> search_key <span class="keyword">in</span> seach_list</span><br><span class="line">E       AssertionError: <span class="keyword">assert</span> <span class="string">&#x27;&#x27;</span> <span class="keyword">in</span> [<span class="string">&#x27;appium&#x27;</span>, <span class="string">&#x27;sellent&#x27;</span>, <span class="string">&#x27;pytest&#x27;</span>]</span><br><span class="line"></span><br><span class="line">test_param.py:<span class="number">20</span>: AssertionError</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">========================= <span class="number">2</span> failed, <span class="number">3</span> passed <span class="keyword">in</span> <span class="number">0.14</span>s =========================</span><br><span class="line"></span><br><span class="line">Process finished <span class="keyword">with</span> exit code <span class="number">1</span></span><br></pre></td></tr></table></figure></div>

<h4 id="多参数，将数据放在列表嵌套元组中或列表嵌套列表中"><a href="#多参数，将数据放在列表嵌套元组中或列表嵌套列表中" class="headerlink" title="多参数，将数据放在列表嵌套元组中或列表嵌套列表中"></a>多参数，将数据放在列表嵌套元组中或列表嵌套列表中</h4><div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@pytest.mark.parametrize(<span class="params"><span class="string">&quot;username,password&quot;</span>,</span></span></span><br><span class="line"><span class="params"><span class="meta">                         [(<span class="params"><span class="string">&#x27;right_usename&#x27;</span>, <span class="string">&#x27;right_password&#x27;</span></span>), (<span class="params"><span class="string">&#x27;wrong_username&#x27;</span>, <span class="string">&#x27;wrong_password&#x27;</span></span>), (<span class="params"><span class="string">&quot; &quot;</span>, <span class="string">&#x27;password&#x27;</span></span>),</span></span></span><br><span class="line"><span class="params"><span class="meta">                          (<span class="params"><span class="string">&quot;username&quot;</span>, <span class="string">&#x27; &#x27;</span></span>)]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_login1</span>(<span class="params">username, password</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;登录的用户名:<span class="subst">&#123;username&#125;</span>, 密码:<span class="subst">&#123;password&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># RESULT</span></span><br><span class="line">PASSED          [ <span class="number">25</span>%]登录的用户名:right_usename, 密码:right_password</span><br><span class="line">PASSED         [ <span class="number">50</span>%]登录的用户名:wrong_username, 密码:wrong_password</span><br><span class="line">PASSED                            [ <span class="number">75</span>%]登录的用户名: , 密码:password</span><br><span class="line">PASSED                            [<span class="number">100</span>%]登录的用户名:username, 密码: </span><br></pre></td></tr></table></figure></div>

<h4 id="用例重命名"><a href="#用例重命名" class="headerlink" title="用例重命名"></a>用例重命名</h4><h5 id="用例重命名-添加ids参数"><a href="#用例重命名-添加ids参数" class="headerlink" title="用例重命名-添加ids参数"></a>用例重命名-添加ids参数</h5><ul>
<li>通过ids参数，将别名放在列表中，ids列表中参数的数量要与第二项参数值的个数一致</li>
</ul>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@pytest.mark.parametrize(<span class="params"><span class="string">&quot;username,password&quot;</span>,[[<span class="string">&#x27;right_usename&#x27;</span>,<span class="string">&#x27;right_password&#x27;</span>],[<span class="string">&#x27;wrong_username&#x27;</span>,<span class="string">&#x27;wrong_password&#x27;</span>],[<span class="string">&quot; &quot;</span>,<span class="string">&#x27;password&#x27;</span>]],</span></span></span><br><span class="line"><span class="params"><span class="meta">                         ids=[<span class="string">&#x27;RIGHT username and password&#x27;</span>,<span class="string">&#x27;WRONG username and password&#x27;</span>,<span class="string">&#x27;WRONG username and RIGHT password&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_login</span>(<span class="params">username,password</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;登录的用户名:<span class="subst">&#123;username&#125;</span>, 密码:<span class="subst">&#123;password&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># RESULT</span></span><br><span class="line">PASSED            [ <span class="number">33</span>%]登录的用户名:right_usename, 密码:right_password</span><br><span class="line">PASSED            [ <span class="number">66</span>%]登录的用户名:wrong_username, 密码:wrong_password</span><br><span class="line">PASSED      [<span class="number">100</span>%]登录的用户名: , 密码:password</span><br></pre></td></tr></table></figure></div>

<h5 id="用例重命名-添加ids参数（中文情况）"><a href="#用例重命名-添加ids参数（中文情况）" class="headerlink" title="用例重命名-添加ids参数（中文情况）"></a>用例重命名-添加ids参数（中文情况）</h5><ol>
<li>在项目下新建conftest.py文件，添加以下内容</li>
</ol>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">pytest_collection_modifyitems</span>(<span class="params">items</span>):</span><br><span class="line">    <span class="comment"># 测试用里收集完成是，将收集到的用例名name和用例表示nodeid的中文信息显示在控制台上</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> items:</span><br><span class="line">        i.name = i.name.encode(<span class="string">&#x27;utf-8&#x27;</span>).decode(<span class="string">&#x27;unicode_escape&#x27;</span>)</span><br><span class="line">        i._nodeid = i.nodeid.encode(<span class="string">&#x27;utf-8&#x27;</span>).decode(<span class="string">&#x27;unicode_escape&#x27;</span>)</span><br></pre></td></tr></table></figure></div>

<ol start="2">
<li>通过ids参数，将别名放在列表中，ids列表中参数的数量要与第二项参数值的个数一致</li>
</ol>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ids设置中文的情况</span></span><br><span class="line"><span class="meta">@pytest.mark.parametrize(<span class="params"><span class="string">&quot;username,password&quot;</span>,[[<span class="string">&#x27;right_usename&#x27;</span>,<span class="string">&#x27;right_password&#x27;</span>],[<span class="string">&#x27;wrong_username&#x27;</span>,<span class="string">&#x27;wrong_password&#x27;</span>],[<span class="string">&quot; &quot;</span>,<span class="string">&#x27;password&#x27;</span>]],</span></span></span><br><span class="line"><span class="params"><span class="meta">                         ids=[<span class="string">&#x27;正确&#x27;</span>,<span class="string">&#x27;错误&#x27;</span>,<span class="string">&#x27;正确用户名，错误密码&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_login2</span>(<span class="params">username,password</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;登录的用户名:<span class="subst">&#123;username&#125;</span>, 密码:<span class="subst">&#123;password&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># RESULT</span></span><br><span class="line">PASSED                                  [ <span class="number">33</span>%]登录的用户名:right_usename, 密码:right_password</span><br><span class="line">PASSED                                  [ <span class="number">66</span>%]登录的用户名:wrong_username, 密码:wrong_password</span><br><span class="line">PASSED                  [<span class="number">100</span>%]登录的用户名: , 密码:password</span><br></pre></td></tr></table></figure></div>

<h4 id="笛卡儿积"><a href="#笛卡儿积" class="headerlink" title="笛卡儿积"></a>笛卡儿积</h4><ul>
<li><p>两组数据</p>
<ul>
<li>a&#x3D;[1,2,3]</li>
<li>b&#x3D;[a,b,c]</li>
</ul>
</li>
<li><p>对应有几种形式</p>
<ul>
<li>(1,a)(1,b)(1,c)</li>
<li>(2,a)(2,b)(2,c)</li>
<li>(3,a)(3,b)(3,c)</li>
</ul>
</li>
<li><p>装饰器其实就是一个方法，先执行离测试用例最近的装饰器，在执行远的，由近及远，所以测试结果是1-a,1-b,1-c,2-a,2-b,,,</p>
</li>
</ul>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 笛卡儿积</span></span><br><span class="line"><span class="meta">@pytest.mark.parametrize(<span class="params"><span class="string">&#x27;b&#x27;</span>, [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>]</span>)</span></span><br><span class="line"><span class="meta">@pytest.mark.parametrize(<span class="params"><span class="string">&#x27;a&#x27;</span>, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_dk</span>(<span class="params">a, b</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;笛卡儿积形式的参数：a=<span class="subst">&#123;a&#125;</span>,b=<span class="subst">&#123;b&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># RESULT</span></span><br><span class="line">PASSED                                       [ <span class="number">11</span>%]笛卡儿积形式的参数：a=<span class="number">1</span>,b=a</span><br><span class="line">PASSED                                       [ <span class="number">22</span>%]笛卡儿积形式的参数：a=<span class="number">1</span>,b=b</span><br><span class="line">PASSED                                       [ <span class="number">33</span>%]笛卡儿积形式的参数：a=<span class="number">1</span>,b=c</span><br><span class="line">PASSED                                       [ <span class="number">44</span>%]笛卡儿积形式的参数：a=<span class="number">2</span>,b=a</span><br><span class="line">PASSED                                       [ <span class="number">55</span>%]笛卡儿积形式的参数：a=<span class="number">2</span>,b=b</span><br><span class="line">PASSED                                       [ <span class="number">66</span>%]笛卡儿积形式的参数：a=<span class="number">2</span>,b=c</span><br><span class="line">PASSED                                       [ <span class="number">77</span>%]笛卡儿积形式的参数：a=<span class="number">3</span>,b=a</span><br><span class="line">PASSED                                       [ <span class="number">88</span>%]笛卡儿积形式的参数：a=<span class="number">3</span>,b=b</span><br><span class="line">PASSED                                       [<span class="number">100</span>%]笛卡儿积形式的参数：a=<span class="number">3</span>,b=c</span><br><span class="line"></span><br></pre></td></tr></table></figure></div>

<h2 id="标记测试用例"><a href="#标记测试用例" class="headerlink" title="标记测试用例"></a>标记测试用例</h2><ul>
<li>场景：只执行符合要求的某一部分用例，可以把一个web项目划分多个模块，然后指定模块名称运行</li>
<li>解决：在测试用例方法上加 <strong>@pytest.mark.标签名</strong></li>
<li>执行：-m执行自定义标记的相关用例<ul>
<li>pytest -s test_mark_zi_09.py -m&#x3D;webtest</li>
<li>pytest -s test_mark_zi_09.py -m “apptest”</li>
<li>pytest -s test_mark_zi_09.py -m “not ios”</li>
</ul>
</li>
</ul>
<ol>
<li>在文件夹下新建pytest.ini文件，注册标签，避免执行pytest -m 命令时出现warinning</li>
</ol>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[pytest]</span><br><span class="line">markers = <span class="built_in">str</span></span><br><span class="line">    bignum</span><br><span class="line">    <span class="built_in">int</span></span><br><span class="line">    <span class="built_in">float</span></span><br><span class="line">    zero</span><br><span class="line">    minus</span><br></pre></td></tr></table></figure></div>

<ol start="2">
<li>新建测试用例</li>
</ol>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pytest</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">double</span>(<span class="params">a</span>):</span><br><span class="line">    <span class="keyword">return</span> a * <span class="number">2</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试数据：整形</span></span><br><span class="line"><span class="meta">@pytest.mark.int</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_double_int</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;test double int&#x27;</span>)</span><br><span class="line">    <span class="keyword">assert</span> <span class="number">1</span> == double(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试数据：负数</span></span><br><span class="line"><span class="meta">@pytest.mark.minus</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_double_minus</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;test double minus&#x27;</span>)</span><br><span class="line">    <span class="keyword">assert</span> -<span class="number">2</span> == double(-<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试数据：浮点数</span></span><br><span class="line"><span class="meta">@pytest.mark.float</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_double_float</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;test double float&#x27;</span>)</span><br><span class="line">    <span class="keyword">assert</span> <span class="number">0.2</span> == double(<span class="number">0.1</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@pytest.mark.float</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_double_float2</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;test double float&#x27;</span>)</span><br><span class="line">    <span class="keyword">assert</span> -<span class="number">10.2</span> == double(-<span class="number">0.1</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@pytest.mark.zero</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_double_zero</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;test double zero&#x27;</span>)</span><br><span class="line">    <span class="keyword">assert</span> <span class="number">10</span> == double(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@pytest.mark.bignum</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_double_bignum</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;test double bignum&#x27;</span>)</span><br><span class="line">    <span class="keyword">assert</span> <span class="number">200</span> == double(<span class="number">100</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@pytest.mark.str</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_double_str</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;test double str&#x27;</span>)</span><br><span class="line">    <span class="keyword">assert</span> <span class="string">&#x27;aa&#x27;</span> == double(<span class="string">&#x27;a&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@pytest.mark.str</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_double_str1</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;test double str&#x27;</span>)</span><br><span class="line">    <span class="keyword">assert</span> <span class="string">&#x27;a$a$&#x27;</span> == double(<span class="string">&#x27;a$&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># RESULT</span></span><br><span class="line">PS E:\PycharmProjects\PyTest\L2&gt; pytest .\test_command_param.py -vs -m <span class="string">&quot;str&quot;</span></span><br><span class="line">================================================================================= test session starts =================================================================================</span><br><span class="line">platform win32 -- Python <span class="number">3.9</span><span class="number">.12</span>, pytest-<span class="number">7.1</span><span class="number">.2</span>, pluggy-<span class="number">1.0</span><span class="number">.0</span> -- D:\Program Files\Python39\python.exe</span><br><span class="line">cachedir: .pytest_cache</span><br><span class="line">rootdir: E:\PycharmProjects\PyTest\L2, configfile: pytest.ini</span><br><span class="line">collected <span class="number">8</span> items / <span class="number">6</span> deselected / <span class="number">2</span> selected                                                                                                                                       </span><br><span class="line"></span><br><span class="line">test_command_param.py::test_double_str test double <span class="built_in">str</span></span><br><span class="line">PASSED</span><br><span class="line">test_command_param.py::test_double_str1 test double <span class="built_in">str</span></span><br><span class="line">PASSED</span><br><span class="line"></span><br><span class="line">=========================================================================== <span class="number">2</span> passed, <span class="number">6</span> deselected <span class="keyword">in</span> <span class="number">0.01</span>s =========================================================================== </span><br><span class="line">PS E:\PycharmProjects\PyTest\L2&gt; </span><br><span class="line"></span><br></pre></td></tr></table></figure></div>

<h2 id="设置跳过、预期失败用例"><a href="#设置跳过、预期失败用例" class="headerlink" title="设置跳过、预期失败用例"></a>设置跳过、预期失败用例</h2><ul>
<li>调试时不像运行这个用例</li>
<li>标记无法在某些平台上运行的测试功能</li>
</ul>
<h3 id="设置跳过"><a href="#设置跳过" class="headerlink" title="设置跳过"></a>设置跳过</h3><ol>
<li><p>添加装饰器</p>
<ul>
<li>@pytest.mark.skip</li>
</ul>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@pytest.mark.skip(<span class="params">reason=<span class="string">&#x27;未开发完成&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_true</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;true&#x27;</span>)</span><br><span class="line">    <span class="keyword">assert</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># RESULT</span></span><br><span class="line">SKIPPED (未开发完成)                             [ <span class="number">50</span>%]</span><br><span class="line">Skipped: 未开发完成</span><br><span class="line"></span><br></pre></td></tr></table></figure></div>

<ul>
<li>@pytest.mark.skipif</li>
</ul>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@pytest.mark.skipif(<span class="params">sys.platform == <span class="string">&#x27;win&#x27;</span>, reason=<span class="string">&#x27;跳过此项测试的条件为，如果是win平台则跳过此项测试&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_true1</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Platform:&#123;&#125;&#x27;</span>.<span class="built_in">format</span>(sys.platform))</span><br><span class="line">    <span class="keyword">assert</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># RESULT</span></span><br><span class="line">PASSED                                          [ <span class="number">66</span>%]Platform:win32</span><br></pre></td></tr></table></figure></div></li>
<li><p>代码中添加跳过代码</p>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">pytest.skip(reason)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">check_login</span>():</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_login</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;start&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> check_login():</span><br><span class="line">        pytest.skip(<span class="string">&#x27;unsupported configuration&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;end&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># RESULT</span></span><br><span class="line">PASSED                                          [<span class="number">100</span>%]start</span><br><span class="line">end</span><br></pre></td></tr></table></figure></div></li>
</ol>
<h3 id="预期失败用例"><a href="#预期失败用例" class="headerlink" title="预期失败用例"></a>预期失败用例</h3><ul>
<li>xfail使用场景</li>
<li>与skip类似，预期结果为fail，标记用例为fail</li>
<li>用法：添加装饰器@pytest.mark.xfail</li>
</ul>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@pytest.mark.xfail</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_result</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;test_xfaile 方法执行&#x27;</span>)</span><br><span class="line">    <span class="keyword">assert</span> <span class="number">2</span> == <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># RESULT</span></span><br><span class="line">XPASS                                          [<span class="number">100</span>%]test_xfaile 方法执行</span><br></pre></td></tr></table></figure></div>

<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@xfail(<span class="params">reason=<span class="string">&#x27;bug 110&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_result1</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;test_xfaile 方法执行&#x27;</span>)</span><br><span class="line">    <span class="keyword">assert</span> <span class="number">1</span> == <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># RESULT</span></span><br><span class="line">XFAIL (bug <span class="number">110</span>)                               [<span class="number">100</span>%]test_xfaile 方法执行</span><br><span class="line"></span><br><span class="line"><span class="meta">@xfail(<span class="params">reason=<span class="string">&#x27;bug 110&#x27;</span></span>)</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_result1</span>():</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;test_xfaile 方法执行&#x27;</span>)</span><br><span class="line">&gt;       <span class="keyword">assert</span> <span class="number">1</span> == <span class="number">2</span></span><br><span class="line">E       <span class="keyword">assert</span> <span class="number">1</span> == <span class="number">2</span></span><br></pre></td></tr></table></figure></div>

<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">test_result2</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;test_xfaile 方法执行&#x27;</span>)</span><br><span class="line">    pytest.xfail(reason=<span class="string">&#x27;该功能尚未完成&#x27;</span>)</span><br><span class="line">    <span class="keyword">assert</span> <span class="number">1</span> == <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># RESULT</span></span><br><span class="line">XFAIL (该功能尚未完成)                        [<span class="number">100</span>%]test_xfaile 方法执行</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_result2</span>():</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;test_xfaile 方法执行&#x27;</span>)</span><br><span class="line">&gt;       pytest.xfail(reason=<span class="string">&#x27;该功能尚未完成&#x27;</span>)</span><br><span class="line">E       _pytest.outcomes.XFailed: 该功能尚未完成</span><br></pre></td></tr></table></figure></div>

<h2 id="运行用例"><a href="#运行用例" class="headerlink" title="运行用例"></a>运行用例</h2><ol>
<li><p>运行 某个&#x2F;多个 用例包（文件夹）</p>
<p>在某个文件夹下直接运行pytest，将会测试所有符合 test_xxx或 xxx_test 命名的用例</p>
</li>
</ol>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@99eb4bd37fb2:~/code/vscode-server/PyTest/L2<span class="comment"># pytest</span></span><br></pre></td></tr></table></figure></div>

<ol start="2">
<li><p>运行 某个&#x2F;多个 用力模块</p>
<p>pytest 文件名.py</p>
</li>
</ol>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@99eb4bd37fb2:~/code/vscode-server/PyTest/L2<span class="comment"># pytest test_param.py -v</span></span><br></pre></td></tr></table></figure></div>

<ol start="3">
<li><p>运行 某个&#x2F;多个 用例类</p>
<p>pytest 文件名.py::测试类名</p>
</li>
</ol>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@99eb4bd37fb2:~/code/vscode-server/PyTest/L1<span class="comment"># pytest test_setup_teardown.py::TestDemo -v</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></div>

<ol start="4">
<li><p>运行 某个&#x2F;多个 用例方法</p>
<p>pytest 文件名.py::测试类名::测试用例名</p>
</li>
</ol>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@99eb4bd37fb2:~/code/vscode-server/PyTest/L1<span class="comment"># pytest test_setup_teardown.py::TestDemo::test_demo1 -v</span></span><br></pre></td></tr></table></figure></div>

<h2 id="测试用例调度与执行"><a href="#测试用例调度与执行" class="headerlink" title="测试用例调度与执行"></a>测试用例调度与执行</h2><ul>
<li><p>命令行参数-使用缓存状态</p>
<ul>
<li>–lf(–last-failed)只重新运行故障</li>
<li>–ff(–failed-first)先运行故障然后再运行其余的测试</li>
</ul>
</li>
</ul>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 正常测试</span></span><br><span class="line">root@99eb4bd37fb2:~/code/vscode-server/PyTest/L2<span class="comment"># pytest -v</span></span><br><span class="line">============================================================== test session starts ===============================================================</span><br><span class="line">platform linux -- Python <span class="number">3.10</span><span class="number">.6</span>, pytest-<span class="number">7.2</span><span class="number">.1</span>, pluggy-<span class="number">1.0</span><span class="number">.0</span> -- /usr/<span class="built_in">bin</span>/python3</span><br><span class="line">cachedir: .pytest_cache</span><br><span class="line">rootdir: /root/code/vscode-server/PyTest/L2, configfile: pytest.ini</span><br><span class="line">collected <span class="number">56</span> items                                                                                                                           </span><br><span class="line"></span><br><span class="line">test_command_param.py::test_double_int FAILED                                                                                              [  <span class="number">1</span>%]</span><br><span class="line">test_command_param.py::test_double_minus PASSED                                                                                            [  <span class="number">3</span>%]</span><br><span class="line">test_command_param.py::test_double_float PASSED                                                                                            [  <span class="number">5</span>%]</span><br><span class="line">test_command_param.py::test_double_float2 FAILED                                                                                           [  <span class="number">7</span>%]</span><br><span class="line">test_command_param.py::test_double_zero FAILED                                                                                             [  <span class="number">8</span>%]</span><br><span class="line">.....</span><br><span class="line">test_skip.py::test_login PASSED                                                                                                            [ <span class="number">94</span>%]</span><br><span class="line">test_skip.py::test_result XPASS                                                                                                            [ <span class="number">96</span>%]</span><br><span class="line">test_skip.py::test_result1 XFAIL (该功能尚未完成)                                                                                          [ <span class="number">98</span>%]</span><br><span class="line">test_skip.py::test_result2 XFAIL (该功能尚未完成)                                                                                          [<span class="number">100</span>%]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># --lf</span></span><br><span class="line">root@99eb4bd37fb2:~/code/vscode-server/PyTest/L2<span class="comment"># pytest --lf -v</span></span><br><span class="line">============================================================== test session starts ===============================================================</span><br><span class="line">platform linux -- Python <span class="number">3.10</span><span class="number">.6</span>, pytest-<span class="number">7.2</span><span class="number">.1</span>, pluggy-<span class="number">1.0</span><span class="number">.0</span> -- /usr/<span class="built_in">bin</span>/python3</span><br><span class="line">cachedir: .pytest_cache</span><br><span class="line">rootdir: /root/code/vscode-server/PyTest/L2, configfile: pytest.ini</span><br><span class="line">collected <span class="number">5</span> items                                                                                                                            </span><br><span class="line">run-last-failure: rerun previous <span class="number">5</span> failures (skipped <span class="number">1</span> file)</span><br><span class="line"></span><br><span class="line">test_command_param.py::test_double_int FAILED                                                                                              [ <span class="number">20</span>%]</span><br><span class="line">test_command_param.py::test_double_float2 FAILED                                                                                           [ <span class="number">40</span>%]</span><br><span class="line">test_command_param.py::test_double_zero FAILED                                                                                             [ <span class="number">60</span>%]</span><br><span class="line">test_param.py::test_search_param[aba] FAILED                                                                                               [ <span class="number">80</span>%]</span><br><span class="line">test_param.py::test_search_param[] FAILED                                                                                                  [<span class="number">100</span>%]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># --ff</span></span><br><span class="line">root@99eb4bd37fb2:~/code/vscode-server/PyTest/L2<span class="comment"># pytest --ff -v</span></span><br><span class="line">============================================================== test session starts ===============================================================</span><br><span class="line">platform linux -- Python <span class="number">3.10</span><span class="number">.6</span>, pytest-<span class="number">7.2</span><span class="number">.1</span>, pluggy-<span class="number">1.0</span><span class="number">.0</span> -- /usr/<span class="built_in">bin</span>/python3</span><br><span class="line">cachedir: .pytest_cache</span><br><span class="line">rootdir: /root/code/vscode-server/PyTest/L2, configfile: pytest.ini</span><br><span class="line">collected <span class="number">56</span> items                                                                                                                           </span><br><span class="line">run-last-failure: rerun previous <span class="number">5</span> failures first</span><br><span class="line"></span><br><span class="line">test_command_param.py::test_double_int FAILED                                                                                              [  <span class="number">1</span>%]</span><br><span class="line">test_command_param.py::test_double_float2 FAILED                                                                                           [  <span class="number">3</span>%]</span><br><span class="line">test_command_param.py::test_double_zero FAILED                                                                                             [  <span class="number">5</span>%]</span><br><span class="line">test_param.py::test_search_param[aba] FAILED                                                                                               [  <span class="number">7</span>%]</span><br><span class="line">test_param.py::test_search_param[] FAILED                                                                                                  [  <span class="number">8</span>%]</span><br><span class="line">test_command_param.py::test_double_minus PASSED                                                                                            [ <span class="number">10</span>%]</span><br><span class="line">test_command_param.py::test_double_float PASSED                                                                                            [ <span class="number">12</span>%]</span><br><span class="line">test_command_param.py::test_double_bignum PASSED                                                                                           [ <span class="number">14</span>%]</span><br><span class="line">.....</span><br><span class="line">test_skip.py::test_login PASSED                                                                                                            [ <span class="number">94</span>%]</span><br><span class="line">test_skip.py::test_result XPASS                                                                                                            [ <span class="number">96</span>%]</span><br><span class="line">test_skip.py::test_result1 XFAIL (该功能尚未完成)                                                                                          [ <span class="number">98</span>%]</span><br><span class="line">test_skip.py::test_result2 XFAIL (该功能尚未完成)                                                                                          [<span class="number">100</span>%]</span><br></pre></td></tr></table></figure></div>

<h2 id="pytest-命令行常用参数"><a href="#pytest-命令行常用参数" class="headerlink" title="pytest 命令行常用参数"></a>pytest 命令行常用参数</h2><ul>
<li>–help 获取参数列表</li>
</ul>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">root@99eb4bd37fb2:~/code/vscode-server/PyTest/L2<span class="comment"># pytest --help</span></span><br><span class="line">usage: pytest [options] [file_or_dir] [file_or_dir] [...]</span><br><span class="line"></span><br><span class="line">positional arguments:</span><br><span class="line">  file_or_dir</span><br><span class="line"></span><br><span class="line">general:</span><br><span class="line">  -k EXPRESSION         Only run tests which <span class="keyword">match</span> the given substring expression. An expression <span class="keyword">is</span> a Python evaluatable expression where <span class="built_in">all</span></span><br><span class="line">                        names are substring-matched against test names <span class="keyword">and</span> their parent classes. Example: -k <span class="string">&#x27;test_method or test_other&#x27;</span> matches</span><br><span class="line">                        <span class="built_in">all</span> test functions <span class="keyword">and</span> classes whose name contains <span class="string">&#x27;test_method&#x27;</span> <span class="keyword">or</span> <span class="string">&#x27;test_other&#x27;</span>, <span class="keyword">while</span> -k <span class="string">&#x27;not test_method&#x27;</span> matches those</span><br><span class="line">                        that don<span class="string">&#x27;t contain &#x27;</span>test_method<span class="string">&#x27; in their names. -k &#x27;</span><span class="keyword">not</span> test_method <span class="keyword">and</span> <span class="keyword">not</span> test_othe<span class="string">r&#x27; will eliminate the matches.</span></span><br><span class="line"><span class="string">                        Additionally keywords are matched to classes and functions containing extra names in their &#x27;</span>extra_keyword_matches<span class="string">&#x27; set, as</span></span><br><span class="line"><span class="string">                        well as functions which have names assigned directly to them. The matching is case-insensitive.</span></span><br><span class="line"><span class="string">  -m MARKEXPR           Only run tests matching given mark expression. For example: -m &#x27;</span>mark1 <span class="keyword">and</span> <span class="keyword">not</span> mark2<span class="string">&#x27;.</span></span><br><span class="line"><span class="string">  --markers             show markers (builtin, plugin and per-project ones).</span></span><br><span class="line"><span class="string">  -x, --exitfirst       Exit instantly on first error or failed test</span></span><br><span class="line"><span class="string">  --fixtures, --funcargs</span></span><br><span class="line"><span class="string">...</span></span><br><span class="line"><span class="string">root@99eb4bd37fb2:~/code/vscode-server/PyTest/L2# </span></span><br></pre></td></tr></table></figure></div>

<ul>
<li>-x 用例一旦失败（fail&#x2F;error)立刻停止执行</li>
</ul>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@99eb4bd37fb2:~/code/vscode-server/PyTest/L2<span class="comment"># pytest -x</span></span><br></pre></td></tr></table></figure></div>

<ul>
<li>–maxfail&#x3D;num 用例达到</li>
</ul>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@99eb4bd37fb2:~/code/vscode-server/PyTest/L2<span class="comment"># pytest --maxfail=3</span></span><br></pre></td></tr></table></figure></div>

<ul>
<li>-m 标记用例，执行@pytest.mark.xx 标记为xx的用例</li>
</ul>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">root@99eb4bd37fb2:~/code/vscode-server/PyTest/L2<span class="comment"># pytest -m &#x27;bignum&#x27; -vs</span></span><br><span class="line">============================================================== test session starts ===============================================================</span><br><span class="line">platform linux -- Python <span class="number">3.10</span><span class="number">.6</span>, pytest-<span class="number">7.2</span><span class="number">.1</span>, pluggy-<span class="number">1.0</span><span class="number">.0</span> -- /usr/<span class="built_in">bin</span>/python3</span><br><span class="line">cachedir: .pytest_cache</span><br><span class="line">rootdir: /root/code/vscode-server/PyTest/L2, configfile: pytest.ini</span><br><span class="line">collected <span class="number">56</span> items / <span class="number">55</span> deselected / <span class="number">1</span> selected                                                                                              </span><br><span class="line"></span><br><span class="line">test_command_param.py::test_double_bignum test double bignum</span><br><span class="line">PASSED</span><br><span class="line"></span><br><span class="line">======================================================== <span class="number">1</span> passed, <span class="number">55</span> deselected <span class="keyword">in</span> <span class="number">0.01</span>s ========================================================</span><br><span class="line">root@99eb4bd37fb2:~/code/vscode-server/PyTest/L2<span class="comment"># </span></span><br></pre></td></tr></table></figure></div>

<ul>
<li>-k 执行包含某个关键字的测试用例(针对测试用例名称)</li>
</ul>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">root@99eb4bd37fb2:~/code/vscode-server/PyTest/L2<span class="comment"># pytest -vs -k &#x27;login1&#x27;</span></span><br><span class="line">============================================================== test session starts ===============================================================</span><br><span class="line">platform linux -- Python <span class="number">3.10</span><span class="number">.6</span>, pytest-<span class="number">7.2</span><span class="number">.1</span>, pluggy-<span class="number">1.0</span><span class="number">.0</span> -- /usr/<span class="built_in">bin</span>/python3</span><br><span class="line">cachedir: .pytest_cache</span><br><span class="line">rootdir: /root/code/vscode-server/PyTest/L2, configfile: pytest.ini</span><br><span class="line">collected <span class="number">56</span> items / <span class="number">52</span> deselected / <span class="number">4</span> selected                                                                                              </span><br><span class="line"></span><br><span class="line">test_param.py::test_login1[right_usename-right_password] 登录的用户名:right_usename, 密码:right_password</span><br><span class="line">PASSED</span><br><span class="line">test_param.py::test_login1[wrong_username-wrong_password] 登录的用户名:wrong_username, 密码:wrong_password</span><br><span class="line">PASSED</span><br><span class="line">test_param.py::test_login1[ -password] 登录的用户名: , 密码:password</span><br><span class="line">PASSED</span><br><span class="line">test_param.py::test_login1[username- ] 登录的用户名:username, 密码: </span><br><span class="line">PASSED</span><br><span class="line"></span><br><span class="line">======================================================== <span class="number">4</span> passed, <span class="number">52</span> deselected <span class="keyword">in</span> <span class="number">0.02</span>s ========================================================</span><br><span class="line">root@99eb4bd37fb2:~/code/vscode-server/PyTest/L2<span class="comment"># </span></span><br></pre></td></tr></table></figure></div>

<ul>
<li>-v打印详细日志</li>
</ul>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">root@99eb4bd37fb2:~/code/vscode-server/PyTest/L2<span class="comment"># pytest -v -k &#x27;login1&#x27;</span></span><br><span class="line">============================================================== test session starts ===============================================================</span><br><span class="line">platform linux -- Python <span class="number">3.10</span><span class="number">.6</span>, pytest-<span class="number">7.2</span><span class="number">.1</span>, pluggy-<span class="number">1.0</span><span class="number">.0</span> -- /usr/<span class="built_in">bin</span>/python3</span><br><span class="line">cachedir: .pytest_cache</span><br><span class="line">rootdir: /root/code/vscode-server/PyTest/L2, configfile: pytest.ini</span><br><span class="line">collected <span class="number">56</span> items / <span class="number">52</span> deselected / <span class="number">4</span> selected                                                                                              </span><br><span class="line"></span><br><span class="line">test_param.py::test_login1[right_usename-right_password] PASSED                                                                            [ <span class="number">25</span>%]</span><br><span class="line">test_param.py::test_login1[wrong_username-wrong_password] PASSED                                                                           [ <span class="number">50</span>%]</span><br><span class="line">test_param.py::test_login1[ -password] PASSED                                                                                              [ <span class="number">75</span>%]</span><br><span class="line">test_param.py::test_login1[username- ] PASSED                                                                                              [<span class="number">100</span>%]</span><br><span class="line"></span><br><span class="line">======================================================== <span class="number">4</span> passed, <span class="number">52</span> deselected <span class="keyword">in</span> <span class="number">0.02</span>s ========================================================</span><br><span class="line">root@99eb4bd37fb2:~/code/vscode-server/PyTest/L2<span class="comment"># </span></span><br></pre></td></tr></table></figure></div>

<ul>
<li>-s打印输出日志（一般-vs一起使用）</li>
</ul>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">root@99eb4bd37fb2:~/code/vscode-server/PyTest/L2<span class="comment"># pytest -s -k &#x27;login1&#x27;</span></span><br><span class="line">============================================================== test session starts ===============================================================</span><br><span class="line">platform linux -- Python <span class="number">3.10</span><span class="number">.6</span>, pytest-<span class="number">7.2</span><span class="number">.1</span>, pluggy-<span class="number">1.0</span><span class="number">.0</span></span><br><span class="line">rootdir: /root/code/vscode-server/PyTest/L2, configfile: pytest.ini</span><br><span class="line">collected <span class="number">56</span> items / <span class="number">52</span> deselected / <span class="number">4</span> selected                                                                                              </span><br><span class="line"></span><br><span class="line">test_param.py 登录的用户名:right_usename, 密码:right_password</span><br><span class="line">.登录的用户名:wrong_username, 密码:wrong_password</span><br><span class="line">.登录的用户名: , 密码:password</span><br><span class="line">.登录的用户名:username, 密码: </span><br><span class="line">.</span><br><span class="line"></span><br><span class="line">======================================================== <span class="number">4</span> passed, <span class="number">52</span> deselected <span class="keyword">in</span> <span class="number">0.02</span>s ========================================================</span><br><span class="line">root@99eb4bd37fb2:~/code/vscode-server/PyTest/L2<span class="comment"># </span></span><br></pre></td></tr></table></figure></div>

<ul>
<li>–collect-only(测试平台，pytest自动导入)</li>
</ul>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">root@99eb4bd37fb2:~/code/vscode-server/PyTest/L2<span class="comment"># pytest --collect-only -k &#x27;login1&#x27;</span></span><br><span class="line">============================================================== test session starts ===============================================================</span><br><span class="line">platform linux -- Python <span class="number">3.10</span><span class="number">.6</span>, pytest-<span class="number">7.2</span><span class="number">.1</span>, pluggy-<span class="number">1.0</span><span class="number">.0</span></span><br><span class="line">rootdir: /root/code/vscode-server/PyTest/L2, configfile: pytest.ini</span><br><span class="line">collected <span class="number">56</span> items / <span class="number">52</span> deselected / <span class="number">4</span> selected                                                                                              </span><br><span class="line"></span><br><span class="line">&lt;Module test_param.py&gt;</span><br><span class="line">  &lt;Function test_login1[right_usename-right_password]&gt;</span><br><span class="line">  &lt;Function test_login1[wrong_username-wrong_password]&gt;</span><br><span class="line">  &lt;Function test_login1[ -password]&gt;</span><br><span class="line">  &lt;Function test_login1[username- ]&gt;</span><br><span class="line"></span><br><span class="line">================================================= <span class="number">4</span>/<span class="number">56</span> tests collected (<span class="number">52</span> deselected) <span class="keyword">in</span> <span class="number">0.01</span>s ==================================================</span><br><span class="line">root@99eb4bd37fb2:~/code/vscode-server/PyTest/L2<span class="comment"># </span></span><br></pre></td></tr></table></figure></div>

<h2 id="执行Pytest"><a href="#执行Pytest" class="headerlink" title="执行Pytest"></a>执行Pytest</h2><ul>
<li>代码执行main函数</li>
</ul>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="comment"># 1、运行当前目录下所有符合规则的用例，包括子目录（test_*.py 和 *_test.py）</span></span><br><span class="line">    <span class="comment"># pytest.main()</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 2、运行test_first.py::test_answer模块中的某一用例</span></span><br><span class="line">    <span class="comment"># pytest.main([&#x27;test_param.py::test_dk&#x27;,&#x27;-vs&#x27;])</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 3、运行某个标签</span></span><br><span class="line">    pytest.main([<span class="string">&#x27;test_command_param.py&#x27;</span>,<span class="string">&#x27;-vs&#x27;</span>,<span class="string">&#x27;-m&#x27;</span>,<span class="string">&#x27;float&#x27;</span>])</span><br></pre></td></tr></table></figure></div>

<ul>
<li>使用python -m pytest调用pytest</li>
</ul>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PS E:\PycharmProjects\PyTest\L2&gt; python -m pytest -vs .\test_param.py^</span><br></pre></td></tr></table></figure></div>

<h2 id="pytest异常处理"><a href="#pytest异常处理" class="headerlink" title="pytest异常处理"></a>pytest异常处理</h2><ul>
<li>try…except</li>
</ul>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    a = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;Please input a number: &#x27;</span>))</span><br><span class="line">    b = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;Please input a number: &#x27;</span>))</span><br><span class="line">    c = a / b</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;<span class="subst">&#123;a&#125;</span> / <span class="subst">&#123;b&#125;</span> = <span class="subst">&#123;c&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="keyword">except</span>(ValueError, ArithmeticError):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;ValueError or ArithmeticError&#x27;</span>)</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Unknown Error&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;End&quot;</span>)</span><br></pre></td></tr></table></figure></div>

<ul>
<li>pytest.raise()<ul>
<li>可以捕获特定的异常</li>
<li>获取捕获的异常的细节（异常类型、异常信息）</li>
<li>发生异常，后面的代码将不会被执行</li>
</ul>
</li>
</ul>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">test_raise1</span>():</span><br><span class="line">    <span class="keyword">with</span> pytest.raises(ZeroDivisionError):</span><br><span class="line">        <span class="keyword">raise</span> ZeroDivisionError(<span class="string">&#x27;除数为0&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_raise2</span>():</span><br><span class="line">    <span class="keyword">with</span> pytest.raises((ValueError, ZeroDivisionError)):</span><br><span class="line">        <span class="keyword">raise</span> ZeroDivisionError(<span class="string">&#x27;除数为0&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 正则匹配里的内容必须和设置的内容一样，否则将会认为失败</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_raise3</span>():</span><br><span class="line">    <span class="keyword">with</span> pytest.raises((ValueError, ZeroDivisionError), <span class="keyword">match</span>=<span class="string">&#x27;value must be 0 or none&#x27;</span>):</span><br><span class="line">        <span class="keyword">raise</span> ZeroDivisionError(<span class="string">&#x27;value must be 0 or none&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_raise4</span>():</span><br><span class="line">    <span class="keyword">with</span> pytest.raises((ValueError, ZeroDivisionError)) <span class="keyword">as</span> exc_info:</span><br><span class="line">        <span class="keyword">raise</span> ValueError(<span class="string">&#x27;value must be 0 or none&#x27;</span>)</span><br><span class="line">    <span class="keyword">assert</span> exc_info.<span class="built_in">type</span> <span class="keyword">is</span> ValueError</span><br><span class="line">    <span class="keyword">assert</span> exc_info.value.args[<span class="number">0</span>] == <span class="string">&#x27;value must be 0 or none&#x27;</span></span><br></pre></td></tr></table></figure></div>

<h1 id="Pytest-L3"><a href="#Pytest-L3" class="headerlink" title="Pytest_L3"></a>Pytest_L3</h1><h2 id="Pytest结合数据驱动-yaml"><a href="#Pytest结合数据驱动-yaml" class="headerlink" title="Pytest结合数据驱动-yaml"></a>Pytest结合数据驱动-yaml</h2><ul>
<li><p>什么是数据驱动</p>
<ul>
<li>数据驱动就是数据的改变从而驱动自动化测试的执行，最终引起测试结果的改变。简单来说就是参数化的应用。</li>
</ul>
</li>
<li><p>应用</p>
<ul>
<li>App、Web、接口自动化测试</li>
<li>测试步骤数据驱动</li>
<li>测试数据的驱动</li>
<li>配置的数据驱动</li>
</ul>
</li>
</ul>
<h3 id="yaml文件介绍"><a href="#yaml文件介绍" class="headerlink" title="yaml文件介绍"></a>yaml文件介绍</h3><ul>
<li><p>对象：键值对的集合，用冒号“:”表示</p>
</li>
<li><p>数组：一组按次序排列的值，前加“-”</p>
</li>
<li><p>纯量：单个的，不可再分的值</p>
<ul>
<li>字符串</li>
<li>布尔值</li>
<li>整数</li>
<li>浮点数</li>
<li>Null</li>
<li>时间</li>
<li>日期</li>
</ul>
</li>
<li><p>读取yaml文件</p>
<ul>
<li>安装：pip install pyyaml</li>
<li>方法：yaml.safe_load(f)</li>
<li>方法：yaml.safe_dump(f)</li>
</ul>
</li>
</ul>
<ol>
<li>datas&#x2F;data.yaml</li>
</ol>
<div class="code-container" data-rel="Yaml"><figure class="iseeu highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#相当于[[1,2,3],[3,6,9],[100,200,300]]</span></span><br><span class="line"><span class="bullet">-</span></span><br><span class="line">  <span class="bullet">-</span> <span class="number">1</span></span><br><span class="line">  <span class="bullet">-</span> <span class="number">2</span></span><br><span class="line">  <span class="bullet">-</span> <span class="number">3</span></span><br><span class="line"><span class="bullet">-</span></span><br><span class="line">  <span class="bullet">-</span> <span class="number">3</span></span><br><span class="line">  <span class="bullet">-</span> <span class="number">6</span></span><br><span class="line">  <span class="bullet">-</span> <span class="number">9</span></span><br><span class="line"><span class="bullet">-</span></span><br><span class="line">  <span class="bullet">-</span> <span class="number">100</span></span><br><span class="line">  <span class="bullet">-</span> <span class="number">200</span></span><br><span class="line">  <span class="bullet">-</span> <span class="number">300</span></span><br></pre></td></tr></table></figure></div>

<ol start="2">
<li>func&#x2F;operation.py</li>
</ol>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">@File    : operation.py</span></span><br><span class="line"><span class="string">@Time    : 2023/2/26 22:58</span></span><br><span class="line"><span class="string">@Author  : Sun</span></span><br><span class="line"><span class="string">@Description : 被测对象</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 被测方法，相加功能</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">my_add</span>(<span class="params">x, y</span>):</span><br><span class="line">    result = x + y</span><br><span class="line">    <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure></div>

<ol start="3">
<li>testcase&#x2F;test_add.py</li>
</ol>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">@File    : test_add.py</span></span><br><span class="line"><span class="string">@Time    : 2023/2/26 22:58</span></span><br><span class="line"><span class="string">@Author  : Sun</span></span><br><span class="line"><span class="string">@Description : 测试用例</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">import</span> pytest</span><br><span class="line"><span class="keyword">import</span> yaml</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> L3.func.operation <span class="keyword">import</span> my_add</span><br><span class="line"></span><br><span class="line">file_path = <span class="string">&#x27;../datas/data.yaml&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取yaml文件</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_data</span>():</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(file_path, mode=<span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        data = yaml.safe_load(f)</span><br><span class="line">    <span class="keyword">return</span> data</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_get_data</span>():</span><br><span class="line">    <span class="built_in">print</span>(get_data())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TestWithYAML</span>:</span><br><span class="line">    <span class="comment"># 参数化适合少量数据测试，不适合批量数据</span></span><br><span class="line"><span class="meta">    @pytest.mark.parametrize(<span class="params"><span class="string">&#x27;x,y,expected&#x27;</span>, [[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">3</span>, <span class="number">6</span>, <span class="number">9</span>], [<span class="number">100</span>, <span class="number">200</span>, <span class="number">300</span>],</span></span></span><br><span class="line"><span class="params"><span class="meta">                                              [<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>], [<span class="number">32</span>, <span class="number">62</span>, <span class="number">94</span>], [<span class="number">1001</span>, <span class="number">2001</span>, <span class="number">3002</span>]]</span>)</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_add1</span>(<span class="params">self, x, y, expected</span>):</span><br><span class="line">        <span class="keyword">assert</span> my_add(<span class="built_in">int</span>(x), <span class="built_in">int</span>(y)) == <span class="built_in">int</span>(expected)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 使用yaml文件测试</span></span><br><span class="line"><span class="meta">    @pytest.mark.parametrize(<span class="params"><span class="string">&#x27;x,y,expected&#x27;</span>, get_data(<span class="params"></span>)</span>)</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_add2</span>(<span class="params">self, x, y, expected</span>):</span><br><span class="line">        <span class="keyword">assert</span> my_add(<span class="built_in">int</span>(x), <span class="built_in">int</span>(y)) == <span class="built_in">int</span>(expected)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    pytest.main([<span class="string">&#x27;test_add.py&#x27;</span>,<span class="string">&#x27;-vs&#x27;</span>])</span><br><span class="line"></span><br></pre></td></tr></table></figure></div>

<h2 id="Pytest-结合数据驱动-excel"><a href="#Pytest-结合数据驱动-excel" class="headerlink" title="Pytest 结合数据驱动-excel"></a>Pytest 结合数据驱动-excel</h2><ul>
<li>openpyxl</li>
</ul>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">get_excel</span>():</span><br><span class="line">    <span class="comment"># 获取工作簿</span></span><br><span class="line">    book = openpyxl.load_workbook(<span class="string">&#x27;../datas/params.xlsx&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 获取工作表</span></span><br><span class="line">    sheet = book.active</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 获取单元格数据</span></span><br><span class="line">    <span class="comment"># a_1 = sheet[&#x27;A1&#x27;].value</span></span><br><span class="line">    <span class="comment"># print(a_1)</span></span><br><span class="line">    <span class="comment"># 获取数据时column和row的索引都是从1开始</span></span><br><span class="line">    <span class="comment"># c_3 = sheet.cell(column=3, row=3).value</span></span><br><span class="line">    <span class="comment"># print(c_3)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 获取多个单元格</span></span><br><span class="line">    cells = sheet[<span class="string">&#x27;A1&#x27;</span>:<span class="string">&#x27;C7&#x27;</span>]</span><br><span class="line">    values = []</span><br><span class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> cells:</span><br><span class="line">        datas = []</span><br><span class="line">        <span class="keyword">for</span> cell <span class="keyword">in</span> row:</span><br><span class="line">            datas.append(cell.value)</span><br><span class="line">        values.append(datas)</span><br><span class="line">    <span class="comment"># print(values)</span></span><br><span class="line">    <span class="keyword">return</span> values</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 使用excel文件测试</span></span><br><span class="line"><span class="meta">    @pytest.mark.parametrize(<span class="params"><span class="string">&#x27;x,y,expected&#x27;</span>, get_excel(<span class="params"></span>)</span>)</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_add_excel</span>(<span class="params">self, x, y, expected</span>):</span><br><span class="line">        <span class="keyword">assert</span> my_add(<span class="built_in">int</span>(x), <span class="built_in">int</span>(y)) == <span class="built_in">int</span>(expected)</span><br></pre></td></tr></table></figure></div>

<h2 id="Pytest-结合数据驱动-csv"><a href="#Pytest-结合数据驱动-csv" class="headerlink" title="Pytest 结合数据驱动-csv"></a>Pytest 结合数据驱动-csv</h2><div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 读取csv文件</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_csv</span>():</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;../datas/demo.csv&#x27;</span>, <span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        datas = csv.reader(f)</span><br><span class="line">        valuse = []</span><br><span class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> datas:</span><br><span class="line">            valuse.append(line)</span><br><span class="line">        <span class="keyword">return</span> valuse</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 使用csv文件测试</span></span><br><span class="line"><span class="meta">    @pytest.mark.parametrize(<span class="params"><span class="string">&#x27;x,y,expected&#x27;</span>, get_csv(<span class="params"></span>)</span>)</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_add_csv</span>(<span class="params">self, x, y, expected</span>):</span><br><span class="line">        <span class="keyword">assert</span> my_add(<span class="built_in">int</span>(x), <span class="built_in">int</span>(y)) == <span class="built_in">int</span>(expected)</span><br></pre></td></tr></table></figure></div>

<h2 id="Pytest-结合数据驱动-json"><a href="#Pytest-结合数据驱动-json" class="headerlink" title="Pytest 结合数据驱动-json"></a>Pytest 结合数据驱动-json</h2><div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 读取json文件</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_json</span>():</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;../datas/data.json&#x27;</span>,<span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        datas = json.loads(f.read())</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">list</span>(datas.values())</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 使用json文件测试</span></span><br><span class="line"><span class="meta">    @pytest.mark.parametrize(<span class="params"><span class="string">&#x27;x,y,expected&#x27;</span>, get_json(<span class="params"></span>)</span>)</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_add_json</span>(<span class="params">self, x, y, expected</span>):</span><br><span class="line">        <span class="keyword">assert</span> my_add(<span class="built_in">int</span>(x), <span class="built_in">int</span>(y)) == <span class="built_in">int</span>(expected)</span><br></pre></td></tr></table></figure></div>

<h2 id="Pytest-测试用例生命周期管理-Fixture用法"><a href="#Pytest-测试用例生命周期管理-Fixture用法" class="headerlink" title="Pytest 测试用例生命周期管理-Fixture用法"></a>Pytest 测试用例生命周期管理-Fixture用法</h2><ol>
<li>命令灵活：对应setup,teardown,可以不起这两个名字</li>
<li>数据共享：在conftest.py配置里写方法，可以实现数据共享，不需要import导入</li>
<li>scope的层次及申请的yield组合相当于各种setup和teardown</li>
<li>实现参数化</li>
</ol>
<ul>
<li><p>场景：<br>测试用例执行时，加入有10条用例，其中4条需要登录，setup和teardown无法满足</p>
</li>
<li><p>步骤</p>
<ol>
<li>导入pytest</li>
<li>在登录的函数(要实现自动化的函数)上面加上@pytest.fixture()</li>
<li>在要使用的测试方法中传入（登录函数名称），将会执行登录的方法</li>
<li>不传入登录函数的将会直接执行测试方法</li>
</ol>
</li>
</ul>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pytest</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义了登录的fixture</span></span><br><span class="line"><span class="meta">@pytest.fixture</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">login</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;完成登录操作&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 未定义登录的fixture</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">login1</span>():</span><br><span class="line">    <span class="built_in">print</span>()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;完成登录操作&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_search</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;搜索&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用fixture方法，需要调用函数就先传入函数名字，否则就不需要</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_order</span>(<span class="params">login</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;下单功能&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 未使用fixture方法</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_cart</span>():</span><br><span class="line">    login1()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;购物车&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure></div>

<h2 id="Fixture在自动化中的应用-作用域"><a href="#Fixture在自动化中的应用-作用域" class="headerlink" title="Fixture在自动化中的应用-作用域"></a>Fixture在自动化中的应用-作用域</h2><table>
<thead>
<tr>
<th>取值</th>
<th>范围</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>function</td>
<td>函数级</td>
<td>每一个函数或方法都会调用</td>
</tr>
<tr>
<td>class</td>
<td>类级别</td>
<td>每个测试类只运行一次</td>
</tr>
<tr>
<td>module</td>
<td>模块级</td>
<td>每个.py文件调用一次</td>
</tr>
<tr>
<td>package</td>
<td>包级</td>
<td>每个python包只调用一次（暂不支持）</td>
</tr>
<tr>
<td>session</td>
<td>会话级</td>
<td>每个会话只运行一次，绘画内所有方法及类，模块都共享这个方法</td>
</tr>
</tbody></table>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pytest</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义了登录的fixture，尽量避免以test_开头</span></span><br><span class="line"><span class="comment"># 设置作用域 scope=&quot;module&quot;</span></span><br><span class="line"><span class="comment"># 设置作用域 scope=&quot;class&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义了登录的fixture</span></span><br><span class="line"><span class="comment"># @pytest.fixture(scope=&quot;class&quot;)</span></span><br><span class="line"><span class="meta">@pytest.fixture(<span class="params">scope=<span class="string">&quot;module&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">login</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;完成登录操作&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_search</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;搜索&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用fixture方法，需要调用函数就先传入函数名字，否则就不需要</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_order</span>(<span class="params">login</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;下单功能&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 未使用fixture方法</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_cart</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;购物车&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TestDemo</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_case1</span>(<span class="params">self,login</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;case1&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_case2</span>(<span class="params">self,login</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;case2&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure></div>

<h2 id="Fixture在自动化中的应用-yield关键字"><a href="#Fixture在自动化中的应用-yield关键字" class="headerlink" title="Fixture在自动化中的应用-yield关键字"></a>Fixture在自动化中的应用-yield关键字</h2><ul>
<li>场景：测试方法后销毁清除数据的如何进行</li>
<li>解决：在fixture函数中加入yield关键字，yield是调用第一次返回的结果，第二次执行它下面的语句返回</li>
<li>步骤：在@pytest.fixture(scope&#x3D;module)，在登录的方法中加入yield，之后加销毁清除的步骤</li>
</ul>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pytest</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义了登录的fixture，尽量避免以test_开头</span></span><br><span class="line"><span class="comment"># 设置作用域 scope=&quot;module&quot;</span></span><br><span class="line"><span class="comment"># 设置作用域 scope=&quot;class&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义了登录的fixture</span></span><br><span class="line"><span class="meta">@pytest.fixture(<span class="params">scope=<span class="string">&quot;class&quot;</span></span>)</span></span><br><span class="line"><span class="comment"># @pytest.fixture(scope=&quot;module&quot;)</span></span><br><span class="line"><span class="comment"># @pytest.fixture(scope=&quot;session&quot;)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">login</span>():</span><br><span class="line">    <span class="comment"># setup 操作</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;完成登录操作&#x27;</span>)</span><br><span class="line">    token = <span class="string">&#x27;abcagasss&#x27;</span></span><br><span class="line">    username = <span class="string">&#x27;user1&#x27;</span></span><br><span class="line">    <span class="comment"># 相当于return，但是如果改成return，将不会执行后续操作</span></span><br><span class="line">    <span class="keyword">yield</span> token,username</span><br><span class="line">    <span class="comment"># teardown 操作</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;完成登出操作&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_search</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;搜索&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用fixture方法，需要调用函数就先传入函数名字，否则就不需要</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_order</span>(<span class="params">login</span>):</span><br><span class="line">    token,username = login</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;token:<span class="subst">&#123;token&#125;</span>,username:<span class="subst">&#123;username&#125;</span>&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;下单功能&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 未使用fixture方法</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_cart</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;购物车&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TestDemo</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_case1</span>(<span class="params">self,login</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;case1&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_case2</span>(<span class="params">self,login</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;case2&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure></div>

<h2 id="Pytest生命周期管理-自动注册"><a href="#Pytest生命周期管理-自动注册" class="headerlink" title="Pytest生命周期管理-自动注册"></a>Pytest生命周期管理-自动注册</h2><ul>
<li><p>场景<br>与其他人一起开发，公共模块要在不同文件中，要在大家都能访问到的地方</p>
</li>
<li><p>解决<br>使用conftest.py这个文件进行数据共享，并且可以放在不同位置起到共享作用</p>
</li>
<li><p>前提</p>
<ul>
<li>conftest文件名不能换</li>
<li>放在项目下是全局共享的地方</li>
</ul>
</li>
<li><p>执行</p>
<ul>
<li>系统执行到参数login时，先从本模块中查找是否有这个名字的变量什么的</li>
<li>之后在conftest.py中找是否有</li>
</ul>
</li>
<li><p>步骤<br>将登录模块@pytest.fixture写在conftest.py文件中</p>
</li>
</ul>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># conftest.py</span></span><br><span class="line"><span class="keyword">import</span> pytest</span><br><span class="line"></span><br><span class="line"><span class="comment"># conftest.py 名字固定，不能改变</span></span><br><span class="line"><span class="comment"># 定义公用方法</span></span><br><span class="line"><span class="comment"># 定义了登录的fixture</span></span><br><span class="line"><span class="meta">@pytest.fixture(<span class="params">scope=<span class="string">&quot;class&quot;</span></span>)</span></span><br><span class="line"><span class="comment"># @pytest.fixture(scope=&quot;module&quot;)</span></span><br><span class="line"><span class="comment"># @pytest.fixture(scope=&quot;session&quot;)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">login</span>():</span><br><span class="line">    <span class="comment"># setup 操作</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;完成登录操作&#x27;</span>)</span><br><span class="line">    token = <span class="string">&#x27;abcagasss&#x27;</span></span><br><span class="line">    username = <span class="string">&#x27;user1&#x27;</span></span><br><span class="line">    <span class="comment"># 相当于return，但是如果改成return，将不会执行后续操作</span></span><br><span class="line">    <span class="keyword">yield</span> token, username</span><br><span class="line">    <span class="comment"># teardown 操作</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;完成登出操作&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@pytest.fixture(<span class="params">scope=<span class="string">&quot;session&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">connectDB</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;连接数据库&#x27;</span>)</span><br><span class="line">    <span class="keyword">yield</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;断开数据库&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># test_fixture_use_conftest.py</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_get_order</span>(<span class="params">connectDB, login</span>):</span><br><span class="line">    token, username = login</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;token:<span class="subst">&#123;token&#125;</span>,username:<span class="subst">&#123;username&#125;</span>&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;获取订单&#x27;</span>)</span><br></pre></td></tr></table></figure></div>

<h2 id="Pytest生命周期管理-自动生效"><a href="#Pytest生命周期管理-自动生效" class="headerlink" title="Pytest生命周期管理-自动生效"></a>Pytest生命周期管理-自动生效</h2><ul>
<li>场景：<br>不想测试方法有改动，或全部都自动实现，自动应用，没特例，也都不需要返回值时可以选择自动应用</li>
<li>解决：<br>使用fixture中参数 autouse&#x3D;True 实现</li>
<li>步骤：<br>在方法上面加@pytest.fixture(autouse&#x3D;True)</li>
</ul>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># conftest.py</span></span><br><span class="line"><span class="meta">@pytest.fixture(<span class="params">scope=<span class="string">&quot;function&quot;</span>,autouse=<span class="literal">True</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">login1</span>():</span><br><span class="line">    <span class="comment"># setup 操作</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;完成登录操作—autouse=True&#x27;</span>)</span><br><span class="line">    token = <span class="string">&#x27;abcagasss&#x27;</span></span><br><span class="line">    username = <span class="string">&#x27;user1&#x27;</span></span><br><span class="line">    <span class="comment"># 相当于return，但是如果改成return，将不会执行后续操作</span></span><br><span class="line">    <span class="keyword">yield</span> token, username</span><br><span class="line">    <span class="comment"># teardown 操作</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;完成登出操作-autouse=True&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># test_fixture_use_conftest1.py</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TestDemo</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_case1</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;case1&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_case2</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;case2&#x27;</span>)</span><br></pre></td></tr></table></figure></div>

<h2 id="Pytest-fixture-实现参数化"><a href="#Pytest-fixture-实现参数化" class="headerlink" title="Pytest fixture 实现参数化"></a>Pytest fixture 实现参数化</h2><ul>
<li>场景：<br>测试离不开数据，为了数据灵活，一般数据都是通过参数传递的</li>
<li>解决：<br>fixture 通过固定参数request传递</li>
<li>步骤：<br>在fixture中增加@pytest.fixture(params&#x3D;[1,2,3,’linda’])<br>在方法参数中写request，方法体里面使用request.param接收参数</li>
</ul>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pytest</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@pytest.fixture(<span class="params">params=[[<span class="string">&#x27;harry&#x27;</span>, <span class="string">&#x27;123&#x27;</span>], [<span class="string">&#x27;lice&#x27;</span>, <span class="number">999</span>]]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">login_param</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;用户名：<span class="subst">&#123;request.param&#125;</span>&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> request.param</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_demo1</span>(<span class="params">login_param</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;demo1 case:数据为：<span class="subst">&#123;login_param&#125;</span>&#x27;</span>)</span><br></pre></td></tr></table></figure></div>

<h1 id="Pytest-L4"><a href="#Pytest-L4" class="headerlink" title="Pytest_L4"></a>Pytest_L4</h1><h2 id="Pytest-配置文件-pytest-ini"><a href="#Pytest-配置文件-pytest-ini" class="headerlink" title="Pytest 配置文件-pytest.ini"></a>Pytest 配置文件-pytest.ini</h2><ul>
<li>pytest.ini是pytest的配置文件</li>
<li>可以修改pytest的默认行为</li>
<li>不能使用任何中文符号，包括汉字、空格、引号、冒号等等</li>
<li>作用</li>
<li>修改用例的命名规则</li>
<li>配置日志格式，比代码配置更方便</li>
<li>添加标签，防止运行过程报警告错误</li>
<li>指定执行目录</li>
<li>排除搜索目录</li>
</ul>
<p>执行check_开头和 test_开头的所有的文件，后面一定要加*<br>python_files &#x3D; check_* test_*</p>
<h2 id="Pytest插件"><a href="#Pytest插件" class="headerlink" title="Pytest插件"></a>Pytest插件</h2><ul>
<li>pytest 插件分类<ul>
<li>外部插件 pip install 安装插件</li>
<li>本地插件 pytest自动模块发现机制（conftest.py）存放的</li>
<li>内置插件 代码内部的_pytest目录加载</li>
</ul>
</li>
<li>pytest hook介绍</li>
<li>pytest hook执行顺序</li>
</ul>
<h2 id="Pytest-常用插件"><a href="#Pytest-常用插件" class="headerlink" title="Pytest 常用插件"></a>Pytest 常用插件</h2><blockquote>
<p><a class="link"   target="_blank" rel="noopener" href="https://pypi.org/search/?q=pytest" >https://pypi.org/search/?q=pytest<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
</blockquote>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pytest --collect-only 收集测试用例</span><br><span class="line">pip install pytest-ordering 控制用例的执行顺序</span><br><span class="line">pip install pytest-xdist 分布式并发执行测试用例</span><br></pre></td></tr></table></figure></div>

<h2 id="Pytest并行与分布式执行"><a href="#Pytest并行与分布式执行" class="headerlink" title="Pytest并行与分布式执行"></a>Pytest并行与分布式执行</h2><div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pip install pytest-xdist 分布式并发执行测试用例</span><br><span class="line"></span><br><span class="line"><span class="comment"># auto 自行决定调用CPU核心，也可自己指定CPU核心数</span></span><br><span class="line">pytest -n auto</span><br></pre></td></tr></table></figure></div>

<h2 id="Pytest内置插件-hook-体系"><a href="#Pytest内置插件-hook-体系" class="headerlink" title="Pytest内置插件 hook 体系"></a>Pytest内置插件 hook 体系</h2><ul>
<li>是个函数，在系统消息触时被系统调用</li>
<li>自动触发机制</li>
<li>Hook函数的名称是确定的</li>
<li>pytest有非常多的勾子函数</li>
<li>使用时直接编写函数体</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://postimg.cc/zLRLtfRk"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://i.postimg.cc/0NVpNMkh/image.png"
                      alt="image.png"
                ></a></p>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">conftest.py(存放在根目录下)</span><br><span class="line"><span class="comment"># hook 体系</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">Optional</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">pytest_collection_modifyitems</span>(<span class="params">session, config, items:<span class="built_in">list</span></span>):</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> items:</span><br><span class="line">        item.name = item.name.encode(<span class="string">&#x27;utf-8&#x27;</span>).decode(<span class="string">&#x27;unicode-escape&#x27;</span>)</span><br><span class="line">        item._nodeid = item.nodeid.encode(<span class="string">&#x27;utf-8&#x27;</span>).decode(<span class="string">&#x27;unicode-escape&#x27;</span>)</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Called after collection has been performed. May filter or re-order</span></span><br><span class="line"><span class="string">    the items in-place.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    :param pytest.Session session: The pytest session object.</span></span><br><span class="line"><span class="string">    :param pytest.Config config: The pytest config object.</span></span><br><span class="line"><span class="string">    :param List[pytest.Item] items: List of item objects.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">pytest_runtest_setup</span>(<span class="params">item: <span class="string">&quot;Item&quot;</span></span>) -&gt; <span class="literal">None</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;hook : setup&quot;</span>)</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Called to perform the setup phase for a test item.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    The default implementation runs ``setup()`` on ``item`` and all of its</span></span><br><span class="line"><span class="string">    parents (which haven&#x27;t been setup yet). This includes obtaining the</span></span><br><span class="line"><span class="string">    values of fixtures required by the item (which haven&#x27;t been obtained</span></span><br><span class="line"><span class="string">    yet).</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">pytest_runtest_teardown</span>(<span class="params">item: <span class="string">&quot;Item&quot;</span>, nextitem: <span class="type">Optional</span>[<span class="string">&quot;Item&quot;</span>]</span>) -&gt; <span class="literal">None</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;hook : teardown&#x27;</span>)</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Called to perform the teardown phase for a test item.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    The default implementation runs the finalizers and calls ``teardown()``</span></span><br><span class="line"><span class="string">    on ``item`` and all of its parents (which need to be torn down). This</span></span><br><span class="line"><span class="string">    includes running the teardown phase of fixtures required by the item (if</span></span><br><span class="line"><span class="string">    they go out of scope).</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    :param nextitem:</span></span><br><span class="line"><span class="string">        The scheduled-to-be-next test item (None if no further test item is</span></span><br><span class="line"><span class="string">        scheduled). This argument is used to perform exact teardowns, i.e.</span></span><br><span class="line"><span class="string">        calling just enough finalizers so that nextitem only needs to call</span></span><br><span class="line"><span class="string">        setup functions.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></div>

<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">test_hook.py</span><br><span class="line"></span><br><span class="line"><span class="comment"># hook 体系</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_demo1</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;test_demo1&#x27;</span>)</span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>总结</p>
</blockquote>
<ol>
<li>hook函数名字固定</li>
<li>hook函数会被自动执行</li>
<li>执行是有先后顺序的</li>
<li>pytest定义了很多hook函数，可以在不同阶段实现不同功能</li>
</ol>
<h2 id="Pytest插件开发"><a href="#Pytest插件开发" class="headerlink" title="Pytest插件开发"></a>Pytest插件开发</h2><p>pytest_collection_modifyitems 收集上来的测试用例</p>
<h1 id="Allure2-L1"><a href="#Allure2-L1" class="headerlink" title="Allure2_L1"></a>Allure2_L1</h1><h2 id="Allure2安装"><a href="#Allure2安装" class="headerlink" title="Allure2安装"></a>Allure2安装</h2><ul>
<li>Java开发、轻量级、灵活的测试报告工具</li>
<li>多平台的Report框架</li>
<li>支持多语言，Python、JavaScript、PHP、Ruby</li>
<li>可以为开发&#x2F;测试&#x2F;管理等人员提供详尽的测试报告，包括测试类别、测试步骤、日志、图片、视频等</li>
<li>可为管理层提供高水准的统计报告</li>
<li>可以集成到Jenkins生成在线的趋势汇总报告</li>
</ul>
<div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Ubuntu 2204</span></span><br><span class="line"><span class="comment"># 1. 配置Java环境</span></span><br><span class="line"><span class="built_in">sudo</span> apt-get update</span><br><span class="line"><span class="built_in">sudo</span> apt-get install default-jre</span><br><span class="line"><span class="built_in">sudo</span> apt-get install default-jdk</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 配置allure</span></span><br><span class="line"><span class="built_in">sudo</span> apt-add-repository ppa:qameta/allure</span><br><span class="line"><span class="built_in">sudo</span> apt-get update </span><br><span class="line"><span class="built_in">sudo</span> apt-get install allure</span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> nano /etc/environment</span><br><span class="line">ALLURE_HOME=<span class="string">&quot;/usr/lib/allure/&quot;</span></span><br><span class="line"><span class="built_in">source</span> /etc/environment</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. 验证版本 </span></span><br><span class="line">allure --version</span><br><span class="line"></span><br></pre></td></tr></table></figure></div>

<h2 id="运行方式"><a href="#运行方式" class="headerlink" title="运行方式"></a>运行方式</h2><ol>
<li>运行用例，添加 –alluredir</li>
</ol>
<div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pytest [测试用例/模块/包] --alluredir=存放结果路径</span><br><span class="line">pytest [测试用例/模块/包] --alluredir=./results</span><br></pre></td></tr></table></figure></div>

<ol start="2">
<li>生成报告<ul>
<li>allure server 生成在线报告</li>
<li>allure generate 生成静态资源报告</li>
</ul>
</li>
</ol>
<div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 指定端口、IP</span></span><br><span class="line">allure serve ./results/ -h 172.17.0.5 -p 20000</span><br></pre></td></tr></table></figure></div>

<h1 id="Allure2-L2"><a href="#Allure2-L2" class="headerlink" title="Allure2_L2"></a>Allure2_L2</h1><h2 id="allure2-报告生成"><a href="#allure2-报告生成" class="headerlink" title="allure2 报告生成"></a>allure2 报告生成</h2><blockquote>
<p>常用参数</p>
</blockquote>
<ul>
<li>allure generate可以输出路径，也可以清理上次的报告记录<ul>
<li>-o &#x2F; –output 输出报告的路径</li>
<li>-c &#x2F; –clean 如果报告路径重复</li>
</ul>
</li>
<li>allure open打开报告<ul>
<li>-h &#x2F; –host 主机IP地址，此主机将用于启动报表的web服务</li>
<li>-p &#x2F; –port 主机端口，此端口将用于启动报表的web服务器，默认值0</li>
</ul>
</li>
</ul>
<h3 id="清理上次结果-–clean-alluredir"><a href="#清理上次结果-–clean-alluredir" class="headerlink" title="清理上次结果 –clean-alluredir"></a>清理上次结果 –clean-alluredir</h3><div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@3832dba7df75:~/code/vscode-server/PyTest/Allure2_L1/allure2_2# pytest test_allure_demo.py --alluredir=./results --clean-alluredir</span><br></pre></td></tr></table></figure></div>

<h3 id="allure-generate-生成静态资源报告"><a href="#allure-generate-生成静态资源报告" class="headerlink" title="allure generate 生成静态资源报告"></a>allure generate 生成静态资源报告</h3><div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@3832dba7df75:~/code/vscode-server/PyTest/Allure2_L1/allure2_2# allure generate ./results</span><br><span class="line">Report successfully generated to allure-report</span><br></pre></td></tr></table></figure></div>

<h3 id="allure-generate-生成静态资源报告-指定输出报告路径"><a href="#allure-generate-生成静态资源报告-指定输出报告路径" class="headerlink" title="allure generate 生成静态资源报告,指定输出报告路径"></a>allure generate 生成静态资源报告,指定输出报告路径</h3><div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@3832dba7df75:~/code/vscode-server/PyTest/Allure2_L1/allure2_2# allure generate ./results -o ./myreports </span><br></pre></td></tr></table></figure></div>

<h3 id="allure-open打开报告，指定IP，port"><a href="#allure-open打开报告，指定IP，port" class="headerlink" title="allure open打开报告，指定IP，port"></a>allure open打开报告，指定IP，port</h3><div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@3832dba7df75:~/code/vscode-server/PyTest/Allure2_L1/allure2_2# allure open -h 172.17.0.3 -p 20000 ./allure-report/</span><br></pre></td></tr></table></figure></div>

<h2 id="allure2-报告中添加常用用例"><a href="#allure2-报告中添加常用用例" class="headerlink" title="allure2 报告中添加常用用例"></a>allure2 报告中添加常用用例</h2><blockquote>
<p>allure用法</p>
</blockquote>
<table>
<thead>
<tr>
<th>方法名</th>
<th>方法参数</th>
<th>参数说明</th>
</tr>
</thead>
<tbody><tr>
<td>@allure.epic()</td>
<td>epic描述</td>
<td>敏捷里面的概念，定义史诗，往下是feature</td>
</tr>
<tr>
<td>@allure.feature()</td>
<td>模块名称</td>
<td>功能点的描述，往下是story</td>
</tr>
<tr>
<td>@allure.story</td>
<td>用户故事</td>
<td>用户故事，往下是title</td>
</tr>
<tr>
<td>@allure.title(用例的标题)</td>
<td>用例的标题</td>
<td>重命名html报告名称</td>
</tr>
<tr>
<td>@allure.step()</td>
<td>操作步骤</td>
<td>测试用例的步骤</td>
</tr>
<tr>
<td>@allure.testcase()</td>
<td>测试用例的连接地址</td>
<td>对应功能测试用例系统里面的case</td>
</tr>
<tr>
<td>@allure.issue()</td>
<td>缺陷</td>
<td>对应缺陷管理系统里面的链接</td>
</tr>
<tr>
<td>@allure.description</td>
<td>用例描述</td>
<td>测试用例的描述</td>
</tr>
<tr>
<td>@allure.severity()</td>
<td>用例等级</td>
<td>blocker,citical,normal,minor,trival</td>
</tr>
<tr>
<td>@allure.link()</td>
<td>链接</td>
<td>定义一个链接，在测试报告展现</td>
</tr>
<tr>
<td>@allure.attachment()</td>
<td>附件</td>
<td>报告添加附件</td>
</tr>
</tbody></table>
<ul>
<li>通过使用装饰器@allure.title可以为测试用例自定义一个可阅读性的标题</li>
<li>allure.title的三种使用方法</li>
</ul>
<ol>
<li>直接使用@allure.title为测试用例自定义标题</li>
</ol>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@allure.title(<span class="params"><span class="string">&#x27;自定义测试用例标题&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_with_title1</span>():</span><br><span class="line">    <span class="keyword">assert</span> <span class="literal">True</span></span><br></pre></td></tr></table></figure></div>

<ol start="2">
<li>@allure.title 支持通过占位符的方式传递参数，可以实现测试用例标题参数化，动态生成测试用例标题</li>
</ol>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@allure.title(<span class="params"><span class="string">&#x27;参数化用例标题:参数1：&#123;param1&#125;，参数2，&#123;parame2&#125;&#x27;</span></span>)</span></span><br><span class="line"><span class="meta">@pytest.mark.parametrize(<span class="params"><span class="string">&#x27;param1,parame2,expected&#x27;</span>,[[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">0.2</span>,<span class="number">0.31</span>,<span class="number">0.5</span>],(<span class="params"><span class="number">12</span>,<span class="number">32</span>,<span class="number">44</span></span>),(<span class="params"><span class="number">90</span>,<span class="number">22</span>,<span class="number">112</span></span>)]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_with_title2</span>(<span class="params">param1,parame2,expected</span>):</span><br><span class="line">    <span class="keyword">assert</span> param1 + parame2 == expected</span><br></pre></td></tr></table></figure></div>

<ol start="3">
<li>allure.dynamic.title 动态更新测试用例标题</li>
</ol>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@allure.title(<span class="params"><span class="string">&quot;动态更新前的标题&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_with_title3</span>():</span><br><span class="line">    <span class="keyword">assert</span> <span class="literal">True</span></span><br><span class="line">    allure.dynamic.title(<span class="string">&quot;动态更新后的标题&quot;</span>)</span><br></pre></td></tr></table></figure></div>

<h2 id="allure2-报告中添加用例步骤"><a href="#allure2-报告中添加用例步骤" class="headerlink" title="allure2 报告中添加用例步骤"></a>allure2 报告中添加用例步骤</h2><blockquote>
<p>Allure支持两种方法：</p>
</blockquote>
<ol>
<li>使用装饰器定义一个测试步骤，在测试用例中使用</li>
</ol>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@allure.step</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">simple_step1</span>(<span class="params">step_param1,step_param2 = <span class="literal">None</span></span>):</span><br><span class="line">    <span class="comment"># 定义一个测试步骤1</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;首先：链接数据库，准备测试数据&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;步骤1：打开页面，参数1：<span class="subst">&#123;step_param1&#125;</span>, 参数2：<span class="subst">&#123;step_param2&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">@allure.step</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">simple_step2</span>(<span class="params">step_param</span>):</span><br><span class="line">    <span class="comment"># 定义一个测试步骤2</span></span><br><span class="line">    <span class="keyword">assert</span> <span class="literal">False</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;步骤2：完成搜索：<span class="subst">&#123;step_param&#125;</span> 功能&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#@pytest.mark.parametrize(&#x27;param1&#x27;,[&#x27;pytest&#x27;,&#x27;allure&#x27;])</span></span><br><span class="line"><span class="meta">@pytest.mark.parametrize(<span class="params"><span class="string">&#x27;param1&#x27;</span>,[<span class="string">&#x27;pytest&#x27;</span>,<span class="string">&#x27;allure&#x27;</span>],ids=[<span class="string">&#x27;search pytest&#x27;</span>,<span class="string">&#x27;search allure&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_parameterize_with_id</span>(<span class="params">param1</span>):</span><br><span class="line">    simple_step2(param1)</span><br><span class="line"></span><br><span class="line"><span class="meta">@pytest.mark.parametrize(<span class="params"><span class="string">&#x27;param1&#x27;</span>,[<span class="literal">True</span>,<span class="literal">False</span>]</span>)</span></span><br><span class="line"><span class="meta">@pytest.mark.parametrize(<span class="params"><span class="string">&#x27;param2&#x27;</span>,[<span class="string">&#x27;Value 1&#x27;</span>,<span class="string">&#x27;Value 2&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_parameterize_with_two_params</span>(<span class="params">param1,param2</span>):</span><br><span class="line">    simple_step1(param1,param2)</span><br><span class="line"></span><br><span class="line"><span class="meta">@pytest.mark.parametrize(<span class="params"><span class="string">&#x27;param2&#x27;</span>,[<span class="string">&quot;Pytest&quot;</span>,<span class="string">&quot;unittest&quot;</span>]</span>)</span></span><br><span class="line"><span class="meta">@pytest.mark.parametrize(<span class="params"><span class="string">&#x27;param1,param3&#x27;</span>,[[<span class="number">1</span>,<span class="number">2</span>]]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_parameterize_with_uneven_value_sets</span>(<span class="params">param1,param2,param3</span>):</span><br><span class="line">    simple_step1(param1,param3)</span><br><span class="line">    simple_step2(param2)</span><br></pre></td></tr></table></figure></div>

<ol start="2">
<li>使用with allure.step() 添加测试步骤</li>
</ol>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@allure.title(<span class="params"><span class="string">&#x27;搜索用例:&#123;searchkey&#125;&#x27;</span></span>)</span></span><br><span class="line"><span class="meta">@pytest.mark.parametrize(<span class="params"><span class="string">&#x27;searchkey&#x27;</span>,[<span class="string">&#x27;pytest&#x27;</span>,<span class="string">&#x27;allure&#x27;</span>,<span class="string">&#x27;unittest&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_step_in_method</span>(<span class="params">searchkey</span>):</span><br><span class="line">    <span class="keyword">with</span> allure.step(<span class="string">&#x27;测试步骤1：打开页面&#x27;</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;操作 a&#x27;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;操作 b&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">with</span> allure.step(<span class="string">f&#x27;测试步骤2：搜索 <span class="subst">&#123;searchkey&#125;</span>&#x27;</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&#x27;搜索操作: <span class="subst">&#123;searchkey&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">with</span> allure.step(<span class="string">&#x27;测试步骤3：断言&#x27;</span>):</span><br><span class="line">        <span class="keyword">assert</span> <span class="literal">False</span></span><br></pre></td></tr></table></figure></div>

<h2 id="allure2-报告中添加用例链接"><a href="#allure2-报告中添加用例链接" class="headerlink" title="allure2 报告中添加用例链接"></a>allure2 报告中添加用例链接</h2><ol>
<li>@allure.link(url,name)添加一个普通的link链接</li>
</ol>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. 添加一个普通的 link 链接</span></span><br><span class="line"><span class="meta">@allure.link(<span class="params"><span class="string">&#x27;https://ceshiren.com/t/topic/15860&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_with_link</span>():</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 添加一个普通的 link 链接, 添加name别名</span></span><br><span class="line"><span class="meta">@allure.link(<span class="params"><span class="string">&#x27;https://ceshiren.com/t/topic/15860&#x27;</span>,name=<span class="string">&quot;这是一个链接&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_with_link_name</span>():</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure></div>

<ol start="2">
<li>@allure.testcase（url,name) 添加一个用例管理系统连接</li>
</ol>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 3. 添加用例管理系统链接</span></span><br><span class="line">TEST_CASE_LING = <span class="string">&quot;www.baidu.com&quot;</span></span><br><span class="line"><span class="meta">@allure.testcase(<span class="params">TEST_CASE_LING,<span class="string">&quot;用例管理系统&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_with_testcase_link</span>():</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure></div>

<ol start="3">
<li>@allure.issue(url,name) 添加bug管理系统连接</li>
</ol>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 4. 添加 bug管理系统链接</span></span><br><span class="line"><span class="comment"># pytest test_allure_link.py --alluredir=./results --allure-link-pattern=issue:https://ceshiren.com/t/topic/&#123;&#125;</span></span><br><span class="line"><span class="meta">@allure.issue(<span class="params"><span class="string">&quot;15860&quot;</span>,<span class="string">&#x27;bug管理系统&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_with_issue</span>():</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure></div>

<h2 id="allure2-报告中添加用例分类"><a href="#allure2-报告中添加用例分类" class="headerlink" title="allure2 报告中添加用例分类"></a>allure2 报告中添加用例分类</h2><ol>
<li>@allure.epic:敏捷里面的概念，定义史诗(相当于需求)，往下是feature</li>
</ol>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pytest test_allure_feature.py --alluredir=./results --allure-epics=demand1</span><br></pre></td></tr></table></figure></div>

<ol start="2">
<li>@allure.feature:功能点的描述，理解成模块，往下是story</li>
</ol>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pytest test_allure_feature.py --alluredir=./results --allure-features=demand1_function2</span><br></pre></td></tr></table></figure></div>

<ol start="3">
<li>@allure.story:故事story是feature的子集</li>
</ol>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pytest test_allure_feature.py --alluredir=./results --allure-stories=demand1_function2_sub_function3</span><br><span class="line">pytest test_allure_feature.py --alluredir=./results --allure-stories=demand1_function2_sub_function3,demand2_function1_sub_function3</span><br></pre></td></tr></table></figure></div>

<ol start="4">
<li>需求1+需求2-功能模块1-子功能模块3</li>
</ol>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pytest test_allure_feature.py --alluredir=./results --allure-epics=demand1 --allure-stories=demand2_function1_sub_function3</span><br></pre></td></tr></table></figure></div>

<h2 id="报告中添加用例描述"><a href="#报告中添加用例描述" class="headerlink" title="报告中添加用例描述"></a>报告中添加用例描述</h2><ol>
<li>使用装饰器 @allure.description()传递一个字符</li>
</ol>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@allure.description(<span class="params"><span class="string">&#x27;&#x27;&#x27;</span></span></span></span><br><span class="line"><span class="string"><span class="params"><span class="meta">通过@allure.description()传递</span></span></span></span><br><span class="line"><span class="string"><span class="params"><span class="meta">多行描述</span></span></span></span><br><span class="line"><span class="string"><span class="params"><span class="meta">第一行</span></span></span></span><br><span class="line"><span class="string"><span class="params"><span class="meta">第二行</span></span></span></span><br><span class="line"><span class="string"><span class="params"><span class="meta">&#x27;&#x27;&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_description_provide_string</span>():</span><br><span class="line">    <span class="keyword">assert</span> <span class="literal">True</span></span><br></pre></td></tr></table></figure></div>

<ol start="2">
<li>使用装饰器 @allure.description_html传递一段HTML文本来描述测试用例</li>
</ol>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@allure.description_html(<span class="params"><span class="string">&#x27;&#x27;&#x27;</span></span></span></span><br><span class="line"><span class="string"><span class="params"><span class="meta">&lt;div id=&quot;lg&quot; class=&quot;s-p-top&quot;&gt;&lt;img id=&quot;s_lg_img&quot; class=&quot;s_lg_img_gold_show&quot; src=&quot;//www.baidu.com/img/PCtm_d9c8750bed0b3c7d089fa7d55720d6cf.png&quot; width=&quot;270&quot; height=&quot;129&quot; onerror=&quot;this.src=&#x27;https://dss0.bdstatic.com/5aV1bjqh_Q23odCf/static/superman/img/logo/bd_logo1-66368c33f8.png&#x27;;this.onerror=null;&quot; usemap=&quot;#mp&quot; title=&quot;&quot; cursor=&quot;default&quot;&gt;&lt;img id=&quot;s_lg_img_new&quot; class=&quot;s_lg_img_gold_showre&quot; src=&quot;//www.baidu.com/img/PCtm_d9c8750bed0b3c7d089fa7d55720d6cf.png&quot; width=&quot;270&quot; height=&quot;129&quot; onerror=&quot;this.src=&#x27;https://dss0.bdstatic.com/5aV1bjqh_Q23odCf/static/superman/img/logo/bd_logo1-66368c33f8.png&#x27;;this.onerror=null;&quot; usemap=&quot;#mp&quot; title=&quot;&quot; cursor=&quot;default&quot;&gt;&lt;img hidefocus=&quot;true&quot; id=&quot;s_lg_img_aging&quot; class=&quot;index-logo-aging-tools&quot; src=&quot;//www.baidu.com/img/PCfb_5bf082d29588c07f842ccde3f97243ea.png&quot; width=&quot;270&quot; height=&quot;129&quot; onerror=&quot;this.src=&#x27;https://dss0.bdstatic.com/5aV1bjqh_Q23odCf/static/superman/img/logo/bd_logo1-66368c33f8.png&#x27;;this.onerror=null;&quot; usemap=&quot;#mp&quot; title=&quot;&quot; cursor=&quot;default&quot;&gt;&lt;map name=&quot;mp&quot; id=&quot;s_mp&quot;&gt;&lt;area style=&quot;cursor:pointer;outline:none;&quot; shape=&quot;rect&quot; coords=&quot;0,0,270,129&quot; href=&quot;//www.baidu.com/s?wd=%E7%99%BE%E5%BA%A6%E7%83%AD%E6%90%9C&amp;sa=ire_dl_gh_logo_texing&amp;rsv_dl=igh_logo_pc&quot; target=&quot;_blank&quot; title=&quot;点击一下，了解更多&quot; onmousedown=&quot;&quot;return&quot; ns_c(&#123;&#x27;fm&#x27;:&#x27;behs&#x27;,&#x27;tab&#x27;:&#x27;bdlogo&#x27;&#125;)&quot;=&quot;&quot;&gt;&lt;/map&gt;&lt;/div&gt;</span></span></span></span><br><span class="line"><span class="string"><span class="params"><span class="meta">&#x27;&#x27;&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_description_html</span>():</span><br><span class="line">    <span class="keyword">assert</span> <span class="literal">True</span></span><br></pre></td></tr></table></figure></div>

<ol start="3">
<li>直接在测试用例方法中通过编写文档注释的方法来添加描述</li>
</ol>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">test_description_dostring</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    直接写在测试用例方法中</span></span><br><span class="line"><span class="string">    通过编写文档注释的方法</span></span><br><span class="line"><span class="string">    来添加描述</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">assert</span> <span class="number">1</span>+<span class="number">1</span> == <span class="number">2</span></span><br></pre></td></tr></table></figure></div>

<ol start="4">
<li>用例代码内部动态添加描述信息</li>
</ol>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@allure.description(<span class="params"><span class="string">&#x27;这个描述将被替换&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_dynamic_description</span>():</span><br><span class="line">    <span class="keyword">assert</span> <span class="number">1</span>+<span class="number">1</span> == <span class="number">2</span></span><br><span class="line">    allure.dynamic.description(<span class="string">&#x27;替换后的文本信息&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">@allure.description(<span class="params"><span class="string">&#x27;这个描述将被替换&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_dynamic_description_html</span>():</span><br><span class="line">    <span class="keyword">assert</span> <span class="number">1</span>+<span class="number">1</span> == <span class="number">2</span></span><br><span class="line">    allure.dynamic.description_html(<span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    替换后的html信息</span></span><br><span class="line"><span class="string">    &lt;div id=&quot;lg&quot; class=&quot;s-p-top&quot;&gt;&lt;img id=&quot;s_lg_img&quot; class=&quot;s_lg_img_gold_show&quot; src=&quot;//www.baidu.com/img/PCtm_d9c8750bed0b3c7d089fa7d55720d6cf.png&quot; width=&quot;270&quot; height=&quot;129&quot; onerror=&quot;this.src=&#x27;https://dss0.bdstatic.com/5aV1bjqh_Q23odCf/static/superman/img/logo/bd_logo1-66368c33f8.png&#x27;;this.onerror=null;&quot; usemap=&quot;#mp&quot; title=&quot;&quot; cursor=&quot;default&quot;&gt;&lt;img id=&quot;s_lg_img_new&quot; class=&quot;s_lg_img_gold_showre&quot; src=&quot;//www.baidu.com/img/PCtm_d9c8750bed0b3c7d089fa7d55720d6cf.png&quot; width=&quot;270&quot; height=&quot;129&quot; onerror=&quot;this.src=&#x27;https://dss0.bdstatic.com/5aV1bjqh_Q23odCf/static/superman/img/logo/bd_logo1-66368c33f8.png&#x27;;this.onerror=null;&quot; usemap=&quot;#mp&quot; title=&quot;&quot; cursor=&quot;default&quot;&gt;&lt;img hidefocus=&quot;true&quot; id=&quot;s_lg_img_aging&quot; class=&quot;index-logo-aging-tools&quot; src=&quot;//www.baidu.com/img/PCfb_5bf082d29588c07f842ccde3f97243ea.png&quot; width=&quot;270&quot; height=&quot;129&quot; onerror=&quot;this.src=&#x27;https://dss0.bdstatic.com/5aV1bjqh_Q23odCf/static/superman/img/logo/bd_logo1-66368c33f8.png&#x27;;this.onerror=null;&quot; usemap=&quot;#mp&quot; title=&quot;&quot; cursor=&quot;default&quot;&gt;&lt;map name=&quot;mp&quot; id=&quot;s_mp&quot;&gt;&lt;area style=&quot;cursor:pointer;outline:none;&quot; shape=&quot;rect&quot; coords=&quot;0,0,270,129&quot; href=&quot;//www.baidu.com/s?wd=%E7%99%BE%E5%BA%A6%E7%83%AD%E6%90%9C&amp;sa=ire_dl_gh_logo_texing&amp;rsv_dl=igh_logo_pc&quot; target=&quot;_blank&quot; title=&quot;点击一下，了解更多&quot; onmousedown=&quot;&quot;return&quot; ns_c(&#123;&#x27;fm&#x27;:&#x27;behs&#x27;,&#x27;tab&#x27;:&#x27;bdlogo&#x27;&#125;)&quot;=&quot;&quot;&gt;&lt;/map&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span>)</span><br></pre></td></tr></table></figure></div>

<h2 id="allure2报告中添加用例优先级"><a href="#allure2报告中添加用例优先级" class="headerlink" title="allure2报告中添加用例优先级"></a>allure2报告中添加用例优先级</h2><ul>
<li>应用场景，用例执行时，希望按照严重级别执行测试用例</li>
<li>解决：为每个用例添加一个等级的装饰器 @allure.severity</li>
<li>类上添加的级别，对类中没有添加级别的方法生效</li>
<li>allure对严重级别定义分为5个</li>
</ul>
<ol>
<li>Blocker级别：中断缺陷（客户端程序无响应，无法执行下一步操作）</li>
<li>Critical级别：临界缺陷（功能点缺失）</li>
<li>Normal级别：普通缺陷（数值计算错误）</li>
<li>Minor级别：次要缺陷（界面错误与UI需求不符）</li>
<li>Trivial级别：轻微缺陷（必输项无提示，或提示不规范）</li>
</ol>
<ul>
<li>运行时添加命令行参数 –allure-serverities</li>
</ul>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> allure</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_with_no_severity_label</span>():</span><br><span class="line">    <span class="keyword">assert</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@allure.severity(<span class="params">allure.severity_level.TRIVIAL</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_with_trival_severity</span>():</span><br><span class="line">    <span class="keyword">assert</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@allure.severity(<span class="params">allure.severity_level.NORMAL</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_with_normal_severity</span>():</span><br><span class="line">    <span class="keyword">assert</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@allure.severity(<span class="params">allure.severity_level.NORMAL</span>)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TestClassWithNormalSeverity</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_inside_class_with_no_severity</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">assert</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @allure.severity(<span class="params">allure.severity_level.CRITICAL</span>)</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_inside_class_with_critical_severity</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">assert</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @allure.severity(<span class="params">allure.severity_level.MINOR</span>)</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_inside_class_with_minor_severity</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">assert</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @allure.severity(<span class="params">allure.severity_level.BLOCKER</span>)</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_inside_class_with_blocker_severity</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">assert</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">$: pytest test_allure_serverity.py --alluredir=./results --allure-severities=rmal</span><br><span class="line">$: allure serve ./results/ -h <span class="number">172.17</span><span class="number">.0</span><span class="number">.5</span> -p <span class="number">20000</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></div>

<h2 id="allure2报告中添加用例支持tag标签"><a href="#allure2报告中添加用例支持tag标签" class="headerlink" title="allure2报告中添加用例支持tag标签"></a>allure2报告中添加用例支持tag标签</h2><div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pytest</span><br><span class="line"><span class="keyword">import</span> allure</span><br><span class="line"></span><br><span class="line"><span class="comment"># 当用例通过时标记 xfail</span></span><br><span class="line"><span class="meta">@pytest.mark.xfail(<span class="params">condition=<span class="keyword">lambda</span> :<span class="literal">True</span>,reason=<span class="string">&#x27;这是一个预期失败的用例&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_xfail_expected_failure</span>():</span><br><span class="line">    <span class="keyword">assert</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 当用例通过时标记 xpass</span></span><br><span class="line"><span class="meta">@pytest.mark.xfail</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_xfail_unexpected_pass</span>():</span><br><span class="line">    <span class="keyword">assert</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 跳过用例</span></span><br><span class="line"><span class="meta">@pytest.mark.skipif(<span class="params"><span class="string">&#x27;2+2!=5&#x27;</span>,reason=<span class="string">&#x27;当条件触发时，这个用例被跳过 @pytest.mark.skipif&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_skip_by_triggered_condition</span>():</span><br><span class="line">    <span class="keyword">assert</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@pytest.fixture()</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">fun1</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;这是fixture fun1 的前置动作&#x27;</span>)</span><br><span class="line">    <span class="keyword">yield</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;这是fixture fun1 的后置动作&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">@pytest.fixture()</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="comment"># 前置动作 -- 相当于setup</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;这是一个fixture 前置方法&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 后置动作 -- 相当于teardown</span></span><br><span class="line">    <span class="comment"># 定义一个终结器，teardown动作放在终结器中</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">over</span>():</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;session 级别终结器&quot;</span>)</span><br><span class="line">  </span><br><span class="line">    <span class="comment"># 添加终结器，在执行完测试用例之后会执行终结器中的内容</span></span><br><span class="line">    request.addfinalizer(over)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TestClass</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_with_scopped_finalizers</span>(<span class="params">self,func,fun1</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;测试用例&#x27;</span>)</span><br></pre></td></tr></table></figure></div>

<h2 id="allure2-报告中支持记录失败重试功能"><a href="#allure2-报告中支持记录失败重试功能" class="headerlink" title="allure2 报告中支持记录失败重试功能"></a>allure2 报告中支持记录失败重试功能</h2><ul>
<li>重试功能可以使用pytest相关插件 pytest-rerunfailures</li>
</ul>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># pip install pytest-rerunfailures</span></span><br><span class="line"><span class="comment"># reruns = 2 失败重试次数</span></span><br><span class="line"><span class="comment"># reruns_delay=2 失败重试间隔</span></span><br><span class="line"><span class="meta">@pytest.mark.flaky(<span class="params">reruns=<span class="number">3</span>,reruns_delay=<span class="number">1.5</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_rerun2</span>():</span><br><span class="line">    <span class="keyword">assert</span> <span class="literal">False</span></span><br></pre></td></tr></table></figure></div>

<h1 id="Allure2-L3"><a href="#Allure2-L3" class="headerlink" title="Allure2_L3"></a>Allure2_L3</h1><h2 id="Allure2-报告中添加附件-图片"><a href="#Allure2-报告中添加附件-图片" class="headerlink" title="Allure2 报告中添加附件-图片"></a>Allure2 报告中添加附件-图片</h2><ol>
<li>allure.attach.file(source,name,attachment_type,extension)<ul>
<li>source：文件路径</li>
<li>name：附件名字</li>
<li>attachment_type：附件类型，是allure.attachment_type其中的一种</li>
<li>extension：附件的扩展名</li>
</ul>
</li>
</ol>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> allure</span><br><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TestWithAttach</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_pic</span>(<span class="params">self</span>):</span><br><span class="line">        logging.info(<span class="string">&#x27;添加一个图片&#x27;</span>)</span><br><span class="line"></span><br><span class="line">        allure.attach.file(<span class="string">&#x27;./img/pic1.png&#x27;</span>,</span><br><span class="line">                           name=<span class="string">&#x27;这是一个测试图片&#x27;</span>,</span><br><span class="line">                           attachment_type=allure.attachment_type.PNG,</span><br><span class="line">                           extension=<span class="string">&#x27;png&#x27;</span>)</span><br></pre></td></tr></table></figure></div>

<ol start="2">
<li>allure.attach(body,name&#x3D;None,attachment_type&#x3D;None,extension&#x3D;None)<ul>
<li>body：要写入附件的内容</li>
<li>name：附件名字</li>
<li>attachment_type：附件类型，是allure.attachment_type其中的一种</li>
<li>extension：附件的扩展名</li>
</ul>
</li>
</ol>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">test_pic1</span>(<span class="params">self</span>):</span><br><span class="line">    logging.info(<span class="string">&#x27;这是通过 allure.attach 添加的一个测试图片&#x27;</span>)</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;./img/pic1.png&#x27;</span>,mode=<span class="string">&#x27;rb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        <span class="comment"># 文本的内容</span></span><br><span class="line">        file = f.read()</span><br><span class="line">        <span class="comment"># 将文件内容添加到allure.attach()方法中</span></span><br><span class="line">        allure.attach(file,name=<span class="string">&#x27;页面截图&#x27;</span>,attachment_type=allure.attachment_type.PNG)</span><br></pre></td></tr></table></figure></div>

<h2 id="Allure2-报告中添加附件-日志"><a href="#Allure2-报告中添加附件-日志" class="headerlink" title="Allure2 报告中添加附件-日志"></a>Allure2 报告中添加附件-日志</h2><ul>
<li>配置工具类</li>
</ul>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建一个日志模块 log_util.py</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">sys.path.append(<span class="string">&#x27;./&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> logging.handlers <span class="keyword">import</span> RotatingFileHandler</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绑定句柄到logger对象</span></span><br><span class="line">logger = logging.getLogger(__name__)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取当前工具文件所在的路径</span></span><br><span class="line">root_path = os.path.dirname(os.path.abspath(__file__))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 拼接当前要输出的日志的路径</span></span><br><span class="line">log_dir_path = os.sep.join([root_path,<span class="string">f&#x27;/logs&#x27;</span>])</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> os.path.isdir(log_dir_path):</span><br><span class="line">    os.mkdir(log_dir_path)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建日志记录器，指明日志保存路径，每个日志的大小，保存的上限</span></span><br><span class="line">file_log_handler = RotatingFileHandler(os.sep.join([log_dir_path,<span class="string">&#x27;log.log&#x27;</span>]),maxBytes=<span class="number">1024</span>*<span class="number">1024</span>,backupCount=<span class="number">10</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置日志的格式</span></span><br><span class="line">data_string = <span class="string">&#x27;%Y-%m-%d %H:%M:%S&#x27;</span></span><br><span class="line">formatter = logging.Formatter(</span><br><span class="line">    <span class="string">&#x27;[%(asctime)s] [%(levelname)s] [%(filename)s]/[line: %(lineno)d]/[%(funcName)s] [%(message)s]&#x27;</span>,data_string</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 日志输出到控制台的句柄</span></span><br><span class="line">stream_handler = logging.StreamHandler()</span><br><span class="line"><span class="comment"># 将日志记录器指定日志的格式</span></span><br><span class="line">file_log_handler.setFormatter(formatter)</span><br><span class="line">stream_handler.setFormatter(formatter)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 为全局的日志工具对象添加日志记录器</span></span><br><span class="line"><span class="comment"># 绑定句柄到logger对象</span></span><br><span class="line">logger.addHandler(stream_handler)</span><br><span class="line">logger.addHandler(file_log_handler)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置日志输出级别</span></span><br><span class="line">logger.setLevel(level=logging.INFO)</span><br></pre></td></tr></table></figure></div>

<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">sys.path.append(<span class="string">&#x27;../../tools&#x27;</span>)</span><br><span class="line"><span class="keyword">from</span> logTools.log_util <span class="keyword">import</span> logger</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> allure</span><br><span class="line"></span><br><span class="line"><span class="meta">@allure.epic(<span class="params"><span class="string">&#x27;需求1&#x27;</span></span>)</span></span><br><span class="line"><span class="meta">@allure.feature(<span class="params"><span class="string">&#x27;功能模块1&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TestEpic</span>:</span><br><span class="line"><span class="meta">    @allure.story(<span class="params"><span class="string">&#x27;子功能模块1&#x27;</span></span>)</span></span><br><span class="line"><span class="meta">    @allure.title(<span class="params"><span class="string">&#x27;用例1&#x27;</span></span>)</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_case1</span>(<span class="params">self</span>):</span><br><span class="line">        logger.info(<span class="string">&#x27;这是TestEpic 第1条用例&#x27;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;用例1&#x27;</span>)</span><br></pre></td></tr></table></figure></div>

<ul>
<li>禁用日志<br>–allure-no-capture</li>
</ul>
<h2 id="Allure2-报告中添加附件-html"><a href="#Allure2-报告中添加附件-html" class="headerlink" title="Allure2 报告中添加附件-html"></a>Allure2 报告中添加附件-html</h2><ul>
<li>语法：allure.attach(body,name&#x3D;None,attachment_type&#x3D;None,extension&#x3D;None)<ul>
<li>body：要写入附件的内容</li>
<li>name：附件名字</li>
<li>attachment_type：附件类型，是allure.attachment_type其中的一种</li>
<li>extension：附件的扩展名</li>
</ul>
</li>
</ul>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> allure</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">sys.path.append(<span class="string">&#x27;../../tools&#x27;</span>)</span><br><span class="line"><span class="keyword">from</span> logTools.log_util <span class="keyword">import</span> logger</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TestAllureHtml</span>:</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_html_part</span>(<span class="params">self</span>):</span><br><span class="line">        logger.info(<span class="string">&#x27;这是添加一个html 部分代码的测试用例&#x27;</span>)</span><br><span class="line">        allure.attach(<span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">        &lt;div class=&quot;boiling-title_ZrdUH&quot;&gt;&lt;img src=&quot;https://ss1.baidu.com/6ONXsjip0QIZ8tyhnq/it/u=423474926,1801248814&amp;fm=179&amp;app=35&amp;f=PNG?w=518&amp;h=136&amp;s=ADFEEB16D210A1925C7BF2EA0300E03E&quot;&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="string">        &#x27;&#x27;&#x27;</span>,name=<span class="string">&#x27;allure.attach(name=html片段)&#x27;</span>,attachment_type=allure.attachment_type.HTML,extension=<span class="string">&#x27;extension:html&#x27;</span>)</span><br></pre></td></tr></table></figure></div>

<h1 id="Allure2-L4"><a href="#Allure2-L4" class="headerlink" title="Allure2_L4"></a>Allure2_L4</h1><h2 id="allure2报告定制"><a href="#allure2报告定制" class="headerlink" title="allure2报告定制"></a>allure2报告定制</h2><ul>
<li>定制页面logo</li>
</ul>
<ol>
<li>获取安装路径</li>
</ol>
<div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">root@3832dba7df75:~/code/vscode-server# ll /root/downloads/allure</span><br><span class="line">total 24</span><br><span class="line">drwxr-xr-x  6 root root 4096 Feb  7 11:41 ./</span><br><span class="line">drwxr-xr-x  3 root root 4096 Mar 11 10:55 ../</span><br><span class="line">drwxr-xr-x  2 root root 4096 Feb  7 11:41 bin/</span><br><span class="line">drwxr-xr-x  2 root root 4096 Feb  7 11:41 config/</span><br><span class="line">drwxr-xr-x  3 root root 4096 Mar 11 09:25 lib/</span><br><span class="line">drwxr-xr-x 12 root root 4096 Mar 11 09:25 plugins/</span><br><span class="line">root@3832dba7df75:~/code/vscode-server# </span><br></pre></td></tr></table></figure></div>

<ol start="2">
<li>修改config下的allure.yml文件</li>
</ol>
<div class="code-container" data-rel="Py"><figure class="iseeu highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">plugins:</span><br><span class="line">  - junit-xml-plugin</span><br><span class="line">  - xunit-xml-plugin</span><br><span class="line">  - trx-plugin</span><br><span class="line">  - behaviors-plugin</span><br><span class="line">  - packages-plugin</span><br><span class="line">  - screen-diff-plugin</span><br><span class="line">  - xctest-plugin</span><br><span class="line">  - jira-plugin</span><br><span class="line">  - xray-plugin</span><br><span class="line">  - custom-logo-plugin</span><br></pre></td></tr></table></figure></div>

<ol start="3">
<li>allure.yml修改后，在plugins下custom-logo-plugin内的static文件夹下修改style.css文件中的url，替换需要的文件</li>
</ol>
<div class="code-container" data-rel="Yml"><figure class="iseeu highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">.side-nav__brand</span> &#123;</span><br><span class="line">  <span class="attr">background:</span> <span class="string">url(&#x27;custom-logo.svg&#x27;)</span> <span class="literal">no</span><span class="string">-repeat</span> <span class="string">left</span> <span class="string">center</span> <span class="type">!important;</span></span><br><span class="line">  <span class="attr">margin-left:</span> <span class="string">10px;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<ul>
<li>修改标题内容</li>
</ul>
<ol>
<li>修改style.css文件</li>
</ol>
<div class="code-container" data-rel="Css"><figure class="iseeu highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 去掉logo后面的Allure文本 */</span></span><br><span class="line"><span class="selector-class">.side-nav__brand-text</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 设置logo后面的字体大小与样式 */</span></span><br><span class="line"><span class="selector-class">.side-nav__brand</span><span class="selector-pseudo">::after</span>&#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&quot;测试俱乐部&quot;</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">18px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">font-family</span>: Arial, Helvetica, sans-serif;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">13px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

		</div>

		
		<div class="post-copyright-info w-full my-8 px-2 sm:px-6 md:px-8">
			<div class="article-copyright-info-container">
    <ul>
        <li><strong>标题:</strong> PyTestAllure</li>
        <li><strong>作者:</strong> Sunmy</li>
        <li><strong>创建于
                :</strong> 2023-09-12 14:31:27</li>
        
            <li>
                <strong>更新于
                    :</strong> 2025-06-29 21:05:24
            </li>
        
        <li>
            <strong>链接:</strong> https://ldspdvsun.github.io/cmchul3id003k5mgb6nglauso/
        </li>
        <li>
            <strong>
                版权声明:
            </strong>
            

            
                版权所有 &#169 Sunmy，禁止转载。
            
        </li>
    </ul>
</div>

		</div>
		

		
		<ul class="post-tags-box text-lg mt-1.5 flex-wrap justify-center flex md:hidden">
			
			<li class="tag-item mx-0.5">
				<a href="/tags/Pytest/">#Pytest</a>&nbsp;
			</li>
			
			<li class="tag-item mx-0.5">
				<a href="/tags/Allure/">#Allure</a>&nbsp;
			</li>
			
		</ul>
		

		
  <div class="recommended-article px-2 sm:px-6 md:px-8">
   <div class="recommended-desktop">
    <div class="recommended-article-header text-xl md:text-3xl font-bold mt-10">
     <i aria-hidden="true"></i><span>推荐阅读</span>
    </div>
    <div class="recommended-article-group"><a class="recommended-article-item" href="/cmchul3hx000x5mgb30a35ma1/" title="VSCode问题记录" rel="bookmark">
  <img src="https://i.postimg.cc/52qB9kNm/10.png" alt="VSCode问题记录" class="!max-w-none">
  <span class="title">VSCode问题记录</span>
</a><a class="recommended-article-item" href="/cmchul3ic003f5mgb8d6phx81/" title="Pyparsing" rel="bookmark">
  <img src="https://i.postimg.cc/52qB9kNm/10.png" alt="Pyparsing" class="!max-w-none">
  <span class="title">Pyparsing</span>
</a><a class="recommended-article-item" href="/cmchul3hy00105mgb5w4p3scz/" title="CodeServer" rel="bookmark">
  <img src="https://i.postimg.cc/52qB9kNm/10.png" alt="CodeServer" class="!max-w-none">
  <span class="title">CodeServer</span>
</a></div>
   </div>
   <div class="recommended-mobile">
   <div class="recommended-article-header text-xl md:text-3xl font-bold mt-10">
     <i aria-hidden="true"></i><span>推荐阅读</span>
   </div>
   <div class="recommended-article-group"><a class="recommended-article-item" href="/cmchul3hx000x5mgb30a35ma1/" title="VSCode问题记录" rel="bookmark">
  <img src="https://i.postimg.cc/52qB9kNm/10.png" alt="VSCode问题记录" class="!max-w-none">
  <span class="title">VSCode问题记录</span>
</a><a class="recommended-article-item" href="/cmchul3ic003f5mgb8d6phx81/" title="Pyparsing" rel="bookmark">
  <img src="https://i.postimg.cc/52qB9kNm/10.png" alt="Pyparsing" class="!max-w-none">
  <span class="title">Pyparsing</span>
</a></div>
   </div>
  </div>

		
		<div class="article-nav my-8 flex justify-between items-center px-2 sm:px-6 md:px-8">
			
			<div class="article-prev border-border-color shadow-redefine-flat shadow-shadow-color-2 rounded-medium px-4 py-2 hover:shadow-redefine-flat-hover hover:shadow-shadow-color-2">
				<a class="prev" rel="prev" href="/cmchul3hs00095mgb3rb56k48/">
					<span class="left arrow-icon flex justify-center items-center">
						<i class="fa-solid fa-chevron-left"></i>
					</span>
					<span class="title flex justify-center items-center">
						<span class="post-nav-title-item">Qemu模拟ARM</span>
						<span class="post-nav-item">上一篇</span>
					</span>
				</a>
			</div>
			
			
			<div class="article-next border-border-color shadow-redefine-flat shadow-shadow-color-2 rounded-medium px-4 py-2 hover:shadow-redefine-flat-hover hover:shadow-shadow-color-2">
				<a class="next" rel="next" href="/cmchul3ip005d5mgb99urbysg/">
					<span class="title flex justify-center items-center">
						<span class="post-nav-title-item">操作系统学习笔记</span>
						<span class="post-nav-item">下一篇</span>
					</span>
					<span class="right arrow-icon flex justify-center items-center">
						<i class="fa-solid fa-chevron-right"></i>
					</span>
				</a>
			</div>
			
		</div>
		


		
		<div class="comment-container px-2 sm:px-6 md:px-8 pb-8">
			<div class="comments-container mt-10 w-full ">
    <div id="comment-anchor" class="w-full h-2.5"></div>
    <div class="comment-area-title w-full my-1.5 md:my-2.5 text-xl md:text-3xl font-bold">
        评论
    </div>
    

        
            
    <div class="twikoo-container">
        <script data-swup-reload-script
                src='https://cdnjs.cloudflare.com/ajax/libs/twikoo/1.6.36/twikoo.all.min.js'
        ></script>
        <div id="twikoo-comment"></div>
        <script data-swup-reload-script>
            function loadTwikoo() {
                twikoo.init({
                    el: '#twikoo-comment',
                    envId: 'https://twikoo-henna-six.vercel.app/',
                });
            }

            if ('true') {
                const loadTwikooTimeout = setTimeout(() => {
                    loadTwikoo();
                    clearTimeout(loadTwikooTimeout);
                }, 1000);
            } else {
                window.addEventListener('DOMContentLoaded', loadTwikoo);
            }
        </script>
    </div>


        
        
    
</div>

		</div>
		
	</div>

	
	<div class="toc-content-container">
		<div class="post-toc-wrap">
	<div class="post-toc">
		<div class="toc-title">目录</div>
		<div class="page-title">PyTestAllure</div>
		<ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Pytest-L1"><span class="nav-text">Pytest_L1</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Pytest-%E5%AE%89%E8%A3%85"><span class="nav-text">Pytest 安装</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Pytest-%E5%91%BD%E5%90%8D%E8%A7%84%E5%88%99"><span class="nav-text">Pytest 命名规则</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#PyTest-%E6%B5%8B%E8%AF%95%E7%94%A8%E4%BE%8B%E7%BB%93%E6%9E%84"><span class="nav-text">PyTest 测试用例结构</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#PyTest%E6%B5%8B%E8%AF%95%E7%94%A8%E4%BE%8B%E6%96%AD%E8%A8%80"><span class="nav-text">PyTest测试用例断言</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Pytest-%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%BB%93%E6%9E%84"><span class="nav-text">Pytest 测试框架结构</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AE%A1%E7%AE%97%E5%99%A8%E5%AE%9E%E6%88%98"><span class="nav-text">计算器实战</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Pytest-L2"><span class="nav-text">Pytest_L2</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Pytest%E5%8F%82%E6%95%B0%E5%8C%96%E7%94%A8%E4%BE%8B"><span class="nav-text">Pytest参数化用例</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%82%E6%95%B0%E5%8C%96%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="nav-text">参数化应用场景</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Pytest%E5%8F%82%E6%95%B0%E5%8C%96%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%B3%95"><span class="nav-text">Pytest参数化实现方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Mark-%E5%8F%82%E6%95%B0%E5%8C%96%E6%B5%8B%E8%AF%95%E5%87%BD%E6%95%B0%E4%BD%BF%E7%94%A8"><span class="nav-text">Mark:参数化测试函数使用</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8D%95%E5%8F%82%E6%95%B0%EF%BC%8C%E5%8F%AF%E4%BB%A5%E5%B0%86%E6%95%B0%E6%8D%AE%E6%94%BE%E5%9C%A8%E5%88%97%E8%A1%A8%E4%B8%AD"><span class="nav-text">单参数，可以将数据放在列表中</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A4%9A%E5%8F%82%E6%95%B0%EF%BC%8C%E5%B0%86%E6%95%B0%E6%8D%AE%E6%94%BE%E5%9C%A8%E5%88%97%E8%A1%A8%E5%B5%8C%E5%A5%97%E5%85%83%E7%BB%84%E4%B8%AD%E6%88%96%E5%88%97%E8%A1%A8%E5%B5%8C%E5%A5%97%E5%88%97%E8%A1%A8%E4%B8%AD"><span class="nav-text">多参数，将数据放在列表嵌套元组中或列表嵌套列表中</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%94%A8%E4%BE%8B%E9%87%8D%E5%91%BD%E5%90%8D"><span class="nav-text">用例重命名</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%94%A8%E4%BE%8B%E9%87%8D%E5%91%BD%E5%90%8D-%E6%B7%BB%E5%8A%A0ids%E5%8F%82%E6%95%B0"><span class="nav-text">用例重命名-添加ids参数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%94%A8%E4%BE%8B%E9%87%8D%E5%91%BD%E5%90%8D-%E6%B7%BB%E5%8A%A0ids%E5%8F%82%E6%95%B0%EF%BC%88%E4%B8%AD%E6%96%87%E6%83%85%E5%86%B5%EF%BC%89"><span class="nav-text">用例重命名-添加ids参数（中文情况）</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%AC%9B%E5%8D%A1%E5%84%BF%E7%A7%AF"><span class="nav-text">笛卡儿积</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A0%87%E8%AE%B0%E6%B5%8B%E8%AF%95%E7%94%A8%E4%BE%8B"><span class="nav-text">标记测试用例</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AE%E8%B7%B3%E8%BF%87%E3%80%81%E9%A2%84%E6%9C%9F%E5%A4%B1%E8%B4%A5%E7%94%A8%E4%BE%8B"><span class="nav-text">设置跳过、预期失败用例</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AE%E8%B7%B3%E8%BF%87"><span class="nav-text">设置跳过</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A2%84%E6%9C%9F%E5%A4%B1%E8%B4%A5%E7%94%A8%E4%BE%8B"><span class="nav-text">预期失败用例</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BF%90%E8%A1%8C%E7%94%A8%E4%BE%8B"><span class="nav-text">运行用例</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B5%8B%E8%AF%95%E7%94%A8%E4%BE%8B%E8%B0%83%E5%BA%A6%E4%B8%8E%E6%89%A7%E8%A1%8C"><span class="nav-text">测试用例调度与执行</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#pytest-%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B8%B8%E7%94%A8%E5%8F%82%E6%95%B0"><span class="nav-text">pytest 命令行常用参数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%89%A7%E8%A1%8CPytest"><span class="nav-text">执行Pytest</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#pytest%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="nav-text">pytest异常处理</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Pytest-L3"><span class="nav-text">Pytest_L3</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Pytest%E7%BB%93%E5%90%88%E6%95%B0%E6%8D%AE%E9%A9%B1%E5%8A%A8-yaml"><span class="nav-text">Pytest结合数据驱动-yaml</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#yaml%E6%96%87%E4%BB%B6%E4%BB%8B%E7%BB%8D"><span class="nav-text">yaml文件介绍</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Pytest-%E7%BB%93%E5%90%88%E6%95%B0%E6%8D%AE%E9%A9%B1%E5%8A%A8-excel"><span class="nav-text">Pytest 结合数据驱动-excel</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Pytest-%E7%BB%93%E5%90%88%E6%95%B0%E6%8D%AE%E9%A9%B1%E5%8A%A8-csv"><span class="nav-text">Pytest 结合数据驱动-csv</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Pytest-%E7%BB%93%E5%90%88%E6%95%B0%E6%8D%AE%E9%A9%B1%E5%8A%A8-json"><span class="nav-text">Pytest 结合数据驱动-json</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Pytest-%E6%B5%8B%E8%AF%95%E7%94%A8%E4%BE%8B%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E7%AE%A1%E7%90%86-Fixture%E7%94%A8%E6%B3%95"><span class="nav-text">Pytest 测试用例生命周期管理-Fixture用法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Fixture%E5%9C%A8%E8%87%AA%E5%8A%A8%E5%8C%96%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8-%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="nav-text">Fixture在自动化中的应用-作用域</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Fixture%E5%9C%A8%E8%87%AA%E5%8A%A8%E5%8C%96%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8-yield%E5%85%B3%E9%94%AE%E5%AD%97"><span class="nav-text">Fixture在自动化中的应用-yield关键字</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Pytest%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E7%AE%A1%E7%90%86-%E8%87%AA%E5%8A%A8%E6%B3%A8%E5%86%8C"><span class="nav-text">Pytest生命周期管理-自动注册</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Pytest%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E7%AE%A1%E7%90%86-%E8%87%AA%E5%8A%A8%E7%94%9F%E6%95%88"><span class="nav-text">Pytest生命周期管理-自动生效</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Pytest-fixture-%E5%AE%9E%E7%8E%B0%E5%8F%82%E6%95%B0%E5%8C%96"><span class="nav-text">Pytest fixture 实现参数化</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Pytest-L4"><span class="nav-text">Pytest_L4</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Pytest-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6-pytest-ini"><span class="nav-text">Pytest 配置文件-pytest.ini</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Pytest%E6%8F%92%E4%BB%B6"><span class="nav-text">Pytest插件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Pytest-%E5%B8%B8%E7%94%A8%E6%8F%92%E4%BB%B6"><span class="nav-text">Pytest 常用插件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Pytest%E5%B9%B6%E8%A1%8C%E4%B8%8E%E5%88%86%E5%B8%83%E5%BC%8F%E6%89%A7%E8%A1%8C"><span class="nav-text">Pytest并行与分布式执行</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Pytest%E5%86%85%E7%BD%AE%E6%8F%92%E4%BB%B6-hook-%E4%BD%93%E7%B3%BB"><span class="nav-text">Pytest内置插件 hook 体系</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Pytest%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91"><span class="nav-text">Pytest插件开发</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Allure2-L1"><span class="nav-text">Allure2_L1</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Allure2%E5%AE%89%E8%A3%85"><span class="nav-text">Allure2安装</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BF%90%E8%A1%8C%E6%96%B9%E5%BC%8F"><span class="nav-text">运行方式</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Allure2-L2"><span class="nav-text">Allure2_L2</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#allure2-%E6%8A%A5%E5%91%8A%E7%94%9F%E6%88%90"><span class="nav-text">allure2 报告生成</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B8%85%E7%90%86%E4%B8%8A%E6%AC%A1%E7%BB%93%E6%9E%9C-%E2%80%93clean-alluredir"><span class="nav-text">清理上次结果 –clean-alluredir</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#allure-generate-%E7%94%9F%E6%88%90%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E6%8A%A5%E5%91%8A"><span class="nav-text">allure generate 生成静态资源报告</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#allure-generate-%E7%94%9F%E6%88%90%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E6%8A%A5%E5%91%8A-%E6%8C%87%E5%AE%9A%E8%BE%93%E5%87%BA%E6%8A%A5%E5%91%8A%E8%B7%AF%E5%BE%84"><span class="nav-text">allure generate 生成静态资源报告,指定输出报告路径</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#allure-open%E6%89%93%E5%BC%80%E6%8A%A5%E5%91%8A%EF%BC%8C%E6%8C%87%E5%AE%9AIP%EF%BC%8Cport"><span class="nav-text">allure open打开报告，指定IP，port</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#allure2-%E6%8A%A5%E5%91%8A%E4%B8%AD%E6%B7%BB%E5%8A%A0%E5%B8%B8%E7%94%A8%E7%94%A8%E4%BE%8B"><span class="nav-text">allure2 报告中添加常用用例</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#allure2-%E6%8A%A5%E5%91%8A%E4%B8%AD%E6%B7%BB%E5%8A%A0%E7%94%A8%E4%BE%8B%E6%AD%A5%E9%AA%A4"><span class="nav-text">allure2 报告中添加用例步骤</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#allure2-%E6%8A%A5%E5%91%8A%E4%B8%AD%E6%B7%BB%E5%8A%A0%E7%94%A8%E4%BE%8B%E9%93%BE%E6%8E%A5"><span class="nav-text">allure2 报告中添加用例链接</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#allure2-%E6%8A%A5%E5%91%8A%E4%B8%AD%E6%B7%BB%E5%8A%A0%E7%94%A8%E4%BE%8B%E5%88%86%E7%B1%BB"><span class="nav-text">allure2 报告中添加用例分类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8A%A5%E5%91%8A%E4%B8%AD%E6%B7%BB%E5%8A%A0%E7%94%A8%E4%BE%8B%E6%8F%8F%E8%BF%B0"><span class="nav-text">报告中添加用例描述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#allure2%E6%8A%A5%E5%91%8A%E4%B8%AD%E6%B7%BB%E5%8A%A0%E7%94%A8%E4%BE%8B%E4%BC%98%E5%85%88%E7%BA%A7"><span class="nav-text">allure2报告中添加用例优先级</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#allure2%E6%8A%A5%E5%91%8A%E4%B8%AD%E6%B7%BB%E5%8A%A0%E7%94%A8%E4%BE%8B%E6%94%AF%E6%8C%81tag%E6%A0%87%E7%AD%BE"><span class="nav-text">allure2报告中添加用例支持tag标签</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#allure2-%E6%8A%A5%E5%91%8A%E4%B8%AD%E6%94%AF%E6%8C%81%E8%AE%B0%E5%BD%95%E5%A4%B1%E8%B4%A5%E9%87%8D%E8%AF%95%E5%8A%9F%E8%83%BD"><span class="nav-text">allure2 报告中支持记录失败重试功能</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Allure2-L3"><span class="nav-text">Allure2_L3</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Allure2-%E6%8A%A5%E5%91%8A%E4%B8%AD%E6%B7%BB%E5%8A%A0%E9%99%84%E4%BB%B6-%E5%9B%BE%E7%89%87"><span class="nav-text">Allure2 报告中添加附件-图片</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Allure2-%E6%8A%A5%E5%91%8A%E4%B8%AD%E6%B7%BB%E5%8A%A0%E9%99%84%E4%BB%B6-%E6%97%A5%E5%BF%97"><span class="nav-text">Allure2 报告中添加附件-日志</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Allure2-%E6%8A%A5%E5%91%8A%E4%B8%AD%E6%B7%BB%E5%8A%A0%E9%99%84%E4%BB%B6-html"><span class="nav-text">Allure2 报告中添加附件-html</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Allure2-L4"><span class="nav-text">Allure2_L4</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#allure2%E6%8A%A5%E5%91%8A%E5%AE%9A%E5%88%B6"><span class="nav-text">allure2报告定制</span></a></li></ol></li></ol>

	</div>
</div>
	</div>
	
</div>
			</div>

			
		</div>

		<div class="main-content-footer">
			<footer class="footer mt-5 py-5 h-auto text-base text-third-text-color relative border-t-2 border-t-border-color">
    <div class="info-container py-3 text-center">
        
        <div class="text-center">
            &copy;
            
              <span>2023</span>
              -
            
            2025&nbsp;&nbsp;<i class="fa-solid fa-heart fa-beat" style="--fa-animation-duration: 0.5s; color: #f54545"></i>&nbsp;&nbsp;<a href="/">Sunmy</a>
            
                
                <p class="post-count space-x-0.5">
                    <span>
                        共撰写了 70 篇文章
                    </span>
                    
                        <span>
                            共 216.7k 字
                        </span>
                    
                </p>
            
        </div>
        
            <script data-swup-reload-script src="https://cn.vercount.one/js"></script>
            <div class="relative text-center lg:absolute lg:right-[20px] lg:top-1/2 lg:-translate-y-1/2 lg:text-right">
                
                    <span id="busuanzi_container_site_uv" class="lg:!block">
                        <span class="text-sm">访问人数</span>
                        <span id="busuanzi_value_site_uv"></span>
                    </span>
                
                
                    <span id="busuanzi_container_site_pv" class="lg:!block">
                        <span class="text-sm">总访问量</span>
                        <span id="busuanzi_value_site_pv"></span>
                    </span>
                
            </div>
        
        <div class="relative text-center lg:absolute lg:left-[20px] lg:top-1/2 lg:-translate-y-1/2 lg:text-left">
            <span class="lg:block text-sm">由 <?xml version="1.0" encoding="utf-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg class="relative top-[2px] inline-block align-baseline" version="1.1" id="圖層_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1rem" height="1rem" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve"><path fill="#0E83CD" d="M256.4,25.8l-200,115.5L56,371.5l199.6,114.7l200-115.5l0.4-230.2L256.4,25.8z M349,354.6l-18.4,10.7l-18.6-11V275H200v79.6l-18.4,10.7l-18.6-11v-197l18.5-10.6l18.5,10.8V237h112v-79.6l18.5-10.6l18.5,10.8V354.6z"/></svg><a target="_blank" class="text-base" href="https://hexo.io">Hexo</a> 驱动</span>
            <span class="text-sm lg:block">主题&nbsp;<a class="text-base" target="_blank" href="https://github.com/EvanNotFound/hexo-theme-redefine">Redefine v2.8.2</a></span>
        </div>
        
        
            <div>
                博客已运行 <span class="odometer" id="runtime_days" ></span> 天 <span class="odometer" id="runtime_hours"></span> 小时 <span class="odometer" id="runtime_minutes"></span> 分钟 <span class="odometer" id="runtime_seconds"></span> 秒
            </div>
        
        
            <script data-swup-reload-script>
                try {
                    function odometer_init() {
                    const elements = document.querySelectorAll('.odometer');
                    elements.forEach(el => {
                        new Odometer({
                            el,
                            format: '( ddd).dd',
                            duration: 200
                        });
                    });
                    }
                    odometer_init();
                } catch (error) {}
            </script>
        
        
        
    </div>  
</footer>
		</div>
	</div>

	
	<div class="post-tools">
		<div class="post-tools-container">
	<ul class="article-tools-list">
		<!-- TOC aside toggle -->
		
		<li class="right-bottom-tools page-aside-toggle">
			<i class="fa-regular fa-outdent"></i>
		</li>
		

		<!-- go comment -->
		
		<li class="go-comment">
			<i class="fa-regular fa-comments"></i>
		</li>
		
	</ul>
</div>
	</div>
	

	<div class="right-side-tools-container">
		<div class="side-tools-container">
	<ul class="hidden-tools-list">
		<li class="right-bottom-tools tool-font-adjust-plus flex justify-center items-center">
			<i class="fa-regular fa-magnifying-glass-plus"></i>
		</li>

		<li class="right-bottom-tools tool-font-adjust-minus flex justify-center items-center">
			<i class="fa-regular fa-magnifying-glass-minus"></i>
		</li>

		<li class="right-bottom-tools tool-dark-light-toggle flex justify-center items-center">
			<i class="fa-regular fa-moon"></i>
		</li>

		<!-- rss -->
		

		

		<li class="right-bottom-tools tool-scroll-to-bottom flex justify-center items-center">
			<i class="fa-regular fa-arrow-down"></i>
		</li>
	</ul>

	<ul class="visible-tools-list">
		<li class="right-bottom-tools toggle-tools-list flex justify-center items-center">
			<i class="fa-regular fa-cog fa-spin"></i>
		</li>
		
		<li class="right-bottom-tools tool-scroll-to-top flex justify-center items-center">
			<i class="arrow-up fas fa-arrow-up"></i>
			<span class="percent"></span>
		</li>
		
		
	</ul>
</div>
	</div>

	<div class="image-viewer-container">
	<img src="">
</div>

	
	<div class="search-pop-overlay">
	<div class="popup search-popup">
		<div class="search-header">
			<span class="search-input-field-pre">
				<i class="fa-solid fa-keyboard"></i>
			</span>
			<div class="search-input-container">
				<input autocomplete="off" autocorrect="off" autocapitalize="off" placeholder="站内搜索您需要的内容..." spellcheck="false" type="search" class="search-input">
			</div>
			<span class="popup-btn-close">
				<i class="fa-solid fa-times"></i>
			</span>
		</div>
		<div id="search-result">
			<div id="no-result">
				<i class="fa-solid fa-spinner fa-spin-pulse fa-5x fa-fw"></i>
			</div>
		</div>
	</div>
</div>
	

</main>



<script src="/js/build/libs/Swup.min.js"></script>

<script src="/js/build/libs/SwupSlideTheme.min.js"></script>

<script src="/js/build/libs/SwupScriptsPlugin.min.js"></script>

<script src="/js/build/libs/SwupProgressPlugin.min.js"></script>

<script src="/js/build/libs/SwupScrollPlugin.min.js"></script>

<script src="/js/build/libs/SwupPreloadPlugin.min.js"></script>

<script>
    const swup = new Swup({
        plugins: [
            new SwupScriptsPlugin({
                optin: true,
            }),
            new SwupProgressPlugin(),
            new SwupScrollPlugin({
                offset: 80,
            }),
            new SwupSlideTheme({
                mainElement: ".main-content-body",
            }),
            new SwupPreloadPlugin(),
        ],
        containers: ["#swup"],
    });
</script>




	
<script src="/js/build/tools/imageViewer.js" type="module"></script>

<script src="/js/build/utils.js" type="module"></script>

<script src="/js/build/main.js" type="module"></script>

<script src="/js/build/layouts/navbarShrink.js" type="module"></script>

<script src="/js/build/tools/scrollTopBottom.js" type="module"></script>

<script src="/js/build/tools/lightDarkSwitch.js" type="module"></script>

<script src="/js/build/layouts/categoryList.js" type="module"></script>



    
<script src="/js/build/tools/localSearch.js" type="module"></script>




    
<script src="/js/build/tools/codeBlock.js" type="module"></script>




    
<script src="/js/build/layouts/lazyload.js" type="module"></script>




    
<script src="/js/build/tools/runtime.js"></script>

    
<script src="/js/build/libs/odometer.min.js"></script>

    
<link rel="stylesheet" href="/assets/odometer-theme-minimal.css">




  
<script src="/js/build/libs/Typed.min.js"></script>

  
<script src="/js/build/plugins/typed.js" type="module"></script>











    
<script src="/js/build/tools/tocToggle.js" type="module" data-swup-reload-script=""></script>

<script src="/js/build/layouts/toc.js" type="module" data-swup-reload-script=""></script>

<script src="/js/build/plugins/tabs.js" type="module" data-swup-reload-script=""></script>




<script src="/js/build/libs/moment-with-locales.min.js" data-swup-reload-script=""></script>


<script src="/js/build/layouts/essays.js" type="module" data-swup-reload-script=""></script>





	
</body>

</html>