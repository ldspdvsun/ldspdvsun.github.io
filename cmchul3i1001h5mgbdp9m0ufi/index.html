<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="keywords" content="Hexo Theme Redefine">
    
    <meta name="author" content="Sunmy">
    <!-- preconnect -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    
    <!--- Seo Part-->
    
    <link rel="canonical" href="https://ldspdvsun.github.io/cmchul3i1001h5mgbdp9m0ufi/"/>
    <meta name="robots" content="index,follow">
    <meta name="googlebot" content="index,follow">
    <meta name="revisit-after" content="1 days">
    
    
    
        
        <meta name="description" content="Sunmy&#96;s Blogs">
<meta property="og:type" content="article">
<meta property="og:title" content="Shell学习笔记">
<meta property="og:url" content="https://ldspdvsun.github.io/cmchul3i1001h5mgbdp9m0ufi/index.html">
<meta property="og:site_name" content="Sunmy&#96;s Blogs">
<meta property="og:description" content="Sunmy&#96;s Blogs">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://i.postimg.cc/MZ0wLRpF/wallhaven-exl88k.png">
<meta property="article:published_time" content="2023-06-30T08:56:57.000Z">
<meta property="article:modified_time" content="2025-06-29T13:05:24.281Z">
<meta property="article:author" content="Sunmy">
<meta property="article:tag" content="Shell">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.postimg.cc/MZ0wLRpF/wallhaven-exl88k.png">
    
    
    <!--- Icon Part-->
    <link rel="icon" type="image/png" href="https://avatars.githubusercontent.com/u/86214331?s=96&amp;v=4" sizes="192x192">
    <link rel="apple-touch-icon" sizes="180x180" href="https://avatars.githubusercontent.com/u/86214331?s=96&amp;v=4">
    <meta name="theme-color" content="#A31F34">
    <link rel="shortcut icon" href="https://avatars.githubusercontent.com/u/86214331?s=96&v=4">
    <!--- Page Info-->
    
    <title>
        
            Shell学习笔记 | Sunmy`s Blogs
        
    </title>

    
<link rel="stylesheet" href="/fonts/Chillax/chillax.css">


    <!--- Inject Part-->
    

    
<link rel="stylesheet" href="/css/style.css">


    
        
<link rel="stylesheet" href="/css/build/tailwind.css">

    

    
<link rel="stylesheet" href="/fonts/GeistMono/geist-mono.css">

    
<link rel="stylesheet" href="/fonts/Geist/geist.css">

    <!--- Font Part-->
    
    
    
    
    
    
        
<script src="/js/build/libs/anime.min.js"></script>

    

    <script id="hexo-configurations">
    window.config = {"hostname":"ldspdvsun.github.io","root":"/","language":"zh-CN","path":"search.json"};
    window.theme = {"articles":{"style":{"font_size":"16px","line_height":1.5,"image_border_radius":"14px","image_alignment":"center","image_caption":false,"link_icon":true,"delete_mask":false,"title_alignment":"left","headings_top_spacing":{"h1":"5rem","h2":"4rem","h3":"2.8rem","h4":"2.5rem","h5":"2.2rem","h6":"2rem"}},"word_count":{"enable":true,"count":true,"min2read":true},"author_label":{"enable":true,"auto":false,"list":[]},"code_block":{"copy":true,"style":"mac","highlight_theme":{"light":"github","dark":"vs2015"},"font":{"enable":false,"family":null,"url":null}},"toc":{"enable":true,"max_depth":5,"number":false,"expand":true,"init_open":true},"copyright":{"enable":true,"default":"all_rights_reserved"},"lazyload":true,"pangu_js":false,"recommendation":{"enable":true,"title":"推荐阅读","limit":3,"mobile_limit":2,"placeholder":"https://i.postimg.cc/52qB9kNm/10.png","skip_dirs":[]}},"colors":{"primary":"#A31F34","secondary":null,"default_mode":"light"},"global":{"fonts":{"chinese":{"enable":false,"family":null,"url":null},"english":{"enable":false,"family":null,"url":null},"title":{"enable":false,"family":null,"url":null}},"content_max_width":"1000px","sidebar_width":"210px","hover":{"shadow":true,"scale":false},"scroll_progress":{"bar":false,"percentage":true},"website_counter":{"url":"https://cn.vercount.one/js","enable":true,"site_pv":true,"site_uv":true,"post_pv":true},"single_page":true,"preloader":{"enable":true,"custom_message":null},"open_graph":{"enable":true,"image":"https://i.postimg.cc/MZ0wLRpF/wallhaven-exl88k.png","description":"Sunmy`s Blogs"},"google_analytics":{"enable":false,"id":null}},"home_banner":{"enable":true,"style":"fixed","image":{"light":"https://i.postimg.cc/bJMg5v9g/0-8.png","dark":"https://i.postimg.cc/MZ0wLRpF/wallhaven-exl88k.png"},"title":"Sunmy`s Blogs","subtitle":{"text":["随心所欲地享受每一天\\(￣︶￣*\\))","随时随地，浏览记录O(∩_∩)O","如果喜欢，建议给个支持( •̀ ω •́ )✧","喜欢的话，留个言好嘛(oﾟvﾟ)ノ","欢迎来到我的博客(｡･∀･)ﾉﾞ","正在努力更新博客(ง •_•)ง","正在不断努力改善博客中ε=( o｀ω′)ノ","文字正在不断轮换(*￣3￣)╭","你有建议？反馈作者(●^◡^●)"],"hitokoto":{"enable":false,"show_author":false,"api":"https://v1.hitokoto.cn"},"typing_speed":100,"backing_speed":30,"starting_delay":500,"backing_delay":1500,"loop":true,"smart_backspace":true},"text_color":{"light":"#9f5221","dark":"#d1d1b6"},"text_style":{"title_size":"2.8rem","subtitle_size":"1.5rem","line_height":1.2},"custom_font":{"enable":false,"family":null,"url":null},"social_links":{"enable":true,"style":"default","links":{"github":"https://github.com/ldspdvsun","instagram":null,"zhihu":null,"twitter":null,"email":"skywalker0@qq.com"},"qrs":{"weixin":null}}},"plugins":{"feed":{"enable":false},"aplayer":{"enable":false,"type":"fixed","audios":[{"name":null,"artist":null,"url":null,"cover":null,"lrc":null}]},"mermaid":{"enable":false,"version":"11.4.1"}},"version":"2.8.2","navbar":{"auto_hide":false,"color":{"left":"#f78736","right":"#367df7","transparency":35},"width":{"home":"1600px","pages":"1000px"},"links":{"Home":{"path":"/","icon":"fa-regular fa-house"},"Archives":{"path":"/archives","icon":"fa-regular fa-archive"},"Tags":{"path":"/tags","icon":"fa-regular fa-tags"},"Categories":{"path":"/categories","icon":"fa-regular fa-list"},"ShuoShuo":{"icon":"fa-solid fa-comment-dots","path":"/shuoshuo"},"Links":{"icon":"fa-regular fa-link","submenus":{"Github":"https://github.com/ldspdvsun","Zhihu":"https://www.zhihu.com/people/ldspdvs"}}},"search":{"enable":true,"preload":true}},"page_templates":{"friends_column":2,"tags_style":"blur"},"home":{"sidebar":{"enable":true,"position":"left","first_item":"menu","announcement":"Be all you can be!","show_on_mobile":true,"links":{"Archives":{"path":"/archives","icon":"fa-regular fa-archive"},"Tags":{"path":"/tags","icon":"fa-regular fa-tags"},"Categories":{"path":"/categories","icon":"fa-regular fa-folder"}}},"article_date_format":"auto","excerpt_length":200,"categories":{"enable":true,"limit":3},"tags":{"enable":true,"limit":3}},"footerStart":"2023/6/1 00:00:00"};
    window.lang_ago = {"second":"%s 秒前","minute":"%s 分钟前","hour":"%s 小时前","day":"%s 天前","week":"%s 周前","month":"%s 个月前","year":"%s 年前"};
    window.data = {"masonry":false};
  </script>
    
    <!--- Fontawesome Part-->
    
<link rel="stylesheet" href="/fontawesome/fontawesome.min.css">

    
<link rel="stylesheet" href="/fontawesome/brands.min.css">

    
<link rel="stylesheet" href="/fontawesome/solid.min.css">

    
<link rel="stylesheet" href="/fontawesome/regular.min.css">

    
    
    
    
<meta name="generator" content="Hexo 7.3.0"></head>



<body>
	<div class="progress-bar-container">
	

	
	<span class="pjax-progress-bar"></span>
	<!--        <span class="swup-progress-icon">-->
	<!--            <i class="fa-solid fa-circle-notch fa-spin"></i>-->
	<!--        </span>-->
	
</div>

<style>
    :root {
        --preloader-background-color: #fff;
        --preloader-text-color: #000;
    }

    @media (prefers-color-scheme: dark) {
        :root {
            --preloader-background-color: #202124;
            --preloader-text-color: #fff;
        }
    }

    @media (prefers-color-scheme: light) {
        :root {
            --preloader-background-color: #fff;
            --preloader-text-color: #000;
        }
    }

    @media (max-width: 600px) {
        .ml13 {
            font-size: 2.6rem !important; /* Adjust this value as needed */
        }
    }

    .preloader {
        display: flex;
        flex-direction: column;
        gap: 1rem; /* Tailwind 'gap-4' is 1rem */
        align-items: center;
        justify-content: center;
        position: fixed;
        padding: 12px;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        width: 100vw;
        height: 100vh; /* 'h-screen' is 100% of the viewport height */
        background-color: var(--preloader-background-color);
        z-index: 1100; /* 'z-[1100]' sets the z-index */
        transition: opacity 0.2s ease-in-out;
    }

    .ml13 {
        font-size: 3.2rem;
        /* text-transform: uppercase; */
        color: var(--preloader-text-color);
        letter-spacing: -1px;
        font-weight: 500;
        font-family: 'Chillax-Variable', sans-serif;
        text-align: center;
    }

    .ml13 .word {
        display: inline-flex;
        flex-wrap: wrap;
        white-space: nowrap;
    }

    .ml13 .letter {
        display: inline-block;
        line-height: 1em;
    }
</style>

<div class="preloader">
    <h2 class="ml13">
        Sunmy`s Blogs
    </h2>
    <script>
        var textWrapper = document.querySelector('.ml13');
        // Split text into words
        var words = textWrapper.textContent.trim().split(' ');

        // Clear the existing content
        textWrapper.innerHTML = '';

        // Wrap each word and its letters in spans
        words.forEach(function(word) {
            var wordSpan = document.createElement('span');
            wordSpan.classList.add('word');
            wordSpan.innerHTML = word.replace(/\S/g, "<span class='letter'>$&</span>");
            textWrapper.appendChild(wordSpan);
            textWrapper.appendChild(document.createTextNode(' ')); // Add space between words
        });

        var animation = anime.timeline({ loop: true })
            .add({
                targets: '.ml13 .letter',
                translateY: [20, 0],
                translateZ: 0,
                opacity: [0, 1],
                filter: ['blur(5px)', 'blur(0px)'],
                easing: "easeOutExpo",
                duration: 1200,
                delay: (el, i) => 300 + 20 * i,
            })
            .add({
                targets: '.ml13 .letter',
                translateY: [0, -20],
                opacity: [1, 0],
                filter: ['blur(0px)', 'blur(5px)'],
                easing: "easeInExpo",
                duration: 1000,
                delay: (el, i) => 15 * i,
                complete: function() {
                    hidePreloader();
                }
            }, '-=700');


        let themeStatus = JSON.parse(localStorage.getItem('REDEFINE-THEME-STATUS'))?.isDark;

        // If the theme status is not found in local storage, check the preferred color scheme
        if (themeStatus === undefined || themeStatus === null) {
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                themeStatus = 'dark';
            } else {
                themeStatus = 'light';
            }
        }

        // Now you can use the themeStatus variable in your code
        if (themeStatus) {
            document.documentElement.style.setProperty('--preloader-background-color', '#202124');
            document.documentElement.style.setProperty('--preloader-text-color', '#fff');
        } else {
            document.documentElement.style.setProperty('--preloader-background-color', '#fff');
            document.documentElement.style.setProperty('--preloader-text-color', '#000');
        }

        window.addEventListener('load', function () {
            setTimeout(hidePreloader, 5000); // Call hidePreloader after 5000 milliseconds if not already called by animation
        });

        function hidePreloader() {
            var preloader = document.querySelector('.preloader');
            preloader.style.opacity = '0';
            setTimeout(function () {
                preloader.style.display = 'none';
            }, 200);
        }
    </script>
</div>

<main class="page-container" id="swup">

	

	<div class="main-content-container flex flex-col justify-between min-h-dvh">
		<div class="main-content-header">
			<header class="navbar-container px-6 md:px-12">
    <div class="navbar-content transition-navbar ">
        <div class="left">
            
            <a class="logo-title" href="/">
                
                Sunmy`s Blogs
                
            </a>
        </div>

        <div class="right">
            <!-- PC -->
            <div class="desktop">
                <ul class="navbar-list">
                    
                        
                            

                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class=""
                                   href="/"
                                        >
                                    <i class="fa-regular fa-house fa-fw"></i>
                                    首页
                                    
                                </a>

                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            

                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class=""
                                   href="/archives"
                                        >
                                    <i class="fa-regular fa-archive fa-fw"></i>
                                    归档
                                    
                                </a>

                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            

                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class=""
                                   href="/tags"
                                        >
                                    <i class="fa-regular fa-tags fa-fw"></i>
                                    标签
                                    
                                </a>

                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            

                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class=""
                                   href="/categories"
                                        >
                                    <i class="fa-regular fa-list fa-fw"></i>
                                    分类
                                    
                                </a>

                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            

                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class=""
                                   href="/shuoshuo"
                                        >
                                    <i class="fa-solid fa-comment-dots fa-fw"></i>
                                    说说
                                    
                                </a>

                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            

                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="has-dropdown"
                                   href="#"
                                        onClick=&#34;return false;&#34;>
                                    <i class="fa-regular fa-link fa-fw"></i>
                                    链接
                                    <i class="fa-solid fa-chevron-down fa-fw"></i>
                                </a>

                                <!-- Submenu -->
                                
                                    <ul class="sub-menu">
                                        
                                            <li>
                                                <a target="_blank" rel="noopener" href="https://github.com/ldspdvsun">
                                                    GITHUB
                                                </a>
                                            </li>
                                        
                                            <li>
                                                <a target="_blank" rel="noopener" href="https://www.zhihu.com/people/ldspdvs">
                                                    ZHIHU
                                                </a>
                                            </li>
                                        
                                    </ul>
                                
                            </li>
                    
                    
                        <li class="navbar-item search search-popup-trigger">
                            <i class="fa-solid fa-magnifying-glass"></i>
                        </li>
                    
                </ul>
            </div>
            <!-- Mobile -->
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fa-solid fa-magnifying-glass"></i>
                    </div>
                
                <div class="icon-item navbar-bar">
                    <div class="navbar-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile sheet -->
    <div class="navbar-drawer h-dvh w-full absolute top-0 left-0 bg-background-color flex flex-col justify-between">
        <ul class="drawer-navbar-list flex flex-col px-4 justify-center items-start">
            
                
                    

                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full "
                           href="/"
                        >
                            <span>
                                首页
                            </span>
                            
                                <i class="fa-regular fa-house fa-sm fa-fw"></i>
                            
                        </a>
                        

                        
                    </li>
            
                
                    

                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full "
                           href="/archives"
                        >
                            <span>
                                归档
                            </span>
                            
                                <i class="fa-regular fa-archive fa-sm fa-fw"></i>
                            
                        </a>
                        

                        
                    </li>
            
                
                    

                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full "
                           href="/tags"
                        >
                            <span>
                                标签
                            </span>
                            
                                <i class="fa-regular fa-tags fa-sm fa-fw"></i>
                            
                        </a>
                        

                        
                    </li>
            
                
                    

                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full "
                           href="/categories"
                        >
                            <span>
                                分类
                            </span>
                            
                                <i class="fa-regular fa-list fa-sm fa-fw"></i>
                            
                        </a>
                        

                        
                    </li>
            
                
                    

                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full "
                           href="/shuoshuo"
                        >
                            <span>
                                说说
                            </span>
                            
                                <i class="fa-solid fa-comment-dots fa-sm fa-fw"></i>
                            
                        </a>
                        

                        
                    </li>
            
                
                    

                    <li class="drawer-navbar-item-sub text-base my-1.5 flex flex-col w-full">
                        
                        <div class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary cursor-pointer text-2xl font-semibold group border-b border-border-color hover:border-primary w-full "
                             navbar-data-toggle="submenu-Links"
                        >
                            <span>
                                链接
                            </span>
                            
                                <i class="fa-solid fa-chevron-right fa-sm fa-fw transition-all"></i>
                            
                        </div>
                        

                        
                            <div class="flex-col items-start px-2 py-2 hidden" data-target="submenu-Links">
                                
                                    <div class="drawer-navbar-item text-base flex flex-col justify-center items-start hover:underline active:underline hover:underline-offset-1 rounded-3xl">
                                        <a class=" text-third-text-color text-xl"
                                           target="_blank" rel="noopener" href="https://github.com/ldspdvsun">GITHUB</a>
                                    </div>
                                
                                    <div class="drawer-navbar-item text-base flex flex-col justify-center items-start hover:underline active:underline hover:underline-offset-1 rounded-3xl">
                                        <a class=" text-third-text-color text-xl"
                                           target="_blank" rel="noopener" href="https://www.zhihu.com/people/ldspdvs">ZHIHU</a>
                                    </div>
                                
                            </div>
                        
                    </li>
            

            
            
                
                    
                    
                    
            
        </ul>

        <div class="statistics flex justify-around my-2.5">
    <a class="item tag-count-item flex flex-col justify-center items-center w-20" href="/tags">
        <div class="number text-2xl sm:text-xl text-second-text-color font-semibold">65</div>
        <div class="label text-third-text-color text-sm">标签</div>
    </a>
    <a class="item tag-count-item flex flex-col justify-center items-center w-20" href="/categories">
        <div class="number text-2xl sm:text-xl text-second-text-color font-semibold">20</div>
        <div class="label text-third-text-color text-sm">分类</div>
    </a>
    <a class="item tag-count-item flex flex-col justify-center items-center w-20" href="/archives">
        <div class="number text-2xl sm:text-xl text-second-text-color font-semibold">70</div>
        <div class="label text-third-text-color text-sm">文章</div>
    </a>
</div>
    </div>

    <div class="window-mask"></div>

</header>


		</div>

		<div class="main-content-body transition-fade-up">
			

			<div class="main-content">
				<div class="post-page-container flex relative justify-between box-border w-full h-full">
	<div class="article-content-container">

		<div class="article-title relative w-full">
			
			<div class="w-full flex items-center pt-6 justify-start">
				<h1 class="article-title-regular text-second-text-color tracking-tight text-4xl md:text-6xl font-semibold px-2 sm:px-6 md:px-8 py-3">Shell学习笔记</h1>
			</div>
			
		</div>

		
		<div class="article-header flex flex-row gap-2 items-center px-2 sm:px-6 md:px-8">
			<div class="avatar w-[46px] h-[46px] flex-shrink-0 rounded-medium border border-border-color p-[1px]">
				<img src="https://avatars.githubusercontent.com/u/86214331?s=96&v=4">
			</div>
			<div class="info flex flex-col justify-between">
				<div class="author flex items-center">
					<span class="name text-default-text-color text-lg font-semibold">Sunmy</span>
					
					<span class="author-label ml-1.5 text-xs px-2 py-0.5 rounded-small text-third-text-color border border-shadow-color-1">Lv5</span>
					
				</div>
				<div class="meta-info">
					<div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fa-regular fa-pen-fancy"></i>&nbsp;
        <span class="desktop">2023-06-30 16:56:57</span>
        <span class="mobile">2023-06-30 16:56:57</span>
        <span class="hover-info">创建</span>
    </span>
    
        <span class="article-date article-meta-item">
            <i class="fa-regular fa-wrench"></i>&nbsp;
            <span class="desktop">2025-06-29 21:05:24</span>
            <span class="mobile">2025-06-29 21:05:24</span>
            <span class="hover-info">更新</span>
        </span>
    

    
        <span class="article-categories article-meta-item">
            <i class="fa-regular fa-folders"></i>&nbsp;
            <ul>
                
                
                    
                        
                        <li>
                            <a href="/categories/Linux%E7%B3%BB%E7%BB%9F%E5%9F%BA%E7%A1%80/">Linux系统基础</a>&nbsp;
                        </li>
                    
                    
                
            </ul>
        </span>
    
    
        <span class="article-tags article-meta-item">
            <i class="fa-regular fa-tags"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/tags/Shell/">Shell</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    

    
    
        <span class="article-wordcount article-meta-item">
            <i class="fa-regular fa-typewriter"></i>&nbsp;<span>17.9k 字</span>
        </span>
    
    
        <span class="article-min2read article-meta-item">
            <i class="fa-regular fa-clock"></i>&nbsp;<span>89 分钟</span>
        </span>
    
    
        <span class="article-pv article-meta-item">
            <i class="fa-regular fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>
        </span>
    
</div>

				</div>
			</div>
		</div>
		

		


		<div class="article-content markdown-body px-2 sm:px-6 md:px-8 pb-8">
			<h1 id="Shell介绍"><a href="#Shell介绍" class="headerlink" title="Shell介绍"></a>Shell介绍</h1><div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -itd --privileged --name centos7-shell centos:centos7.9.2009 /bin/bash</span><br></pre></td></tr></table></figure></div>

<ol>
<li>看懂shell</li>
<li>能改shell</li>
<li>能写shell</li>
<li>优化shell</li>
</ol>
<p>shell是一个程序，用C语言编写，用户和linux内核沟通的桥梁。既是一种命令语言又是一种解释性的编程语言</p>
<p><a target="_blank" rel="noopener" href="https://postimg.cc/CdtjfmY5"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://i.postimg.cc/KvcQwHHP/image-shell-1.png"
                      alt="image-shell-1.png"
                ></a></p>
<p>•	kernel：为软件服务，接受用户指令或软件指令驱动硬件，完成工作（外国人 收到翻译后的话）</p>
<p>•	shell：解释器（翻译 翻译两个人话语）</p>
<p>•	user：用户接口，对接用户（中国人说的汉语交给翻译）</p>
<div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@root sun]# <span class="built_in">echo</span> <span class="string">&quot;hello world&quot;</span></span><br><span class="line">hello world</span><br><span class="line"><span class="comment"># sed &#x27;s/world/亲/&#x27;</span></span><br><span class="line">[root@root sun]# <span class="built_in">echo</span> <span class="string">&quot;hello world&quot;</span> | sed <span class="string">&#x27;s/world/亲/&#x27;</span></span><br><span class="line">hello 亲</span><br><span class="line">[root@root sun]# <span class="built_in">echo</span> <span class="variable">$USER</span></span><br><span class="line">sun</span><br><span class="line">[root@root sun]# </span><br></pre></td></tr></table></figure></div>

<h2 id="shell功能"><a href="#shell功能" class="headerlink" title="shell功能"></a>shell功能</h2><p>•	命令行解释功能</p>
<p>•	启动程序</p>
<p>•	输入输出重定向</p>
<p>•	管道连接</p>
<p>•	文件名置换（echo&#x2F;*）</p>
<p>•	变量维护</p>
<p>•	环境控制</p>
<p>•	shell编程</p>
<h1 id="shell脚本语法"><a href="#shell脚本语法" class="headerlink" title="shell脚本语法"></a>shell脚本语法</h1><h2 id="如何抒写shell脚本"><a href="#如何抒写shell脚本" class="headerlink" title="如何抒写shell脚本"></a>如何抒写shell脚本</h2><ol>
<li><p>shell脚本的命名</p>
<p>a. 名字要有意义，不要太长</p>
</li>
<li><p>shell脚本格式</p>
<p>a. 开头指定运行环境 用#! 添加备注</p>
</li>
</ol>
<div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">[root@Centos8 shells]# <span class="built_in">cat</span> nginx_install.sh </span><br><span class="line"><span class="comment"># 1） 定义脚本执行环境</span></span><br><span class="line"><span class="comment">#!/usr/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2）#代表注释 #! 是特例</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3）脚本信息</span></span><br><span class="line"><span class="comment"># Author:Sun</span></span><br><span class="line"><span class="comment"># Created:2022/4/2 10:16</span></span><br><span class="line"><span class="comment"># Scription Description:nginx install script</span></span><br><span class="line"><span class="comment"># Release:1.0</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 4）脚本组成</span></span><br><span class="line"><span class="comment"># 解释环境 #!/usr/bin/env bash |python|perl</span></span><br><span class="line"><span class="comment"># 注释说明</span></span><br><span class="line"><span class="comment"># 编写代码</span></span><br><span class="line"></span><br><span class="line">yum -y install wget gcc pcre-devel zlib-devel</span><br><span class="line">wget http://nginx.org/download/nginx-1.16.0.tar.gz</span><br><span class="line">tar -zxvf nginx-1.16.0.tar.gz</span><br><span class="line"><span class="built_in">cd</span> nginx-1.16.0</span><br><span class="line">./configure --prefix=/usr/local/nginx</span><br><span class="line">make -j 4</span><br><span class="line">make install</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5)执行脚本</span></span><br><span class="line"><span class="comment">#   给执行权限</span></span><br><span class="line"><span class="comment">#   解释器直接运行，不需要给权限</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;hello Nginx is ending!&quot;</span></span><br><span class="line"></span><br><span class="line">[root@Centos8 shells]# </span><br></pre></td></tr></table></figure></div>

<h2 id="shell脚本运行方法"><a href="#shell脚本运行方法" class="headerlink" title="shell脚本运行方法"></a>shell脚本运行方法</h2><div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">[root@Centos8 shells]# ll</span><br><span class="line">total 1020</span><br><span class="line">drwxr-xr-x 9 1001 1001     186 Apr 23  2019 nginx-1.16.0</span><br><span class="line">-rw-r--r-- 1 root root 1032345 Apr 23  2019 nginx-1.16.0.tar.gz</span><br><span class="line">-rwx------ 1 root root     622 Apr  2 10:32 nginx_install.sh</span><br><span class="line">-rwx------ 1 root root     622 Apr  2 10:36 nginx_install_test.sh</span><br><span class="line">[root@Centos8 shells]# vim nginx_install_test.sh </span><br><span class="line">[root@Centos8 shells]# </span><br><span class="line">[root@Centos8 shells]# <span class="built_in">chmod</span> 700 nginx_install.sh</span><br><span class="line">[root@Centos8 shells]# ./nginx_install_test.sh </span><br><span class="line">hello Nginx is Ending!</span><br><span class="line">[root@Centos8 shells]# sh nginx_install_test.sh </span><br><span class="line">hello Nginx is Ending!</span><br><span class="line">[root@Centos8 shells]# bash nginx_install_test.sh </span><br><span class="line">hello Nginx is Ending!</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">mv</span> nginx_install_test.sh nginx_test.sh</span><br><span class="line">[root@Centos8 shells]# ll</span><br><span class="line">total 1020</span><br><span class="line">drwxr-xr-x 9 1001 1001     186 Apr 23  2019 nginx-1.16.0</span><br><span class="line">-rw-r--r-- 1 root root 1032345 Apr 23  2019 nginx-1.16.0.tar.gz</span><br><span class="line">-rwx------ 1 root root     622 Apr  2 10:32 nginx_install.sh</span><br><span class="line">-rwx------ 1 root root     629 Apr  2 10:37 nginx_test.sh</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">cat</span> /etc/shells</span><br><span class="line">/bin/sh</span><br><span class="line">/bin/bash</span><br><span class="line">/usr/bin/sh</span><br><span class="line">/usr/bin/bash</span><br><span class="line">[root@Centos8 shells]# </span><br></pre></td></tr></table></figure></div>

<h2 id="shell的符号"><a href="#shell的符号" class="headerlink" title="shell的符号"></a>shell的符号</h2><p>~ 家目录</p>
<p>&#x2F;- 返回上一次的目录</p>
<div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">[root@Centos8 bin]# <span class="built_in">pwd</span></span><br><span class="line">/usr/bin</span><br><span class="line">[root@Centos8 bin]# <span class="built_in">cd</span> ~</span><br><span class="line">[root@Centos8 ~]# <span class="built_in">pwd</span></span><br><span class="line">/root</span><br><span class="line"></span><br><span class="line">[root@Centos8 ~]# <span class="built_in">cd</span> -</span><br><span class="line">/usr/bin</span><br><span class="line">[root@Centos8 bin]#</span><br><span class="line">! 执行历史命令</span><br><span class="line">[root@Centos8 bin]# <span class="built_in">echo</span> <span class="string">&quot;hello&quot;</span></span><br><span class="line">hello</span><br><span class="line">[root@Centos8 bin]# !!</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;hello&quot;</span></span><br><span class="line">hello</span><br><span class="line">[root@Centos8 bin]# !p</span><br><span class="line"><span class="built_in">pwd</span></span><br><span class="line">/usr/bin</span><br><span class="line">[root@Centos8 bin]# </span><br><span class="line">$ 变量中取定值</span><br><span class="line">[root@Centos8 bin]# <span class="built_in">echo</span> <span class="variable">$USER</span></span><br><span class="line">root</span><br><span class="line">[root@Centos8 bin]# </span><br><span class="line">/ + - * \ % 对应数学运算加 减 乘 除 取余</span><br><span class="line">[root@Centos8 bin]# <span class="built_in">expr</span> 3 \+ 3</span><br><span class="line">6</span><br><span class="line">[root@Centos8 bin]# <span class="built_in">expr</span> 3 \- 3</span><br><span class="line">0</span><br><span class="line">[root@Centos8 bin]# <span class="built_in">expr</span> 3 \* 3</span><br><span class="line">9</span><br><span class="line">[root@Centos8 bin]# <span class="built_in">expr</span> 3 \/ 3</span><br><span class="line">1</span><br><span class="line">[root@Centos8 bin]# <span class="built_in">expr</span> 3 \% 3</span><br><span class="line">0</span><br><span class="line">[root@Centos8 bin]# </span><br><span class="line">&amp; 后台执行</span><br><span class="line">/* 星号是shell中的通配符，匹配所有</span><br><span class="line">? 问号是shell中的通配符，匹配除回车外的一个字符</span><br><span class="line">; 分好可以在shll中一行执行多个命令，命令间用分号分割</span><br><span class="line">| 管道符，上一个命令的输出作为下一个命令的输入 <span class="built_in">cat</span> filename | grep <span class="string">&quot;abc&quot;</span></span><br><span class="line">\ 转义字符</span><br><span class="line">`` 反引号，命令中执行命令 <span class="built_in">echo</span> <span class="string">&quot;today is `date + %F ` &quot;</span></span><br><span class="line"><span class="string">&#x27;&#x27;</span> 单引号 脚本中字符串要用单引号引起来，但是不同意双引号的是，单引号不解释变量</span><br><span class="line">“ 双引号 脚本中出现的字符串可以用双引号引起来</span><br></pre></td></tr></table></figure></div>

<h2 id="管道"><a href="#管道" class="headerlink" title="管道"></a>管道</h2><p>| 管道在shell中使用最多的，很多命令都是通过管道符输出，然后再通过grep再查找</p>
<div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@Centos8 shells]# <span class="built_in">cat</span> /etc/passwd | grep <span class="string">&quot;root&quot;</span></span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">operator:x:11:0:operator:/root:/sbin/noloagin</span><br><span class="line">[root@Centos8 shells]#</span><br></pre></td></tr></table></figure></div>

<ul>
<li>将命令的输出重定向到其他位置（比如文件）时可以用重定向</li>
</ul>
<h3 id="输出重定向（-英文-）"><a href="#输出重定向（-英文-）" class="headerlink" title="输出重定向（&gt;(英文)）"></a>输出重定向（&gt;(英文)）</h3><div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">(JupyterNotebook) [admin@centos7 scripts]$ <span class="built_in">cat</span> test6.sh </span><br><span class="line"><span class="comment"># Specify the shell</span></span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Specify the Author</span></span><br><span class="line"><span class="comment"># Author:Sun</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Specify the create date</span></span><br><span class="line"><span class="comment"># Created:2022/11/13 10:37</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Specify the script`s version</span></span><br><span class="line"><span class="comment"># Release:1.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Add Description</span></span><br><span class="line"><span class="comment"># Scription Description:Output redirection</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 将date的输出重定向到test6_redirection.sh中，没有文件时将会新建，存在时将会覆盖原有的内容</span></span><br><span class="line"><span class="built_in">date</span> &gt; test6_redirection.log</span><br><span class="line"><span class="comment"># 将who的输出追加到test6_redirection.log中，并不会覆盖原有的内容</span></span><br><span class="line"><span class="built_in">who</span> &gt;&gt; test6_redirection.log</span><br><span class="line">(JupyterNotebook) [admin@centos7 scripts]$ ./test6.sh </span><br><span class="line">(JupyterNotebook) [admin@centos7 scripts]$ ll</span><br><span class="line">total 44</span><br><span class="line">-rwxrwxr-x 1 admin admin 694 Nov 13 15:40 a-chmod-777.sh</span><br><span class="line">-rwxrwxr-x 1 admin admin 295 Nov 13 20:22 a-script-copy.sh</span><br><span class="line">-rwxrwxr-x 1 admin admin 297 Nov 13 20:28 a-script-demo.sh</span><br><span class="line">-rwxrwxr-x 1 admin admin 392 Nov 13 16:00 test1.sh</span><br><span class="line">-rwxrwxr-x 1 admin admin 379 Nov 13 17:12 test2.sh</span><br><span class="line">-rwxrwxr-x 1 admin admin 420 Nov 13 19:48 test3.sh</span><br><span class="line">-rwxrwxr-x 1 admin admin 418 Nov 13 19:56 test4.sh</span><br><span class="line">-rwxrwxr-x 1 admin admin 534 Nov 13 20:11 test5_221113.log</span><br><span class="line">-rwxrwxr-x 1 admin admin 474 Nov 13 20:10 test5.sh</span><br><span class="line">-rw-rw-r-- 1 admin admin 193 Nov 13 20:28 test6_redirection.log</span><br><span class="line">-rwxr-xr-x 1 admin admin 539 Nov 13 20:27 test6.sh</span><br><span class="line">(JupyterNotebook) [admin@centos7 scripts]$ <span class="built_in">cat</span> test6_redirection.log </span><br><span class="line">Sun Nov 13 20:28:36 CST 2022</span><br><span class="line">root     pts/4        2022-11-13 19:36 (114.254.0.50)</span><br><span class="line">admin    pts/6        2022-11-13 19:36 (114.254.0.50)</span><br><span class="line">root     pts/3        2022-11-13 17:23 (114.242.250.71)</span><br><span class="line">(JupyterNotebook) [admin@centos7 scripts]$ </span><br></pre></td></tr></table></figure></div>

<h3 id="输入重定向（"><a href="#输入重定向（" class="headerlink" title="输入重定向（&lt;(英文)）"></a>输入重定向（&lt;(英文)）</h3><ul>
<li>输入重定向是文件的内容重定向至命令</li>
<li>command &lt; inputfile</li>
<li>wc 可以统计数据中的文本，默认情况下会输出3个值</li>
<li>文本的行数</li>
<li>文本的单词数</li>
<li>文本的字节数</li>
</ul>
<div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(JupyterNotebook) [admin@centos7 scripts]$ <span class="built_in">wc</span> &lt; test6.sh </span><br><span class="line"> 19  43 495</span><br><span class="line">(JupyterNotebook) [admin@centos7 scripts]$ </span><br></pre></td></tr></table></figure></div>

<h4 id="内连输入重定向"><a href="#内连输入重定向" class="headerlink" title="内连输入重定向(&lt;&lt;)"></a>内连输入重定向(&lt;&lt;)</h4><ul>
<li>使用此符号时，必须指定一个文本标记来划分输入数据的起止。任何字符串都可以作为文本标记，但在数据开始和结尾的文本标记必须一致</li>
</ul>
<div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">commond &lt;&lt; <span class="string">marker</span></span><br><span class="line"><span class="string">date</span></span><br><span class="line"><span class="string">marker</span></span><br></pre></td></tr></table></figure></div>

<div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">(JupyterNotebook) [admin@centos7 scripts]$ <span class="built_in">wc</span> &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string">&gt; test data 1</span></span><br><span class="line"><span class="string">&gt; test data e</span></span><br><span class="line"><span class="string">&gt; test data 3</span></span><br><span class="line"><span class="string">&gt; EOF</span></span><br><span class="line"> 3  9 36</span><br><span class="line">(JupyterNotebook) [admin@centos7 scripts]$ </span><br><span class="line">(JupyterNotebook) [admin@centos7 scripts]$ <span class="built_in">wc</span> &lt;&lt; <span class="string">END</span></span><br><span class="line"><span class="string">&gt; TEST DATA 1</span></span><br><span class="line"><span class="string">&gt; TEST DATA 2</span></span><br><span class="line"><span class="string">&gt; END</span></span><br><span class="line"> 2  6 24</span><br><span class="line">(JupyterNotebook) [admin@centos7 scripts]$ </span><br><span class="line"></span><br></pre></td></tr></table></figure></div>

<h2 id="重定向"><a href="#重定向" class="headerlink" title="重定向"></a>重定向</h2><ul>
<li>&#x2F;&gt; 重定向输入</li>
<li>&#x2F;&gt;&gt; 重定向追加输入</li>
<li>&lt; 重定向输出</li>
<li>&lt;&lt; 重定向追加输出</li>
</ul>
<div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">[root@Centos8 shells]# ll</span><br><span class="line">total 1020</span><br><span class="line">drwxr-xr-x 9 1001 1001     186 Apr 23  2019 nginx-1.16.0</span><br><span class="line">-rw-r--r-- 1 root root 1032345 Apr 23  2019 nginx-1.16.0.tar.gz</span><br><span class="line">-rwx------ 1 root root     622 Apr  2 10:32 nginx_install.sh</span><br><span class="line">-rwx------ 1 root root     629 Apr  4 22:33 nginx_test.sh</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">pwd</span></span><br><span class="line">/root/shells</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">echo</span> haha &gt; ./forward.txt</span><br><span class="line">[root@Centos8 shells]# ll</span><br><span class="line">total 1024</span><br><span class="line">-rw-r--r-- 1 root root       5 Apr  4 22:41 forward.txt</span><br><span class="line">drwxr-xr-x 9 1001 1001     186 Apr 23  2019 nginx-1.16.0</span><br><span class="line">-rw-r--r-- 1 root root 1032345 Apr 23  2019 nginx-1.16.0.tar.gz</span><br><span class="line">-rwx------ 1 root root     622 Apr  2 10:32 nginx_install.sh</span><br><span class="line">-rwx------ 1 root root     629 Apr  4 22:33 nginx_test.sh</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">cat</span> forward.txt </span><br><span class="line">haha</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">echo</span> haha1 &gt; ./forward.txt</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">cat</span> forward.txt </span><br><span class="line">haha1</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">echo</span> haha2 &gt; ./forward.txt</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">cat</span> forward.txt </span><br><span class="line">haha2</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">echo</span> haha1 &gt; ./forward.txt</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">echo</span> haha2 &gt;&gt; ./forward.txt</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">cat</span> forward.txt </span><br><span class="line">haha1</span><br><span class="line">haha2</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">echo</span> haha3 &gt;&gt; ./forward.txt</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">cat</span> forward.txt </span><br><span class="line">haha1</span><br><span class="line">haha2</span><br><span class="line">haha3</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">wc</span> &lt; forward.txt </span><br><span class="line"> 3  3 18</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">wc</span> forward.txt </span><br><span class="line"> 3  3 18 forward.txt</span><br></pre></td></tr></table></figure></div>

<h2 id="shell数学运算"><a href="#shell数学运算" class="headerlink" title="shell数学运算"></a>shell数学运算</h2><h3 id="expr"><a href="#expr" class="headerlink" title="expr"></a>expr</h3><div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">(JupyterNotebook) [admin@centos7 StudyScripts]$ <span class="built_in">expr</span> 1 + 2</span><br><span class="line">3</span><br><span class="line">(JupyterNotebook) [admin@centos7 StudyScripts]$ <span class="built_in">expr</span> 1 - 2</span><br><span class="line">-1</span><br><span class="line">(JupyterNotebook) [admin@centos7 StudyScripts]$ <span class="built_in">expr</span> 1 * 2</span><br><span class="line"><span class="built_in">expr</span>: syntax error</span><br><span class="line">(JupyterNotebook) [admin@centos7 StudyScripts]$ <span class="built_in">expr</span> 1 \* 2</span><br><span class="line">2</span><br><span class="line">(JupyterNotebook) [admin@centos7 StudyScripts]$ <span class="built_in">expr</span> 1 / 2</span><br><span class="line">0</span><br><span class="line">(JupyterNotebook) [admin@centos7 StudyScripts]$ <span class="built_in">expr</span> 1 % 2</span><br><span class="line">1</span><br><span class="line">(JupyterNotebook) [admin@centos7 StudyScripts]$ </span><br></pre></td></tr></table></figure></div>

<h3 id="使用方括号"><a href="#使用方括号" class="headerlink" title="使用方括号"></a>使用方括号</h3><p>为了兼容Bourne shell，bash shell保留了expr命令，但同时也提供了另一种更简单的方法执行数学运算。在bash中，要将数学运算结果赋给变量，可以使用$和方括号（$[operation]），获取变量值通过 $变量名。</p>
<div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(JupyterNotebook) [admin@centos7 StudyScripts]$ var1=$[ 1 + 5 ]</span><br><span class="line">(JupyterNotebook) [admin@centos7 StudyScripts]$ <span class="built_in">echo</span> <span class="variable">$var1</span></span><br><span class="line">6</span><br><span class="line">(JupyterNotebook) [admin@centos7 StudyScripts]$ var2=$[<span class="variable">$var1</span>*2]</span><br><span class="line">(JupyterNotebook) [admin@centos7 StudyScripts]$ <span class="built_in">echo</span> <span class="variable">$var2</span></span><br><span class="line">12</span><br><span class="line">(JupyterNotebook) [admin@centos7 StudyScripts]$ </span><br></pre></td></tr></table></figure></div>

<h2 id="脚本退出"><a href="#脚本退出" class="headerlink" title="脚本退出"></a>脚本退出</h2><h3 id="查看退出状态码"><a href="#查看退出状态码" class="headerlink" title="查看退出状态码"></a>查看退出状态码</h3><p>Linux提供了专门的变量$?来保存最后一个已执行命令的退出状态码。</p>
<p>Linux退出状态码</p>
<table>
<thead>
<tr>
<th>状态码</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>0</td>
<td>命令成功结束</td>
</tr>
<tr>
<td>1</td>
<td>一般性未知错误</td>
</tr>
<tr>
<td>2</td>
<td>不适合的shell命令</td>
</tr>
<tr>
<td>126</td>
<td>命令无法执行</td>
</tr>
<tr>
<td>127</td>
<td>没找到命令</td>
</tr>
<tr>
<td>128</td>
<td>无效的退出参数</td>
</tr>
<tr>
<td>128+x</td>
<td>与Linux信号x相关的严重参数</td>
</tr>
<tr>
<td>130</td>
<td>通过Ctrl+C终止命令</td>
</tr>
<tr>
<td>255</td>
<td>正常范围之外的退出状态码</td>
</tr>
</tbody></table>
<h3 id="exit"><a href="#exit" class="headerlink" title="exit"></a>exit</h3><blockquote>
<p>exit</p>
</blockquote>
<h1 id="格式化输出"><a href="#格式化输出" class="headerlink" title="格式化输出"></a>格式化输出</h1><h2 id="echo语法"><a href="#echo语法" class="headerlink" title="echo语法"></a>echo语法</h2><blockquote>
<p>功能：将内容输出到默认显示设备<br>应用场景：需要计算机程序输出的地方</p>
</blockquote>
<ul>
<li>echo命令的功能是在显示器上显示一段文字，一般起到一个提示的作用。 功能说明:显示文字。</li>
</ul>
<div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">[root@Centos8 ~]# <span class="built_in">echo</span> <span class="string">&quot;Login:&quot;</span>;<span class="built_in">read</span></span><br><span class="line">Login:</span><br><span class="line">11</span><br><span class="line">[root@Centos8 ~]# <span class="built_in">echo</span> -n <span class="string">&quot;Login:&quot;</span>;<span class="built_in">read</span></span><br><span class="line">Login:22</span><br><span class="line">[root@Centos8 ~]# <span class="built_in">echo</span> -n <span class="string">&quot;Date:&quot;</span>;<span class="built_in">date</span> +%F</span><br><span class="line">Date:2022-04-05</span><br><span class="line">[root@Centos8 ~]# <span class="built_in">echo</span> <span class="string">&quot;Date:&quot;</span>;<span class="built_in">date</span> +%F</span><br><span class="line">Date:</span><br><span class="line">2022-04-05</span><br><span class="line">[root@Centos8 ~]# </span><br><span class="line"></span><br><span class="line">语法:<span class="built_in">echo</span> [-ne][字符串]</span><br><span class="line"></span><br><span class="line">补充说明:</span><br><span class="line">1、<span class="built_in">echo</span>会将输入的字符串送往标准输出。</span><br><span class="line">2、输出的字符串间以空白字符隔开,并在最后加上换行号。</span><br><span class="line"></span><br><span class="line">OPTIONS：</span><br><span class="line">-n  不要在最后自动换行</span><br><span class="line">-e  若字符串中出现以下字符，则特别加以处理，而不会将它当成一般文字输出:</span><br><span class="line"></span><br><span class="line">转义字符</span><br><span class="line">\a  发出警告声;</span><br><span class="line">\b  删除前一个字符;</span><br><span class="line">\t  插入tab;</span><br><span class="line">\n  换行且光标移至行首;</span><br><span class="line"></span><br><span class="line">\c  最后不加上换行符号;</span><br><span class="line">\f  换行但光标仍旧停留在原来的位置;</span><br><span class="line">\r  光标移至行首，但不换行;</span><br><span class="line">\v  与\f相同;</span><br><span class="line">\       插入\字符;</span><br><span class="line">\0nnn   打印nnn(八进制)所代表的ASCII字符;  备注：数字0  不要理解成字母o</span><br><span class="line">\xNN  打印NN(十六进制)所代表的ASCII字符;</span><br><span class="line"></span><br><span class="line">-–<span class="built_in">help</span>  显示帮助</span><br><span class="line">-–version显示版本信息</span><br><span class="line"></span><br><span class="line">[root@Centos8 ~]# <span class="built_in">echo</span> -e <span class="string">&quot;\a123&quot;</span></span><br><span class="line">123</span><br><span class="line">[root@Centos8 ~]# <span class="built_in">echo</span> -e <span class="string">&quot;123\b&quot;</span></span><br><span class="line">123</span><br><span class="line">[root@Centos8 ~]# <span class="built_in">echo</span> -e <span class="string">&quot;\b123&quot;</span>                                                                  123</span><br><span class="line">[root@Centos8 ~]# <span class="built_in">echo</span> -e <span class="string">&quot;\t123&quot;</span></span><br><span class="line">    123</span><br><span class="line">[root@Centos8 ~]# <span class="built_in">echo</span> -e <span class="string">&quot;12\n3&quot;</span></span><br><span class="line">12</span><br><span class="line">3cat</span><br><span class="line">[root@Centos8 ~]# <span class="built_in">echo</span> -e <span class="string">&quot;\c123&quot;</span></span><br><span class="line">[root@Centos8 ~]# <span class="built_in">echo</span> -e <span class="string">&quot;\f123&quot;</span></span><br><span class="line"></span><br><span class="line">123</span><br><span class="line">[root@Centos8 ~]# <span class="built_in">echo</span> -e <span class="string">&quot;\r123&quot;</span></span><br><span class="line">123</span><br><span class="line">[root@Centos8 ~]# <span class="built_in">echo</span> -e <span class="string">&quot;\v12\n3&quot;</span></span><br><span class="line"></span><br><span class="line">12</span><br><span class="line">3</span><br><span class="line"></span><br><span class="line">[root@Centos8 ~]# </span><br><span class="line"></span><br><span class="line">你的进制转换过关吗？</span><br><span class="line">[root@zutuanxue ~]# <span class="built_in">echo</span> -e <span class="string">&quot;\0123&quot;</span>   <span class="comment">#ot(123) = 83  对应ascii表的S</span></span><br><span class="line">S</span><br><span class="line">[root@zutuanxue ~]# <span class="built_in">echo</span> -e <span class="string">&quot;\x61&quot;</span>   <span class="comment">#ox(61) = 97  对应ascii表的a</span></span><br><span class="line">a</span><br></pre></td></tr></table></figure></div>

<h3 id="time-sh"><a href="#time-sh" class="headerlink" title="time.sh"></a>time.sh</h3><div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 倒计时</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> <span class="keyword">time</span> <span class="keyword">in</span> $(<span class="built_in">seq</span> 9 -1 0);<span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> -ne <span class="string">&quot;\b<span class="variable">$time</span>&quot;</span>;<span class="built_in">sleep</span> 1</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;\a&quot;</span></span><br></pre></td></tr></table></figure></div>

<h2 id="颜色输出"><a href="#颜色输出" class="headerlink" title="颜色输出"></a>颜色输出</h2><p>脚本中echo显示内容带颜色显示,echo显示带颜色，需要使用参数-e<br>格式如下：</p>
<div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;\033[字背景颜色；文字颜色m字符串\033[0m&quot;</span></span><br></pre></td></tr></table></figure></div>

<div class="code-container" data-rel="Txt"><figure class="iseeu highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">例如： echo -e “\033[41;36m something here \033[0m”</span><br><span class="line">其中41的位置代表底色， 36m的位置是代表字的颜色</span><br><span class="line">1、字背景颜色和文字颜色之间是英文的</span><br><span class="line">2、文字颜色后面有个m</span><br><span class="line">3、字符串前后可以没有空格，如果有的话，输出也是同样有空格</span><br></pre></td></tr></table></figure></div>

<p>下面是相应的字和背景颜色，可以自己来尝试找出不同颜色搭配</p>
<div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">例</span><br><span class="line">　　<span class="built_in">echo</span> -e “\033[31m 红色字 \033[0m”</span><br><span class="line">　　<span class="built_in">echo</span> -e “\033[34m 黄色字 \033[0m”</span><br><span class="line">　　<span class="built_in">echo</span> -e “\033[41;33m 红底黄字 \033[0m”</span><br><span class="line">　　<span class="built_in">echo</span> -e “\033[41;37m 红底白字 \033[0m”</span><br><span class="line">　　</span><br><span class="line">字颜色：30—–37</span><br><span class="line">　　<span class="built_in">echo</span> -e “\033[30m 黑色字 \033[0m”</span><br><span class="line">　　<span class="built_in">echo</span> -e “\033[31m 红色字 \033[0m”</span><br><span class="line">　　<span class="built_in">echo</span> -e “\033[32m 绿色字 \033[0m”</span><br><span class="line">　　<span class="built_in">echo</span> -e “\033[33m 黄色字 \033[0m”</span><br><span class="line">　　<span class="built_in">echo</span> -e “\033[34m 蓝色字 \033[0m”</span><br><span class="line">　　<span class="built_in">echo</span> -e “\033[35m 紫色字 \033[0m”</span><br><span class="line">　　<span class="built_in">echo</span> -e “\033[36m 天蓝字 \033[0m”</span><br><span class="line">　　<span class="built_in">echo</span> -e “\033[37m 白色字 \033[0m”</span><br><span class="line"></span><br><span class="line">　　</span><br><span class="line">字背景颜色范围：40—–47</span><br><span class="line">　　<span class="built_in">echo</span> -e “\033[40;37m 黑底白字 \033[0m”</span><br><span class="line">　　<span class="built_in">echo</span> -e “\033[41;37m 红底白字 \033[0m”</span><br><span class="line">　　<span class="built_in">echo</span> -e “\033[42;37m 绿底白字 \033[0m”</span><br><span class="line">　　<span class="built_in">echo</span> -e “\033[43;37m 黄底白字 \033[0m”</span><br><span class="line">　　<span class="built_in">echo</span> -e “\033[44;37m 蓝底白字 \033[0m”</span><br><span class="line">　　<span class="built_in">echo</span> -e “\033[45;37m 紫底白字 \033[0m”</span><br><span class="line">　　<span class="built_in">echo</span> -e “\033[46;37m 天蓝底白字 \033[0m”</span><br><span class="line">　　<span class="built_in">echo</span> -e “\033[47;30m 白底黑字 \033[0m”</span><br><span class="line">　　</span><br><span class="line">最后面控制选项说明</span><br><span class="line">　　\033[0m 关闭所有属性</span><br><span class="line">　　\033[1m 设置高亮度</span><br><span class="line">　　\033[4m 下划线</span><br><span class="line">　　\033[5m 闪烁</span><br><span class="line">　　\033[7m 反显</span><br><span class="line">　　\033[8m 消隐</span><br><span class="line"></span><br><span class="line">　　\033[30m — \33[37m </span><br><span class="line"></span><br><span class="line">设置前景色</span><br><span class="line">　　\033[40m — \33[47m 设置背景色</span><br><span class="line">　　</span><br><span class="line">　　</span><br><span class="line">　　\033[nA 光标上移n行</span><br><span class="line">　　\033[nB 光标下移n行</span><br><span class="line">　　\033[nC 光标右移n行</span><br><span class="line">　　\033[nD 光标左移n行</span><br><span class="line">　　\033[y;xH设置光标位置</span><br><span class="line">　　\033[2J 清屏</span><br><span class="line">　　\033[K 清除从光标到行尾的内容</span><br><span class="line">　　\33[s 保存光标位置</span><br><span class="line">　　\033[u 恢复光标位置</span><br><span class="line">　　\033[?25l 隐藏光标</span><br><span class="line">　　\033[?25h 显示光标</span><br><span class="line">　　</span><br><span class="line">用法例子  光标下移三行　　</span><br><span class="line">[root@zutuanxue ~]# <span class="built_in">echo</span> -e <span class="string">&quot;\033[0m today is fine \033[3B&quot;</span></span><br><span class="line"> today is fine </span><br></pre></td></tr></table></figure></div>

<h3 id="fruits-shop-sh"><a href="#fruits-shop-sh" class="headerlink" title="fruits_shop.sh"></a>fruits_shop.sh</h3><blockquote>
<p>需求：输出一个水果购物界面 fruits_shop.sh</p>
</blockquote>
<p>案例要点：</p>
<p>• echo输出缩进问题<br>• 字体颜色输出</p>
<div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment">#Author: www.zutuanxue.com</span></span><br><span class="line"><span class="comment">#Release: </span></span><br><span class="line"><span class="comment">#Description:打印水果超市列表</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;\t\t    \033[32m Fruits List \033[0m      \n&quot;</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;\t   \033[31mFruit\033[0m   \t\t \033[31mPrice\033[0m \t\t\033[31mWeight\033[0m&quot;</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;\t\033[34m1)Apple\t\t￥10.00\t\t1KG\033[0m&quot;</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;\t\033[34m2)Banana\t￥9.00\t\t1KG\033[0m&quot;</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;\t\033[34m3)Orange\t￥15.20\t\t1KG\033[0m&quot;</span></span><br></pre></td></tr></table></figure></div>

<h1 id="格式化输入"><a href="#格式化输入" class="headerlink" title="格式化输入"></a>格式化输入</h1><h2 id="read命令"><a href="#read命令" class="headerlink" title="read命令"></a>read命令</h2><p>默认接受键盘的输入，回车符代表输入结束</p>
<p>read命令选项</p>
<p>•	-p打印信息<br>•	-t限定时间<br>•	-s不回显<br>•	-n输入字符个数</p>
<div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@Centos8 shells]# <span class="built_in">cat</span> read_command_study.sh </span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line">clear</span><br><span class="line"><span class="comment"># echo -ne &quot;Login:&quot;</span></span><br><span class="line"><span class="comment"># read acc</span></span><br><span class="line"><span class="comment"># 打印信息</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">&quot;Login:&quot;</span> acc</span><br><span class="line"><span class="built_in">echo</span> -ne <span class="string">&quot;Password:&quot;</span></span><br><span class="line"><span class="comment"># 不回显，现实10s，限制输入6个字符</span></span><br><span class="line"><span class="built_in">read</span> -s -t10 -n6 <span class="built_in">pwd</span></span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;account:<span class="variable">$acc</span> \tpassword:<span class="variable">$pwd</span>&quot;</span></span><br><span class="line">[root@Centos8 shells]# bash read_command_study.sh </span><br><span class="line">Login:root</span><br><span class="line">Password:</span><br><span class="line">account:root    password:123456</span><br><span class="line">[root@Centos8 shells]# </span><br></pre></td></tr></table></figure></div>

<h3 id="login-sh"><a href="#login-sh" class="headerlink" title="login.sh"></a>login.sh</h3><div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[root@Centos8 shells]# <span class="built_in">cat</span> login.sh </span><br><span class="line"><span class="comment">#!/usr/bin/bash</span></span><br><span class="line"><span class="comment"># 模拟登陆</span></span><br><span class="line">clear</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Centos Linux 8 (Core)&quot;</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;Kernel &#x27;uname -r &#x27; an &#x27; uname -m &#x27;\n&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> -ne <span class="string">&quot;<span class="variable">$HOSTNAME</span> login: &quot;</span></span><br><span class="line"><span class="built_in">read</span> acc</span><br><span class="line"><span class="built_in">read</span> -p <span class="string">&quot;Password: &quot;</span> <span class="built_in">pwd</span></span><br><span class="line"></span><br><span class="line">[root@Centos8 shells]# bash login.sh </span><br><span class="line">Centos Linux 8 (Core)</span><br><span class="line">Kernel <span class="string">&#x27;uname -r &#x27;</span> an <span class="string">&#x27; uname -m &#x27;</span></span><br><span class="line"></span><br><span class="line">Centos8 login: root</span><br><span class="line">Password: 123456</span><br></pre></td></tr></table></figure></div>

<h1 id="shell变量"><a href="#shell变量" class="headerlink" title="shell变量"></a>shell变量</h1><h2 id="变量介绍"><a href="#变量介绍" class="headerlink" title="变量介绍"></a>变量介绍</h2><blockquote>
<p>在编程中，我们总有一些数据需要临时存放在在内存，以待后学使用时快速读出</p>
</blockquote>
<div class="code-container" data-rel="Txt"><figure class="iseeu highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">计算机的单位:</span><br><span class="line">1B=8bit</span><br><span class="line"></span><br><span class="line">1KB=1024B</span><br><span class="line">1MB=1024KB</span><br><span class="line">1GB=1024MB</span><br><span class="line">1TB=1024GB</span><br><span class="line">1PB=1024TB</span><br><span class="line">1EB=1024PB</span><br><span class="line">1ZB=1024EB</span><br><span class="line">...</span><br><span class="line">好了，已经够大了！当然还有YB、BB更大的单位，同样进制也是1024.</span><br><span class="line"></span><br><span class="line">1G=1024*1024*1024=1073741824B</span><br></pre></td></tr></table></figure></div>

<p>假如你将一个1B的字符存入内存，如何读出呢？有没有一种大海捞针的感觉啊！我们讨论一下计算机是如何通过让我们人类快速将数据存在内存，如何从内存中读出数据的。我们研究过变量后就明白了。</p>
<p>变量：变量是编程中最常用的一种临时在内存中存取数据的一种方式。</p>
<p>变量存取原理</p>
<div class="code-container" data-rel="Txt"><figure class="iseeu highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">关于内存的说明</span><br><span class="line">a、系统启动    内存被按照1B一个单位划分成N块     并且以十六进制为每一个空间编号</span><br><span class="line"></span><br><span class="line">b、内存跟踪表记录  使用和未使用的内存的地址编号</span><br><span class="line"></span><br><span class="line">c、内存申请    系统从未使用的内存中拿出一个或者一段连续空间  给你使用   同时在内存跟踪表中记录</span><br><span class="line">该地址被占用不在分给别人，同时在系统中建立映射机制   </span><br><span class="line">比如:变量名 STRING1=‘ABC’</span><br><span class="line"></span><br><span class="line">name&lt;==&gt;0x5</span><br><span class="line"></span><br><span class="line">d、释放内存</span><br><span class="line">从内存跟踪表中将记录删除，下次存数据直接覆盖</span><br></pre></td></tr></table></figure></div>

<p><a target="_blank" rel="noopener" href="https://postimg.cc/PC4k5dRk"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://i.postimg.cc/25pjT6d3/1600685218168-20220801230504-4cvzw6w.png"
                      alt="1600685218168-20220801230504-4cvzw6w.png"
                ></a></p>
<div class="code-container" data-rel="Txt"><figure class="iseeu highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">CHAR1(0x3)=A</span><br><span class="line">从图片可以看出，当我们在脚本中定义变量存值的时候，可以从以下方面看到变化：</span><br><span class="line">a、内存占用：如果存的是一个字符则占用1个字节，如果存的是字符串则是字符串的长度加1个字节长度(\0是一个</span><br><span class="line">特殊字符，代表字符串结束)。</span><br><span class="line"></span><br><span class="line">b、变量名与内存空间关系：计算机中会将对应的内存空间地址和变量名称绑定在一起，此时代表这段内存空间已经被</span><br><span class="line">程序占用，其他程序不可复用；然后将变量名对应的值存在对应内存</span><br><span class="line"></span><br></pre></td></tr></table></figure></div>

<h2 id="变量定义"><a href="#变量定义" class="headerlink" title="变量定义"></a>变量定义</h2><h3 id="什么时候需要定义变量？"><a href="#什么时候需要定义变量？" class="headerlink" title="什么时候需要定义变量？"></a>什么时候需要定义变量？</h3><p>如果某个内容需要多次使用，并且在代码中重复出现，那么可以用变量代表该内容。这样在修改内容的时候，仅仅需要修改变量的值。<br>在代码运作的过程中，可能会把某些命令的执行结果保存起来，后续代码需要使用这些结果，就可以直接使用这个变量。</p>
<h3 id="定义一个变量"><a href="#定义一个变量" class="headerlink" title="定义一个变量"></a>定义一个变量</h3><p>变量格式： 变量名&#x3D;值<br>在shell编程中的变量名和等号之间不能有空格。<br>变量名命名规则：</p>
<p>•	命名只能使用英文字母，数字和下划线，首个字符不能以数字开头。</p>
<p>•	中间不能有空格，可以使用下划线（_）。</p>
<p>•	不能使用标点符号。</p>
<p>•	不能使用bash里的关键字（可用help命令查看保留关键字）。</p>
<p>定义变量举例：<br>VAR1&#x3D;1 age&#x3D;18 整形 name&#x3D;‘baism’ 字符串 score&#x3D;88.8 浮点</p>
<div class="code-container" data-rel="Txt"><figure class="iseeu highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">注意：字符串要用单引号或双引号引起来</span><br><span class="line">建议变量名为大写，和命令区分</span><br><span class="line">_name</span><br></pre></td></tr></table></figure></div>

<p>定义变量演示：</p>
<div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">变量赋值，此种方法设置为本地变量</span><br><span class="line">[root@zutuanxue ~]# name=<span class="string">&quot;baism&quot;</span></span><br><span class="line">[root@zutuanxue ~]# school=<span class="string">&#x27;ayitula&#x27;</span></span><br><span class="line">[root@zutuanxue ~]# age=30</span><br><span class="line">[root@zutuanxue ~]# score=88.8</span><br></pre></td></tr></table></figure></div>

<h3 id="取消变量-unset"><a href="#取消变量-unset" class="headerlink" title="取消变量 unset"></a>取消变量 unset</h3><p>取消当前环境中的变量，如果是变量设置是保存在文件中，下次重启又会恢复</p>
<div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zutuanxue ~]# <span class="built_in">unset</span> name</span><br><span class="line">[root@zutuanxue ~]# <span class="built_in">echo</span> <span class="variable">$name</span></span><br></pre></td></tr></table></figure></div>

<h3 id="有类型变量-declare"><a href="#有类型变量-declare" class="headerlink" title="有类型变量 declare"></a>有类型变量 declare</h3><ul>
<li>i 整形变量 将变量看成整数</li>
<li>-r 只读变量 使变量只读 readonly,该变量的值无法改变，并且不能为unset</li>
<li>-x 全局变量标记变量通过环境导出 export</li>
<li>-a 索引数组 指定为索引数组（普通数组）；查看普通数组</li>
<li>-A 关联数组 指定为关联数组 查看关联数组</li>
</ul>
<div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[root@zutuanxue ~]# <span class="built_in">declare</span> -i num=<span class="string">&#x27;asa&#x27;</span></span><br><span class="line">[root@zutuanxue ~]# <span class="built_in">echo</span> <span class="variable">$num</span></span><br><span class="line">0</span><br><span class="line">[root@zutuanxue ~]# num=100</span><br><span class="line">[root@zutuanxue ~]# <span class="built_in">echo</span> <span class="variable">$num</span></span><br><span class="line">100</span><br><span class="line">[root@zutuanxue ~]# <span class="built_in">declare</span> -r num</span><br><span class="line">[root@zutuanxue ~]# <span class="built_in">echo</span> <span class="variable">$num</span></span><br><span class="line">100</span><br><span class="line">[root@zutuanxue~]# num=200</span><br><span class="line">-bash: num: 只读变量</span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# <span class="built_in">declare</span> -x</span><br><span class="line"><span class="built_in">declare</span> -x HISTCONTROL=<span class="string">&quot;ignoredups&quot;</span></span><br><span class="line"><span class="built_in">declare</span> -x HISTSIZE=<span class="string">&quot;1000&quot;</span></span><br><span class="line"><span class="built_in">declare</span> -x HOME=<span class="string">&quot;/root&quot;</span></span><br><span class="line"><span class="built_in">declare</span> -x HOSTNAME=<span class="string">&quot;Bai_Shuming&quot;</span></span><br><span class="line"><span class="built_in">declare</span> -x LANG=<span class="string">&quot;zh_CN.UTF-8&quot;</span></span><br><span class="line"><span class="built_in">declare</span> -x LESSOPEN=<span class="string">&quot;||/usr/bin/lesspipe.sh %s&quot;</span></span><br></pre></td></tr></table></figure></div>

<h2 id="变量分类"><a href="#变量分类" class="headerlink" title="变量分类"></a>变量分类</h2><h3 id="本地变量"><a href="#本地变量" class="headerlink" title="本地变量"></a>本地变量</h3><p>定义在脚本或当前终端中，脚本执行完毕或终端结束变量失效</p>
<h3 id="环境变量"><a href="#环境变量" class="headerlink" title="环境变量"></a>环境变量</h3><p>定义在用户家目录下的.bashrc或.bash_profile文件中，私有变量，只能本用户使用</p>
<ol>
<li>查看用户的环境变量 env( | wc -l)</li>
<li>查询当前用户的所有变量（临时变量与环境变量） set (| wc -l)</li>
<li>将当前环境变量变成环境变量 export</li>
</ol>
<div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">定义一个临时变量</span><br><span class="line">1、</span><br><span class="line">[root@zutuanxue tmp]# <span class="built_in">export</span> A=hello //临时将一个本地变量（临时变量）变成环境变量</span><br><span class="line">[root@zutuanxue tmp]# <span class="built_in">env</span>|grep ^A</span><br><span class="line">A=hello</span><br><span class="line">2、</span><br><span class="line">[root@zutuanxue tmp]# A=HELLO</span><br><span class="line">[root@zutuanxue tmp]# <span class="built_in">export</span> A</span><br><span class="line"></span><br><span class="line">3、定义一个永久生效变量：</span><br><span class="line">vim .bash_profile 或者 ~/.bashrc</span><br><span class="line">A=hello</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">关于<span class="built_in">export</span>说明</span><br><span class="line">用户登录时:</span><br><span class="line">1) 用户登录到Linux系统后，系统将启动一个用户shell。在这个shell中，可以使用shell命令或声明变量，也可以</span><br><span class="line">创建并运行 shell脚本程序。</span><br><span class="line"></span><br><span class="line">运行脚本时:</span><br><span class="line">2) 运行shell脚本程序时，系统将创建一个子shell。此时，系统中将有两个shell，一个是登录时系统启动的shell，</span><br><span class="line">另一个是系统为运行脚本程序创建的shell。当一个脚本程序运行完毕，它的脚本shell将终止，可以返回到执行该脚本</span><br><span class="line">之前的shell。</span><br><span class="line"></span><br><span class="line">从这种意义上来说，用户可以有许多 shell，每个shell都是由某个shell（称为父shell）派生的。</span><br><span class="line">在子shell中定义的变量只在该子shell内有效。如果在一个shell脚本程序中定义了一个变量，当该脚本程序运行时，</span><br><span class="line">这个定义的变量只是该脚本程序内的一个局部变量，其他的shell不能引用它，要使某个变量的值可以在其他shell中</span><br><span class="line">被改变，可以使用<span class="built_in">export</span>命令对已定义的变量进行输出。 </span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span>命令将使系统在创建每一个新的shell时定义这个变量的一个拷贝。这个过程称之为变量输出。</span><br><span class="line">[root@Centos8 ~]# _age=88</span><br><span class="line">[root@Centos8 ~]# _name=<span class="string">&#x27;baism&#x27;</span></span><br><span class="line">[root@Centos8 ~]# <span class="built_in">export</span> _name</span><br><span class="line">[root@Centos8 ~]# vim var_test.sh</span><br><span class="line">[root@Centos8 ~]# </span><br><span class="line">[root@Centos8 ~]# </span><br><span class="line">[root@Centos8 ~]# bash var_test.sh </span><br><span class="line"></span><br><span class="line">baism</span><br><span class="line">[root@Centos8 ~]# <span class="built_in">cat</span> var_test.sh </span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$_age</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$_name</span></span><br><span class="line"></span><br><span class="line">[root@Centos8 ~]# </span><br></pre></td></tr></table></figure></div>

<p>父shell与子shell</p>
<p><a target="_blank" rel="noopener" href="https://postimg.cc/SJbPcvWy"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://i.postimg.cc/bNZjfXr2/1600685550727-20220801230504-3dv909m.png"
                      alt="1600685550727-20220801230504-3dv909m.png"
                ></a></p>
<h3 id="全局变量"><a href="#全局变量" class="headerlink" title="全局变量"></a>全局变量</h3><p>使用export命令将本地变量输出为当前shell中的环境变量所有用户及shell都可以使用，可以在&#x2F;etc&#x2F;profile &#x2F;etc&#x2F;bashrc下永久定义</p>
<blockquote>
<p>打印全局变量 printenv</p>
</blockquote>
<h3 id="内置变量"><a href="#内置变量" class="headerlink" title="内置变量"></a>内置变量</h3><p>系统变量(内置bash中变量) ： shell本身已经固定好了它的名字和作用.</p>
<div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"> $?：上一条命令执行后返回的状态，当返回状态值为0时表示执行正常，非0值表示执行异常或出错</span><br><span class="line"> 若退出状态值为0，表示命令运行成功</span><br><span class="line"> 若退出状态值为127,表示<span class="built_in">command</span> not found</span><br><span class="line"> 若退出状态值为126,表示找到了该命令但无法执行（权限不够）</span><br><span class="line"> 若退出状态值为1&amp;2,表示没有那个文件或目录</span><br><span class="line"> </span><br><span class="line">$$：当前所在进程的进程号     <span class="built_in">echo</span> $$   eg：<span class="built_in">kill</span> -9 `<span class="built_in">echo</span> $$`  = <span class="built_in">exit</span>   退出当前会话</span><br><span class="line"></span><br><span class="line">$!：后台运行的最后一个进程号  （当前终端）  <span class="comment"># gedit &amp;</span></span><br><span class="line">!$ 调用最后一条命令历史中的参数</span><br><span class="line">!! 调用最后一条命令历史</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="variable">$#</span>：脚本后面接的参数的个数</span><br><span class="line">$*：脚本后面所有参数，参数当成一个整体输出，每一个变量参数之间以空格隔开</span><br><span class="line"><span class="variable">$@</span>: 脚本后面所有参数，参数是独立的，也是全部输出</span><br><span class="line"></span><br><span class="line"><span class="variable">$0</span>：当前执行的进程/程序名  <span class="built_in">echo</span> <span class="variable">$0</span>   </span><br><span class="line"><span class="variable">$1</span>~<span class="variable">$9</span> 位置参数变量</span><br><span class="line"><span class="variable">$&#123;10&#125;</span>~<span class="variable">$&#123;n&#125;</span> 扩展位置参数变量  第10个位置变量必须用&#123;&#125;大括号括起来</span><br><span class="line">./1.sh a b c</span><br><span class="line"></span><br><span class="line">[root@zutuanxue shell01]# <span class="built_in">cat</span> 2.sh </span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="comment">#xxxx</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;\$0 = <span class="variable">$0</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;\$# = <span class="variable">$#</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;\$* = $*&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;\$@ = <span class="variable">$@</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;\$1 = <span class="variable">$1</span>&quot;</span> </span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;\$2 = <span class="variable">$2</span>&quot;</span> </span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;\$3 = <span class="variable">$3</span>&quot;</span> </span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;\$11 = <span class="variable">$&#123;11&#125;</span>&quot;</span> </span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;\$12 = <span class="variable">$&#123;12&#125;</span>&quot;</span> </span><br><span class="line"></span><br><span class="line">了解$*和<span class="variable">$@</span>的区别：</span><br><span class="line">$* :表示将变量看成一个整体</span><br><span class="line"><span class="variable">$@</span> :表示变量是独立的</span><br><span class="line"></span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="string">&quot;<span class="variable">$@</span>&quot;</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;======我是分割线=======&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="string">&quot;$*&quot;</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">[root@zutuanxue shell01]# bash 3.sh a b c</span><br><span class="line">a</span><br><span class="line">b</span><br><span class="line">c</span><br><span class="line">======我是分割线=======</span><br><span class="line">a b c</span><br></pre></td></tr></table></figure></div>

<h3 id="变量比较"><a href="#变量比较" class="headerlink" title="变量比较"></a>变量比较</h3><p>变量总结说明：</p>
<ul>
<li>本地变量：当前用户自定义的变量。当前进程中有效，其他进程及当前进程的子进程无效。</li>
<li>环境变量：当前进程有效，并且能够被子进程调用。</li>
<li>全局变量：全局所有的用户和程序都能调用，且继承，新建的用户也默认能调用.</li>
<li>内置变量：shell本身已经固定好了它的名字和作用.</li>
</ul>
<table>
<thead>
<tr>
<th>变量类型</th>
<th>作用域</th>
<th>生命周期</th>
</tr>
</thead>
<tbody><tr>
<td>本地变量</td>
<td>当前shell环境(子shell不能用)</td>
<td>脚本结束或终端结束</td>
</tr>
<tr>
<td>环境变量</td>
<td>当前shell或者子shell</td>
<td>当前进程结束</td>
</tr>
<tr>
<td>全局变量</td>
<td>所有用户及shell环境</td>
<td>关机</td>
</tr>
<tr>
<td>内置变量</td>
<td>所有用户及shell环境</td>
<td>关机</td>
</tr>
</tbody></table>
<h2 id="变量管理"><a href="#变量管理" class="headerlink" title="变量管理"></a>变量管理</h2><h1 id="shell数组"><a href="#shell数组" class="headerlink" title="shell数组"></a>shell数组</h1><h2 id="数组介绍"><a href="#数组介绍" class="headerlink" title="数组介绍"></a>数组介绍</h2><h2 id="默认数组"><a href="#默认数组" class="headerlink" title="默认数组"></a>默认数组</h2><h2 id="关联数字"><a href="#关联数字" class="headerlink" title="关联数字"></a>关联数字</h2><h1 id="shell五大运算符"><a href="#shell五大运算符" class="headerlink" title="shell五大运算符"></a>shell五大运算符</h1><div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">1.	基本语法</span><br><span class="line"> 	$[运算式]</span><br><span class="line">2.	实例</span><br><span class="line"> 	计算（2+3)*4</span><br><span class="line"> 	[root@Centos8 shells]# s=$[(2+3)*4]</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">echo</span> <span class="variable">$s</span></span><br><span class="line">20</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">expr</span> 2 + 3</span><br><span class="line">5</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">echo</span> $[(2+3)*4]</span><br><span class="line">20</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">expr</span> 1+2</span><br><span class="line">1+2</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">expr</span> 1 + 2</span><br><span class="line">3</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">expr</span> 1 - 2</span><br><span class="line">-1</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">expr</span> 1 \* 2</span><br><span class="line">2</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">expr</span> 6 \/ 2</span><br><span class="line">3</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">expr</span> 6 \% 4</span><br><span class="line">2</span><br><span class="line">[root@Centos8 shells]# </span><br></pre></td></tr></table></figure></div>

<h2 id="赋值"><a href="#赋值" class="headerlink" title="赋值"></a>赋值</h2><h2 id="数学"><a href="#数学" class="headerlink" title="数学"></a>数学</h2><h2 id="比较"><a href="#比较" class="headerlink" title="比较"></a>比较</h2><h2 id="关系"><a href="#关系" class="headerlink" title="关系"></a>关系</h2><h2 id="文件类型比较"><a href="#文件类型比较" class="headerlink" title="文件类型比较"></a>文件类型比较</h2><h1 id="条件控制"><a href="#条件控制" class="headerlink" title="条件控制"></a>条件控制</h1><ol>
<li>基本语法<br>a. test condition<br>b. condition（注意condition前后要有空格）</li>
</ol>
<div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@Centos8 shells]# a=hello</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">echo</span> <span class="variable">$a</span></span><br><span class="line">hello</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">test</span> <span class="variable">$a</span>=hell</span><br><span class="line">(0为真 1为假)</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">test</span> <span class="variable">$a</span> = pell</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">echo</span> $?</span><br><span class="line">1</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">test</span> <span class="variable">$a</span> = hello</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">echo</span> $?</span><br><span class="line">0</span><br><span class="line">[root@Centos8 shells]# [ <span class="variable">$a</span> = Hello ]</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">echo</span> $?</span><br><span class="line">1</span><br><span class="line">[root@Centos8 shells]# [ <span class="variable">$a</span> = hello ]</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">echo</span> $?</span><br><span class="line">0</span><br><span class="line">[root@Centos8 shells]# </span><br></pre></td></tr></table></figure></div>

<ol start="2">
<li>常用判断条件<br>a.	两个整数之间比较<br>-eq等于（equal) -ne不等于（not equal)<br>-lt小于（less than) -le小于等于（less equal）<br>-gt大于（greater than) -ge大于等于（greater equal)<br>b.	文件权限的判断<br>-r 读的权限（read）<br>-w 写的权限（write）<br>-x 执行的权限（execute）<br>c.	文件类型的判断<br>-e 文件存在（existense）<br>-f 文件存在并且是一个常规的文件（file）<br>-d 文件存在并且是一个目录（directory）</li>
</ol>
<div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">[root@Centos8 shells]# [ 4 -eq 3 ]</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">echo</span> $?</span><br><span class="line">1</span><br><span class="line">[root@Centos8 shells]# [ 4 -ne 3 ]</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">echo</span> $?</span><br><span class="line">0</span><br><span class="line">[root@Centos8 shells]# [ 4 -lt 3 ]</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">echo</span> $?</span><br><span class="line">1</span><br><span class="line">[root@Centos8 shells]# [ 4 -gt 3 ]</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">echo</span> $?</span><br><span class="line">0</span><br><span class="line">[root@Centos8 shells]# [ 4 -le 3 ]</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">echo</span> $?</span><br><span class="line">1</span><br><span class="line">[root@Centos8 shells]# [ 4 -ge 3 ]</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">echo</span> $?</span><br><span class="line">0</span><br><span class="line">[root@Centos8 shells]# </span><br><span class="line"></span><br><span class="line">[root@Centos8 shells]# [ -r add.sh ]</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">echo</span> $?</span><br><span class="line">0</span><br><span class="line">[root@Centos8 shells]# [ -x add.sh ]</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">echo</span> $?</span><br><span class="line">0</span><br><span class="line">[root@Centos8 shells]# [ -w add.sh ]</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">echo</span> $?</span><br><span class="line">0</span><br><span class="line">[root@Centos8 shells]# </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@Centos8 shells]# [ -e add.sh ]</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">echo</span> $?</span><br><span class="line">0</span><br><span class="line">[root@Centos8 shells]# [ -f add.sh ]</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">echo</span> $?</span><br><span class="line">0</span><br><span class="line">[root@Centos8 shells]# [ -d add.sh ]</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">echo</span> $?</span><br><span class="line">1</span><br><span class="line">[root@Centos8 shells]# </span><br><span class="line"><span class="comment"># 多条件判断 &amp;&amp;且 || 或</span></span><br><span class="line">[root@Centos8 shells]#a=15</span><br><span class="line">[root@Centos8 shells]# [ <span class="variable">$a</span> -lt 20 ] &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> &lt; 20&quot;</span> || <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> &gt; 20&quot;</span></span><br><span class="line">15 &lt; 20</span><br><span class="line">[root@Centos8 shells]# a=159</span><br><span class="line">[root@Centos8 shells]# [ <span class="variable">$a</span> -lt 20 ] &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> &lt; 20&quot;</span> || <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> &gt; 20&quot;</span></span><br><span class="line">159 &gt; 20</span><br><span class="line">[root@Centos8 shells]# </span><br></pre></td></tr></table></figure></div>

<h1 id="流程控制"><a href="#流程控制" class="headerlink" title="流程控制"></a>流程控制</h1><h2 id="if"><a href="#if" class="headerlink" title="if"></a>if</h2><p>if</p>
<div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 单分支</span></span><br><span class="line"><span class="comment"># ;分割命令</span></span><br><span class="line"><span class="keyword">if</span> [条件判断];<span class="keyword">then</span></span><br><span class="line">    程序</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>[条件判断]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    程序</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 写法1</span></span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$1</span> = user1 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;welcome, <span class="variable">$1</span>&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 写法2</span></span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$1</span>&quot;</span>x = <span class="string">&quot;user1&quot;</span>x ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;welcome, <span class="variable">$1</span>&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">[root@Centos8 ~]# bash if01.sh user1</span><br><span class="line">welcome, user1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@Centos8 ~]# a=33</span><br><span class="line">[root@Centos8 ~]# <span class="keyword">if</span> [ <span class="variable">$a</span>  -gt 18 -a <span class="variable">$a</span> -lt 35 ]; <span class="keyword">then</span> <span class="built_in">echo</span> <span class="string">&quot;OK&quot;</span>; <span class="keyword">fi</span></span><br><span class="line">OK</span><br><span class="line">[root@Centos8 ~]# a=333</span><br><span class="line">[root@Centos8 ~]# <span class="keyword">if</span> [ <span class="variable">$a</span>  -gt 18 -a <span class="variable">$a</span> -lt 35 ]; <span class="keyword">then</span> <span class="built_in">echo</span> <span class="string">&quot;OK&quot;</span>; <span class="keyword">fi</span></span><br><span class="line">[root@Centos8 ~]# </span><br></pre></td></tr></table></figure></div>

<h3 id="if…else"><a href="#if…else" class="headerlink" title="if…else"></a>if…else</h3><div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[root@Centos8 ~]# ./if01.sh user1 33</span><br><span class="line">welcome, user1</span><br><span class="line">成年人</span><br><span class="line">[root@Centos8 ~]# <span class="built_in">cat</span> -n if01.sh </span><br><span class="line">     1  <span class="comment">#!/bin/bash</span></span><br><span class="line">     2  </span><br><span class="line">     3  <span class="comment"># $1 判断用户</span></span><br><span class="line">     4  <span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$1</span>&quot;</span>x = <span class="string">&quot;user1&quot;</span>x ]</span><br><span class="line">     5  <span class="keyword">then</span></span><br><span class="line">     6  <span class="built_in">echo</span> <span class="string">&quot;welcome, <span class="variable">$1</span>&quot;</span></span><br><span class="line">     7  <span class="keyword">fi</span></span><br><span class="line">     8  </span><br><span class="line">     9  <span class="keyword">if</span> [ <span class="variable">$2</span> -gt 18 ]</span><br><span class="line">    10  <span class="keyword">then</span></span><br><span class="line">    11      <span class="built_in">echo</span> <span class="string">&quot;成年人&quot;</span></span><br><span class="line">    12  <span class="keyword">else</span></span><br><span class="line">    13      <span class="built_in">echo</span> <span class="string">&quot;未成年人&quot;</span></span><br><span class="line">    14  <span class="keyword">fi</span></span><br><span class="line">[root@Centos8 ~]# ./if01.sh user1 3</span><br><span class="line">welcome, user1</span><br><span class="line">未成年人</span><br><span class="line">[root@Centos8 ~]# </span><br></pre></td></tr></table></figure></div>

<h3 id="if…elif-else"><a href="#if…elif-else" class="headerlink" title="if…elif..else"></a>if…elif..else</h3><div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">[root@Centos8 ~]# ./if01.sh user1 3 34</span><br><span class="line">welcome, user1</span><br><span class="line">未成年人</span><br><span class="line">E</span><br><span class="line">[root@Centos8 ~]# ./if01.sh user1 34 134</span><br><span class="line">welcome, user1</span><br><span class="line">成年人</span><br><span class="line">Error ! ! !</span><br><span class="line">[root@Centos8 ~]#</span><br><span class="line">[root@Centos8 ~]# <span class="built_in">cat</span> if01.sh </span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># $1 判断用户</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$1</span>&quot;</span>x = <span class="string">&quot;user1&quot;</span>x ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;welcome, <span class="variable">$1</span>&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># $2 判断用户是否成年</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$2</span> -gt 18 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;成年人&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;未成年人&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># $3 判断成绩等级</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$3</span> -ge 90 -a <span class="variable">$3</span> -le 100 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;A&quot;</span></span><br><span class="line"><span class="keyword">elif</span> [ <span class="variable">$3</span> -ge 80 -a <span class="variable">$3</span> -lt 90 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;B&quot;</span></span><br><span class="line"><span class="keyword">elif</span> [ <span class="variable">$3</span> -ge 70 -a <span class="variable">$3</span> -lt 80 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;C&quot;</span></span><br><span class="line"><span class="keyword">elif</span> [ <span class="variable">$3</span> -ge 60 -a <span class="variable">$3</span> -lt 70 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;D&quot;</span></span><br><span class="line"><span class="keyword">elif</span> [ <span class="variable">$3</span> -ge 0 -a <span class="variable">$3</span> -lt 60 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;E&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Error ! ! !&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">[root@Centos8 ~]# </span><br></pre></td></tr></table></figure></div>

<h3 id="if高级语法"><a href="#if高级语法" class="headerlink" title="if高级语法"></a>if高级语法</h3><h2 id="case"><a href="#case" class="headerlink" title="case"></a>case</h2><div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">1.	基本语法</span><br><span class="line"><span class="keyword">case</span> $变量值 <span class="keyword">in</span></span><br><span class="line"><span class="string">&quot;值1&quot;</span>)</span><br><span class="line">    如果变量值=值1，则执行程序1</span><br><span class="line">;;</span><br><span class="line"><span class="string">&quot;值2&quot;</span>)</span><br><span class="line">    如果变量值=值2，则执行程序2</span><br><span class="line">;;</span><br><span class="line"><span class="string">&quot;值3&quot;</span>)</span><br><span class="line">    如果变量值=值3，则执行程序3</span><br><span class="line">;;</span><br><span class="line">**</span><br><span class="line">    **其他分支**</span><br><span class="line">*)</span><br><span class="line">    如果变量值都不符合以上的值，执行此程序</span><br><span class="line">;;</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure></div>

<div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">2.	实例</span><br><span class="line">[root@Centos8 shells]# vim case01.sh</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">chmod</span> 744 case01.sh </span><br><span class="line">[root@Centos8 shells]# ./case01.sh 2 C</span><br><span class="line">two</span><br><span class="line">c</span><br><span class="line">[root@Centos8 shells]# ./case01.sh 2 F</span><br><span class="line">two</span><br><span class="line">other</span><br><span class="line">[root@Centos8 shells]# ./case01.sh 4 A</span><br><span class="line">other</span><br><span class="line">a</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">cat</span> case01.sh </span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># case用例</span></span><br><span class="line"><span class="keyword">case</span> <span class="variable">$1</span> <span class="keyword">in</span></span><br><span class="line">1)</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;one&quot;</span></span><br><span class="line">;;</span><br><span class="line">2)</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;two&quot;</span></span><br><span class="line">;;</span><br><span class="line">3)</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;three&quot;</span></span><br><span class="line">;;</span><br><span class="line">*)</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;other&quot;</span></span><br><span class="line">;;</span><br><span class="line"><span class="keyword">esac</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> <span class="variable">$2</span> <span class="keyword">in</span></span><br><span class="line"><span class="string">&quot;A&quot;</span>)</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;a&quot;</span></span><br><span class="line">;;</span><br><span class="line"><span class="string">&quot;B&quot;</span>)</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;b&quot;</span></span><br><span class="line">;;</span><br><span class="line"><span class="string">&quot;C&quot;</span>)</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;c&quot;</span></span><br><span class="line">;;</span><br><span class="line">*)</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;other&quot;</span></span><br><span class="line">;;</span><br><span class="line"><span class="keyword">esac</span></span><br><span class="line"></span><br><span class="line">[root@Centos8 shells]# </span><br></pre></td></tr></table></figure></div>

<h2 id="for"><a href="#for" class="headerlink" title="for"></a>for</h2><h3 id="for循环介绍"><a href="#for循环介绍" class="headerlink" title="for循环介绍"></a>for循环介绍</h3><blockquote>
<p>基本语法</p>
</blockquote>
<div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在双小括号的情况下，里面可以直接用数学上的符号，</span></span><br><span class="line"><span class="comment"># 如果是$[]内的话，需要用-lt小于 -le小于等于 -gt大于 -ge大于等于</span></span><br><span class="line"><span class="keyword">for</span>((初始值;循环控制条件;变量变化))</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    程序</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure></div>

<ul>
<li>实例1</li>
</ul>
<div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@Centos8 shells]# ./for01.sh 100</span><br><span class="line">5050</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">cat</span> for01.sh </span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># for循环从1加到100</span></span><br><span class="line"><span class="keyword">for</span>(( i=<span class="number">1</span>; i&lt;= <span class="variable">$1</span>; i++ ))</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">sum</span>=$[ <span class="variable">$sum</span> + <span class="variable">$i</span> ];</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$sum</span></span><br><span class="line">[root@Centos8 shells]# ./for01.sh 1000</span><br><span class="line">500500</span><br><span class="line">[root@Centos8 shells]# </span><br></pre></td></tr></table></figure></div>

<ul>
<li>实例2</li>
</ul>
<div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@Centos8 shells]# vim for02.sh</span><br><span class="line">[root@Centos8 shells]# ./for02.sh </span><br><span class="line">linux</span><br><span class="line">windows</span><br><span class="line">mac</span><br><span class="line">unix</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">cat</span> for02.sh </span><br><span class="line"><span class="comment">#/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># for</span></span><br><span class="line"><span class="keyword">for</span> os <span class="keyword">in</span> linux windows mac unix</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$os</span>&quot;</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">[root@Centos8 shells]# </span><br><span class="line">[root@Centos8 shells]# <span class="keyword">for</span> i <span class="keyword">in</span> &#123;1..100&#125;;<span class="keyword">do</span> sum1=$[ <span class="variable">$sum1</span>+<span class="variable">$i</span> ];<span class="keyword">done</span>;<span class="built_in">echo</span> <span class="variable">$sum1</span></span><br><span class="line">5050</span><br><span class="line">[root@Centos8 shells]# </span><br></pre></td></tr></table></figure></div>

<h3 id="区别"><a href="#区别" class="headerlink" title="$* $@区别"></a>$* $@区别</h3><blockquote>
<p>$* $@都表示传递给函数或脚本的所有参数。在不加引号的情况下，输出的参数都是一样的$1,$2,,,。加了引号之后$*表示所有的参数输出为一个整体，$@还是依旧依次输出$1,$2,,,</p>
</blockquote>
<div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">[root@Centos8 shells]# <span class="built_in">chmod</span> 744 for03.sh </span><br><span class="line">[root@Centos8 shells]# ./for03.sh a b c d e</span><br><span class="line">=======$*========</span><br><span class="line">a</span><br><span class="line">b</span><br><span class="line">c</span><br><span class="line">d</span><br><span class="line">e</span><br><span class="line">=======<span class="variable">$@</span>========</span><br><span class="line">a</span><br><span class="line">b</span><br><span class="line">c</span><br><span class="line">d</span><br><span class="line">e</span><br><span class="line">=======$*========</span><br><span class="line">a b c d e</span><br><span class="line">=======<span class="variable">$@</span>========</span><br><span class="line">a</span><br><span class="line">b</span><br><span class="line">c</span><br><span class="line">d</span><br><span class="line">e</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">cat</span> for03.sh </span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;=======$*========&#x27;</span></span><br><span class="line"><span class="keyword">for</span> parmeter <span class="keyword">in</span> $*</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$parmeter</span>&quot;</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;=======$@========&#x27;</span></span><br><span class="line"><span class="keyword">for</span> parmeter <span class="keyword">in</span> <span class="variable">$@</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$parmeter</span>&quot;</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;=======$*========&#x27;</span></span><br><span class="line"><span class="keyword">for</span> parmeter <span class="keyword">in</span> <span class="string">&quot;$*&quot;</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$parmeter</span>&quot;</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;=======$@========&#x27;</span></span><br><span class="line"><span class="keyword">for</span> parmeter <span class="keyword">in</span> <span class="string">&quot;<span class="variable">$@</span>&quot;</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$parmeter</span>&quot;</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">[root@Centos8 shells]# </span><br></pre></td></tr></table></figure></div>

<h2 id="while"><a href="#while" class="headerlink" title="while"></a>while</h2><h3 id="while语法"><a href="#while语法" class="headerlink" title="while语法"></a>while语法</h3><div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> [条件判断式]</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    程序</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure></div>

<h3 id="while实战"><a href="#while实战" class="headerlink" title="while实战"></a>while实战</h3><div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@Centos8 shells]# bash while.sh 100</span><br><span class="line">5050</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">cat</span> while.sh </span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># while循环</span></span><br><span class="line">a=1</span><br><span class="line"><span class="keyword">while</span> [ <span class="variable">$a</span> -le <span class="variable">$1</span> ]</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">sum</span>=$[ <span class="variable">$sum</span> + <span class="variable">$a</span> ]</span><br><span class="line">    a=$[<span class="variable">$a</span> + 1]</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$sum</span></span><br><span class="line">[root@Centos8 shells]# bash while.sh 10</span><br><span class="line">55</span><br><span class="line">[root@Centos8 shells]# </span><br></pre></td></tr></table></figure></div>

<h3 id="while实战-1"><a href="#while实战-1" class="headerlink" title="while实战"></a>while实战</h3><h2 id="util"><a href="#util" class="headerlink" title="util"></a>util</h2><h3 id="util介绍"><a href="#util介绍" class="headerlink" title="util介绍"></a>util介绍</h3><h3 id="util语法"><a href="#util语法" class="headerlink" title="util语法"></a>util语法</h3><h3 id="case介绍"><a href="#case介绍" class="headerlink" title="case介绍"></a>case介绍</h3><h3 id="case语法"><a href="#case语法" class="headerlink" title="case语法"></a>case语法</h3><h3 id="特殊变量"><a href="#特殊变量" class="headerlink" title="特殊变量"></a>特殊变量</h3><h1 id="shell函数"><a href="#shell函数" class="headerlink" title="shell函数"></a>shell函数</h1><h2 id="函数介绍"><a href="#函数介绍" class="headerlink" title="函数介绍"></a>函数介绍</h2><h2 id="函数语法"><a href="#函数语法" class="headerlink" title="函数语法"></a>函数语法</h2><h2 id="函数应用"><a href="#函数应用" class="headerlink" title="函数应用"></a>函数应用</h2><h2 id="系统函数"><a href="#系统函数" class="headerlink" title="系统函数"></a>系统函数</h2><h3 id="date"><a href="#date" class="headerlink" title="date"></a>date</h3><div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@Centos8 shells]# bash cmd01.sh qwe</span><br><span class="line">qwe_log_1649663196</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">cat</span> cmd01.sh </span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="comment"># 系统函数date</span></span><br><span class="line">filename=<span class="string">&quot;<span class="variable">$1</span>&quot;</span>_log_$(<span class="built_in">date</span> +%s)</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$filename</span>&quot;</span></span><br><span class="line">[root@Centos8 shells]# </span><br></pre></td></tr></table></figure></div>

<h3 id="basename"><a href="#basename" class="headerlink" title="basename"></a>basename</h3><blockquote>
<p>获取当前文件名，针对最后一个”&#x2F;“之后的内容</p>
</blockquote>
<div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">[root@Centos8 shells]# <span class="built_in">basename</span> /root/shells/parmeter.sh </span><br><span class="line">parmeter.sh</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">basename</span> /root/shells/parmeter.sh .sh</span><br><span class="line">parmeter</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@Centos8 shells]# bash parmeter.sh a b c d</span><br><span class="line">=====<span class="variable">$n</span>=====</span><br><span class="line">ScripName：parmeter.sh</span><br><span class="line">ScriptName: parmeter</span><br><span class="line">1st parmeter: a</span><br><span class="line">2ed parmeter: b</span><br><span class="line">=====<span class="variable">$#</span>=====</span><br><span class="line">parmeter numbers 4</span><br><span class="line">=====$*=====</span><br><span class="line">a b c d</span><br><span class="line">=====<span class="variable">$@</span>=====</span><br><span class="line">a b c d</span><br><span class="line">=====$*=====</span><br><span class="line">a b c d</span><br><span class="line">=====<span class="variable">$@</span>=====</span><br><span class="line">a b c d</span><br><span class="line">[root@Centos8 shells]# vim parmeter.sh</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">cat</span> parmeter.sh </span><br><span class="line"><span class="comment">#/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 系统内置函数</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;=====$0=====&#x27;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;ScripName：<span class="variable">$0</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;ScriptName: <span class="subst">$(basename $0 .sh)</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;1st parmeter: <span class="variable">$1</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> 2ed parmeter: <span class="variable">$2</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;=====$#=====&#x27;</span></span><br><span class="line"><span class="built_in">echo</span> parmeter numbers <span class="variable">$#</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;=====$*=====&#x27;</span></span><br><span class="line"><span class="built_in">echo</span> $*</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;=====$@=====&#x27;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$@</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;=====$*=====&#x27;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;$*&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;=====$@=====&#x27;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$@</span>&quot;</span></span><br><span class="line">[root@Centos8 shells]# </span><br></pre></td></tr></table></figure></div>

<h3 id="diranaem"><a href="#diranaem" class="headerlink" title="diranaem"></a>diranaem</h3><blockquote>
<p>获取当前路径，针对最后一个”&#x2F;“之前的内容</p>
</blockquote>
<div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">[root@Centos8 shells]# <span class="built_in">dirname</span> /root/shells/parmeter.sh </span><br><span class="line">/root/shells</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">dirname</span> ./parmeter.sh </span><br><span class="line">.</span><br><span class="line">[root@Centos8 shells]# </span><br><span class="line"></span><br><span class="line">[root@Centos8 shells]# /root/shells/parmeter.sh a b c</span><br><span class="line">=====<span class="variable">$n</span>=====</span><br><span class="line">ScripName：/root/shells/parmeter.sh</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ScriptName: parmeter</span><br><span class="line">ScriptPath: /root/shells</span><br><span class="line">1st parmeter: a</span><br><span class="line">2ed parmeter: b</span><br><span class="line">=====<span class="variable">$#</span>=====</span><br><span class="line">parmeter numbers 3</span><br><span class="line">=====$*=====</span><br><span class="line">a b c</span><br><span class="line">=====<span class="variable">$@</span>=====</span><br><span class="line">a b c</span><br><span class="line">=====$*=====</span><br><span class="line">a b c</span><br><span class="line">=====<span class="variable">$@</span>=====</span><br><span class="line">a b c</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">cat</span> parmeter.sh </span><br><span class="line"><span class="comment">#/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 系统内置函数</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;=====$n=====&#x27;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;ScripName：<span class="variable">$0</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$baename</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$dirname</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;ScriptName: <span class="subst">$(basename $0 .sh)</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;ScriptPath: <span class="subst">$(cd $(dirname $0)</span>; pwd)&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;1st parmeter: <span class="variable">$1</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> 2ed parmeter: <span class="variable">$2</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;=====$#=====&#x27;</span></span><br><span class="line"><span class="built_in">echo</span> parmeter numbers <span class="variable">$#</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;=====$*=====&#x27;</span></span><br><span class="line"><span class="built_in">echo</span> $*</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;=====$@=====&#x27;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$@</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;=====$*=====&#x27;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;$*&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;=====$@=====&#x27;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$@</span>&quot;</span></span><br><span class="line">[root@Centos8 shells]# </span><br></pre></td></tr></table></figure></div>

<h3 id="自定义函数"><a href="#自定义函数" class="headerlink" title="自定义函数"></a>自定义函数</h3><div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">[<span class="keyword">function</span>] funname[()]</span><br><span class="line">&#123;</span><br><span class="line">    Aaction</span><br><span class="line">    [<span class="built_in">return</span> int;]</span><br><span class="line">&#125;</span><br><span class="line">```sh</span><br><span class="line"></span><br><span class="line">1. 再调用函数地方之前，先声明函数，shell脚本是逐行运行，不会像其他语言一样先编译</span><br><span class="line">2. 函数返回值，只能通过$?系统变量获得，可以下显示加：<span class="built_in">return</span>返回，如果不加将以最后一条执行命令结果作为返回值。<span class="built_in">return</span>后跟数值（0-255）</span><br><span class="line"></span><br><span class="line">```sh</span><br><span class="line">[root@Centos8 shells]# vim function.sh</span><br><span class="line">[root@Centos8 shells]# ./function.sh </span><br><span class="line">请输入第一个整数：123</span><br><span class="line">请输入第一个整数：321</span><br><span class="line">444</span><br><span class="line">和：444</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">cat</span> function.sh </span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># function add</span></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">add</span></span>()&#123;</span><br><span class="line">    s=$[<span class="variable">$1</span> + <span class="variable">$2</span>]</span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$s</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">&quot;请输入第一个整数：&quot;</span> a</span><br><span class="line"></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">&quot;请输入第一个整数：&quot;</span> b</span><br><span class="line"></span><br><span class="line">add <span class="variable">$a</span> <span class="variable">$b</span></span><br><span class="line"><span class="built_in">sum</span>=$(add <span class="variable">$a</span> <span class="variable">$b</span>)</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;和：&quot;</span><span class="variable">$sum</span></span><br><span class="line"></span><br><span class="line">[root@Centos8 shells]# </span><br></pre></td></tr></table></figure></div>

<h1 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h1><h2 id="正则表达式介绍"><a href="#正则表达式介绍" class="headerlink" title="正则表达式介绍"></a>正则表达式介绍</h2><p>常规匹配</p>
<div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@Centos8 shells]# <span class="built_in">cat</span> /etc/passwd | grep root</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">operator:x:11:0:operator:/root:/sbin/nologin</span><br><span class="line">[root@Centos8 shells]# </span><br></pre></td></tr></table></figure></div>

<h2 id="特殊字符"><a href="#特殊字符" class="headerlink" title="特殊字符"></a>特殊字符</h2><div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ^ 匹配一行的开头，匹配所有以s开头的</span></span><br><span class="line">[root@Centos8 shells]# <span class="built_in">cat</span> /etc/passwd | grep ^s</span><br><span class="line"><span class="built_in">sync</span>:x:5:0:<span class="built_in">sync</span>:/sbin:/bin/sync</span><br><span class="line">shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown</span><br><span class="line">systemd-coredump:x:999:997:systemd Core Dumper:/:/sbin/nologin</span><br><span class="line">systemd-resolve:x:193:193:systemd Resolver:/:/sbin/nologin</span><br><span class="line">setroubleshoot:x:995:991::/var/lib/setroubleshoot:/sbin/nologin</span><br><span class="line">sssd:x:992:988:User <span class="keyword">for</span> sssd:/:/sbin/nologin</span><br><span class="line">sshd:x:74:74:Privilege-separated SSH:/var/empty/sshd:/sbin/nologin</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">cat</span> /etc/passwd | grep ^ss</span><br><span class="line">sssd:x:992:988:User <span class="keyword">for</span> sssd:/:/sbin/nologin</span><br><span class="line">sshd:x:74:74:Privilege-separated SSH:/var/empty/sshd:/sbin/nologin</span><br><span class="line">[root@Centos8 shells]# </span><br><span class="line"></span><br><span class="line"><span class="comment"># $ 匹配一行的结束，以t结束的</span></span><br><span class="line">[root@Centos8 shells]# <span class="built_in">cat</span> /etc/passwd | grep t$</span><br><span class="line">halt:x:7:0:halt:/sbin:/sbin/halt</span><br><span class="line">[root@Centos8 shells]# </span><br><span class="line"></span><br><span class="line"><span class="comment"># ^$ 匹配空行</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># . 匹配任意一个字符，匹配r开头，t结尾，中间有任意两个字符的数据</span></span><br><span class="line">[root@Centos8 shells]# <span class="built_in">cat</span> /etc/passwd | grep r..t</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">operator:x:11:0:operator:/root:/sbin/nologin</span><br><span class="line">ftp:x:14:50:FTP User:/var/ftp:/sbin/nologin</span><br><span class="line">[root@Centos8 shells]# </span><br><span class="line"></span><br><span class="line"><span class="comment"># * 不单独使用，和前一个字符一起使用，表示匹配前一个字符0次或多次</span></span><br><span class="line">[root@Centos8 shells]# <span class="built_in">cat</span> /etc/passwd | grep ro.t</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">operator:x:11:0:operator:/root:/sbin/nologin</span><br><span class="line">[root@Centos8 shells]# </span><br><span class="line"></span><br><span class="line"><span class="comment"># .*匹配任意字符的任意次，也就是任意字符串；匹配以a开头，bash结尾，中间是任意字符串的数据</span></span><br><span class="line">[root@Centos8 shells]# <span class="built_in">cat</span> /etc/passwd | grep ^a.*bash$</span><br><span class="line">admin:x:1000:1000::/home/admin:/bin/bash</span><br><span class="line">[root@Centos8 shells]# </span><br><span class="line"></span><br><span class="line"><span class="comment"># []表示字符区间，匹配某个范围内的一个字符</span></span><br><span class="line">[6,8]   匹配6或8</span><br><span class="line">[0-9]   匹配0-9之间任意一个数</span><br><span class="line">[0-9]*  匹配任意长度的数字字符串</span><br><span class="line">[a-z]   匹配a-z之间任意一个</span><br><span class="line">[a-z]*  匹配任意长度的a-z的字符串</span><br><span class="line">[a-c,e-f]   匹配a-c,e-f各一个组成的字符串</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">cat</span> /etc/passwd | grep r[a-z]t</span><br><span class="line">operator:x:11:0:operator:/root:/sbin/nologin</span><br><span class="line">sshd:x:74:74:Privilege-separated SSH:/var/empty/sshd:/sbin/nologin</span><br><span class="line">rngd:x:990:986:Random Number Generator Daemon:/var/lib/rngd:/sbin/nologin</span><br><span class="line"></span><br><span class="line"><span class="comment"># \ 转义字符</span></span><br><span class="line">[root@Centos8 shells]# <span class="built_in">cat</span> /root/shells/tar01.sh | grep <span class="string">&#x27;\$&#x27;</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$#</span> -ne 1 ]</span><br><span class="line"><span class="keyword">if</span> [ -d <span class="variable">$1</span> ]</span><br><span class="line">DIR_NAME=$(<span class="built_in">basename</span> <span class="variable">$1</span>)</span><br><span class="line">DIR_PATH=$(<span class="built_in">cd</span> $(<span class="built_in">dirname</span> <span class="variable">$1</span>); <span class="built_in">pwd</span>)</span><br><span class="line">DATE=$(<span class="built_in">date</span> +%y%m%d)</span><br><span class="line">FILE=archive_<span class="variable">$&#123;DIR_NAME&#125;</span>_<span class="variable">$DATE</span>.tar.gz</span><br><span class="line">DEST=/root/File/<span class="variable">$FILE</span></span><br><span class="line">tar -czf <span class="variable">$DEST</span> <span class="variable">$DIR_PATH</span>/<span class="variable">$DIR_NAME</span></span><br><span class="line"><span class="keyword">if</span> [ $? -eq 0 ]</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&#x27;归档文件为：$DEST&#x27;</span></span><br><span class="line">[root@Centos8 shells]# <span class="built_in">cat</span> /root/shells/tar01.sh | grep /<span class="string">&#x27;\$&#x27;</span></span><br><span class="line">DEST=/root/File/<span class="variable">$FILE</span></span><br><span class="line">tar -czf <span class="variable">$DEST</span> <span class="variable">$DIR_PATH</span>/<span class="variable">$DIR_NAME</span></span><br><span class="line">[root@Centos8 shells]# </span><br><span class="line"></span><br><span class="line"><span class="comment"># + 一次或多次</span></span><br><span class="line"><span class="comment"># ？ 零次或一次</span></span><br></pre></td></tr></table></figure></div>

<h2 id="POSIX字符"><a href="#POSIX字符" class="headerlink" title="POSIX字符"></a>POSIX字符</h2><h1 id="shell对文件的操作"><a href="#shell对文件的操作" class="headerlink" title="shell对文件的操作"></a>shell对文件的操作</h1><h2 id="shell对文件操作介绍"><a href="#shell对文件操作介绍" class="headerlink" title="shell对文件操作介绍"></a>shell对文件操作介绍</h2><h2 id="sed编辑器"><a href="#sed编辑器" class="headerlink" title="sed编辑器"></a>sed编辑器</h2><pre><code>sed编辑器被称作流编辑器，与普通的交互式文本编辑器截然不同。在交互式文本编辑器（比如vim）中，可以用键盘命令交互式的插入、删除或替换文本数据。流编辑器则是根据事先设计好的一组规则编辑数据流。
</code></pre>
<blockquote>
<p>sed命令的格式如下</p>
</blockquote>
<div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed [-hnV][-e&lt;script&gt;][-f&lt;script文件&gt;][文本文件]</span><br></pre></td></tr></table></figure></div>

<h3 id="参数说明"><a href="#参数说明" class="headerlink" title="参数说明"></a>参数说明</h3><ul>
<li>-e script或–expression&#x3D;script 以选项中指定的script来处理输入的文本文件。</li>
<li>-f script文件–file&#x3D;&lt;script文件&gt; 以选项中指定的script文件来处理输入的文本文件。</li>
<li>-h或–help 显示帮助。</li>
<li>-n或–quiet或–silent 仅显示script处理后的结果。</li>
<li>-V或–version 显示版本信息。</li>
</ul>
<h3 id="动作说明"><a href="#动作说明" class="headerlink" title="动作说明"></a>动作说明</h3><ul>
<li>a ：新增， a 的后面可以接字串，而这些字串会在新的一行出现(目前的下一行)～</li>
<li>c ：取代， c 的后面可以接字串，这些字串可以取代 n1,n2 之间的行！</li>
<li>d ：删除，因为是删除啊，所以 d 后面通常不接任何东东；</li>
<li>i ：插入， i 的后面可以接字串，而这些字串会在新的一行出现(目前的上一行)；</li>
<li>p ：打印，亦即将某个选择的数据印出。通常 p 会与参数 sed -n 一起运行～</li>
<li>s ：取代，可以直接进行取代的工作哩！通常这个 s 的动作可以搭配正则表达式！例如 1,20s&#x2F;old&#x2F;new&#x2F;g 就是啦！</li>
</ul>
<ol>
<li>s 取代</li>
</ol>
<blockquote>
<p>使用替换（s）命令，用斜线间指定的第二个字符串“AA”替换第一个字符串“world”</p>
</blockquote>
<div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@cfff3ad6bb5a shells]# <span class="built_in">pwd</span></span><br><span class="line">/home/shells</span><br><span class="line">[root@cfff3ad6bb5a shells]# <span class="built_in">echo</span> <span class="string">&quot;hello world&quot;</span>      </span><br><span class="line">hello world</span><br><span class="line">[root@cfff3ad6bb5a shells]# <span class="built_in">echo</span> <span class="string">&quot;hello world&quot;</span> | sed <span class="string">&#x27;s/world/AA/&#x27;</span></span><br><span class="line">hello AA</span><br><span class="line">[root@cfff3ad6bb5a shells]# </span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>使用替换（s）命令，同时对数据做多处修改</p>
</blockquote>
<ul>
<li>注意：sed编辑器不会修改文本文件的数据，他只是将修改后的数据发送到STDOUT，如果查看原来的文件还是原先内容</li>
</ul>
<div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@cfff3ad6bb5a shells]# <span class="built_in">cat</span> data1.txt </span><br><span class="line">The quick brown fox jumps over the lazy dog</span><br><span class="line">The quick brown fox jumps over the lazy dog</span><br><span class="line">The quick brown fox jumps over the lazy dog</span><br><span class="line">The quick brown fox jumps over the lazy dog</span><br><span class="line">[root@cfff3ad6bb5a shells]# sed <span class="string">&#x27;s/dog/cat/&#x27;</span> data1.txt </span><br><span class="line">The quick brown fox jumps over the lazy <span class="built_in">cat</span></span><br><span class="line">The quick brown fox jumps over the lazy <span class="built_in">cat</span></span><br><span class="line">The quick brown fox jumps over the lazy <span class="built_in">cat</span></span><br><span class="line">The quick brown fox jumps over the lazy <span class="built_in">cat</span></span><br><span class="line">[root@cfff3ad6bb5a shells]# <span class="built_in">cat</span> data1.txt </span><br><span class="line">The quick brown fox jumps over the lazy dog</span><br><span class="line">The quick brown fox jumps over the lazy dog</span><br><span class="line">The quick brown fox jumps over the lazy dog</span><br><span class="line">The quick brown fox jumps over the lazy dog</span><br><span class="line">[root@cfff3ad6bb5a shells]# </span><br></pre></td></tr></table></figure></div>

<ol start="2">
<li>以行为单位的新增</li>
</ol>
<blockquote>
<p>使用新增（a）命令在指定行新增数据，文件的第2行后添加一行，并将结果输出到标准输出</p>
</blockquote>
<div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@cfff3ad6bb5a shells]# sed -e 2a\test-add-new-line data1.txt </span><br><span class="line">The quick brown fox jumps over the lazy dog</span><br><span class="line">The quick brown fox jumps over the lazy dog</span><br><span class="line">test-add-new-line</span><br><span class="line">The quick brown fox jumps over the lazy dog</span><br><span class="line">The quick brown fox jumps over the lazy dog</span><br><span class="line">[root@cfff3ad6bb5a shells]#</span><br></pre></td></tr></table></figure></div>

<ol start="3">
<li>以行为单位的删除</li>
</ol>
<blockquote>
<p>使用删除（d）命令删除指定行；将2至4行删除；将第2行删除</p>
</blockquote>
<div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@cfff3ad6bb5a shells]# <span class="built_in">nl</span> data1.txt </span><br><span class="line">     1  The quick brown fox jumps over the lazy dog</span><br><span class="line">     2  The quick brown fox jumps over the lazy dog</span><br><span class="line">     3  The quick brown fox jumps over the lazy dog</span><br><span class="line">     4  The quick brown fox jumps over the lazy dog</span><br><span class="line">[root@cfff3ad6bb5a shells]# <span class="built_in">nl</span> data1.txt | sed <span class="string">&#x27;2,4d&#x27;</span></span><br><span class="line">     1  The quick brown fox jumps over the lazy dog</span><br><span class="line">[root@cfff3ad6bb5a shells]# <span class="built_in">nl</span> data1.txt | sed <span class="string">&#x27;2d&#x27;</span></span><br><span class="line">     1  The quick brown fox jumps over the lazy dog</span><br><span class="line">     3  The quick brown fox jumps over the lazy dog</span><br><span class="line">     4  The quick brown fox jumps over the lazy dog</span><br><span class="line">[root@cfff3ad6bb5a shells]# </span><br></pre></td></tr></table></figure></div>

<ol start="4">
<li>以行为单位的替换与显示</li>
</ol>
<blockquote>
<p>将2-4行替换为NO 2-4 number</p>
</blockquote>
<div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@cfff3ad6bb5a shells]# <span class="built_in">nl</span> data1.txt </span><br><span class="line">     1  The quick brown fox jumps over the lazy dog</span><br><span class="line">     2  The quick brown fox jumps over the lazy dog</span><br><span class="line">     3  The quick brown fox jumps over the lazy dog</span><br><span class="line">     4  The quick brown fox jumps over the lazy dog</span><br><span class="line">[root@cfff3ad6bb5a shells]# <span class="built_in">nl</span> data1.txt | sed <span class="string">&#x27;2,4c NO 2-4 number&#x27;</span></span><br><span class="line">     1  The quick brown fox jumps over the lazy dog</span><br><span class="line">NO 2-4 number</span><br><span class="line">[root@cfff3ad6bb5a shells]# </span><br><span class="line"></span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>仅列出文件第2-4行</p>
</blockquote>
<div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@cfff3ad6bb5a shells]# <span class="built_in">nl</span> data1.txt | sed -n <span class="string">&#x27;2,4p&#x27;</span></span><br><span class="line">     2  The quick brown fox jumps over the lazy dog</span><br><span class="line">     3  The quick brown fox jumps over the lazy dog</span><br><span class="line">     4  The quick brown fox jumps over the lazy dog</span><br><span class="line">[root@cfff3ad6bb5a shells]# </span><br></pre></td></tr></table></figure></div>

<div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure></div>

<div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure></div>

<h2 id="sed小技巧"><a href="#sed小技巧" class="headerlink" title="sed小技巧"></a>sed小技巧</h2><h1 id="shell对输出流的处理"><a href="#shell对输出流的处理" class="headerlink" title="shell对输出流的处理"></a>shell对输出流的处理</h1><h2 id="cut"><a href="#cut" class="headerlink" title="cut"></a>cut</h2><p>在文件中负责剪切数据的</p>
<ol>
<li><p>基本用法</p>
<p>cut [选项参数] filename<br>说明：默认分隔符是制表符</p>
</li>
<li><p>选项参数</p>
</li>
</ol>
<table>
<thead>
<tr>
<th>选项参数</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>-f</td>
<td>列号，提取第几列</td>
</tr>
<tr>
<td>-d</td>
<td>分隔符，按照指定分隔符分割列，默认是制表符”\t“</td>
</tr>
<tr>
<td>-c</td>
<td>按字符进行分割，后加n表示去第几列，比如-c 2</td>
</tr>
</tbody></table>
<ol start="3">
<li>实例</li>
</ol>
<div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 数据准备</span></span><br><span class="line">[root@Centos8 shells]# <span class="built_in">cat</span> cut01.sh </span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="comment"># 文本处理工具 cut </span></span><br><span class="line">dong shen</span><br><span class="line">guan zhen</span><br><span class="line">lai lai</span><br><span class="line">le le</span><br><span class="line">[root@Centos8 shells]# </span><br><span class="line"><span class="comment"># 1、切割第一列 （按空格切割，提取第1列）</span></span><br><span class="line">[root@Centos8 shells]# <span class="built_in">cut</span> -d <span class="string">&quot; &quot;</span> -f 1 cut01.sh </span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">dong</span><br><span class="line">guan</span><br><span class="line">lai</span><br><span class="line">le</span><br><span class="line">[root@Centos8 shells]# </span><br><span class="line"><span class="comment"># 2、切割第2，3列 （按空格切割，提取第2，3列）</span></span><br><span class="line">[root@Centos8 shells]# <span class="built_in">cut</span> -d <span class="string">&quot; &quot;</span> -f 2,3 cut01.sh </span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line">文本处理工具 <span class="built_in">cut</span></span><br><span class="line">shen</span><br><span class="line">zhen</span><br><span class="line">lai</span><br><span class="line">le</span><br><span class="line"><span class="comment"># 切割第1，6，7列 （查找以bash结尾的文件，按“:”切割，提取第1，6，7列）</span></span><br><span class="line">[root@Centos8 shells]# <span class="built_in">cat</span> /etc/passwd | grep bash$</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">admin:x:1000:1000::/home/admin:/bin/bash</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">cat</span> /etc/passwd | grep bash$ | <span class="built_in">cut</span> -d <span class="string">&quot;:&quot;</span> -f 1,6,7</span><br><span class="line">root:/root:/bin/bash</span><br><span class="line">admin:/home/admin:/bin/bash</span><br><span class="line"><span class="comment"># 切割第1，5-最后1列 （查找以bash结尾的文件，按“:”切割，提取第1，5-最后1列）</span></span><br><span class="line">[root@Centos8 shells]# <span class="built_in">cat</span> /etc/passwd | grep bash$ | <span class="built_in">cut</span> -d <span class="string">&quot;:&quot;</span> -f 1,5-</span><br><span class="line">root:root:/root:/bin/bash</span><br><span class="line">admin::/home/admin:/bin/bash</span><br><span class="line">[root@Centos8 shells]# </span><br><span class="line"></span><br><span class="line"><span class="comment"># 3、切割ifconfig获得的IP地址（之所以-f 10是因为上一步获取到的inet开头之前有8个空格）</span></span><br><span class="line">[root@Centos8 shells]# ifconfig eth0 | grep netmask</span><br><span class="line">        inet 172.17.9.131  netmask 255.255.192.0  broadcast 172.17.63.255</span><br><span class="line">[root@Centos8 shells]# ifconfig eth0 | grep netmask | <span class="built_in">cut</span> -d <span class="string">&quot; &quot;</span> -f 10</span><br><span class="line">172.17.9.131</span><br><span class="line">[root@Centos8 shells]# </span><br></pre></td></tr></table></figure></div>

<h2 id="awk"><a href="#awk" class="headerlink" title="awk"></a>awk</h2><blockquote>
<p>强大的文本分析工具，吧文件逐行读入，以空格为默认分隔符将每行切片，切开的部分再进行处理，awk本质上就是gawk</p>
</blockquote>
<div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@Centos8 shells]# <span class="built_in">which</span> awk</span><br><span class="line">/usr/bin/awk</span><br><span class="line">[root@Centos8 shells]# ll /usr/bin | grep awk</span><br><span class="line">lrwxrwxrwx. 1 root root          4 5月  11 2019 awk -&gt; gawk</span><br><span class="line">-rwxr-xr-x. 1 root root     698520 5月  11 2019 gawk</span><br><span class="line">[root@Centos8 shells]# </span><br></pre></td></tr></table></figure></div>

<ol>
<li>基本用法</li>
</ol>
<ul>
<li>awk [选项参数] ‘&#x2F;pattern1&#x2F;{action1} &#x2F;pattern2{action2}…’ filenaem</li>
<li>pattern：表示 awk在数据中查找的内容就是匹配模式</li>
<li>action：在找到匹配内容时所执行的一系列命令</li>
</ul>
<ol start="2">
<li><p>选项参数</p>
<p>-F 指定输入文件分隔符<br>-v 赋值一个用户定义变量</p>
</li>
<li><p>实例</p>
</li>
</ol>
<div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 数据准备</span></span><br><span class="line">[root@Centos8 shells]# <span class="built_in">cp</span> /etc/passwd passwd</span><br><span class="line">[root@Centos8 shells]# ll</span><br><span class="line">-rw-r--r-- 1 root root    1582 4月  12 11:08 passwd1</span><br><span class="line">[root@Centos8 shells]# </span><br><span class="line"></span><br><span class="line"><span class="comment"># 1、搜索passwd 文件以root关键字开头的所有行，并输出改行的第1，7列搜索passwd 文件以root关键字开头的所有行，并输出改行的第1，7列</span></span><br><span class="line">[root@Centos8 shells]# <span class="built_in">cat</span> passwd | awk -F <span class="string">&quot;:&quot;</span> <span class="string">&#x27;/^root/ &#123;print $7&#125;&#x27;</span></span><br><span class="line">/bin/bash</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">cat</span> passwd | awk -F <span class="string">&quot;:&quot;</span> <span class="string">&#x27;/^root/ &#123;print $1&#125;&#x27;</span></span><br><span class="line">root</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">cat</span> passwd | awk -F <span class="string">&quot;:&quot;</span> <span class="string">&#x27;/^root/ &#123;print $1 $7&#125;&#x27;</span></span><br><span class="line">root/bin/bash</span><br><span class="line">[root@Centos8 shells]# </span><br><span class="line"></span><br><span class="line"><span class="comment"># </span></span><br><span class="line">[root@Centos8 shells]# <span class="built_in">cat</span> passwd | grep ^root | <span class="built_in">cut</span> -d <span class="string">&quot;:&quot;</span> -f 1,7</span><br><span class="line">root:/bin/bash</span><br><span class="line">[root@Centos8 shells]# </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2、搜索passwd 文件以root关键字开头的所有行，并输出该行的第1，7列搜索passwd 文件以root关键字开头的所有行，并输出改行的第1，7列，中间以，分割</span></span><br><span class="line">[root@Centos8 shells]# <span class="built_in">cat</span> passwd | awk -F <span class="string">&quot;:&quot;</span> <span class="string">&#x27;/^root/ &#123;print $1&quot;,&quot;$7&#125;&#x27;</span></span><br><span class="line">root,/bin/bash</span><br><span class="line">[root@Centos8 shells]# </span><br><span class="line"></span><br><span class="line"><span class="comment"># 3、显示passwd的第1，7列，在开始加入&quot;user,shell&quot;，末尾 加入&quot;end of file!&quot;</span></span><br><span class="line">[root@Centos8 shells]# <span class="built_in">cat</span> passwd | awk -F <span class="string">&quot;:&quot;</span> <span class="string">&#x27;BEGIN&#123;print &quot;user,shell&quot;&#125;/^s/&#123;print $1&quot;,&quot;$7&#125; END&#123;print &quot;end of file!&quot;&#125;&#x27;</span></span><br><span class="line">user,shell</span><br><span class="line"><span class="built_in">sync</span>,/bin/sync</span><br><span class="line">shutdown,/sbin/shutdown</span><br><span class="line">systemd-coredump,/sbin/nologin</span><br><span class="line">systemd-resolve,/sbin/nologin</span><br><span class="line">setroubleshoot,/sbin/nologin</span><br><span class="line">sssd,/sbin/nologin</span><br><span class="line">sshd,/sbin/nologin</span><br><span class="line">end of file!</span><br><span class="line"><span class="comment"># 在passwd中搜索以down结尾的文件，显示passwd的第1，7列，在开始加入&quot;Begin of File!&quot;，末尾 加入&quot;End of File!&quot;</span></span><br><span class="line">[root@Centos8 shells]# awk -F <span class="string">&quot;:&quot;</span> <span class="string">&#x27;BEGIN&#123;print &quot;Begin of File!&quot;&#125;/down$/&#123;print $1&quot;-&quot;$7&#125; END&#123;print &quot;End of File!&quot;&#125;&#x27;</span> passwd</span><br><span class="line">Begin of File!</span><br><span class="line">shutdown-/sbin/shutdown</span><br><span class="line">End of File!</span><br><span class="line">[root@Centos8 shells]# </span><br><span class="line"></span><br><span class="line"><span class="comment"># 在passwd的id中加1再输出</span></span><br><span class="line">[root@Centos8 shells]# <span class="built_in">cat</span> passwd | awk -F <span class="string">&quot;:&quot;</span> <span class="string">&#x27;&#123;print $3&#125;&#x27;</span></span><br><span class="line">0</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">cat</span> passwd | awk -F <span class="string">&quot;:&quot;</span> <span class="string">&#x27;&#123;print $3+1&#125;&#x27;</span></span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">cat</span> passwd | awk -F <span class="string">&quot;:&quot;</span> -v i=2 <span class="string">&#x27;&#123;print $3+i&#125;&#x27;</span></span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">[root@Centos8 shells]# </span><br></pre></td></tr></table></figure></div>

<ol start="4">
<li><p>awk内置变量</p>
<p>FILENAME 文件名<br>NR 已读的纪录数（行号）<br>NF 浏览记录的域的个数（切割后，列的个数）</p>
</li>
</ol>
<div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">[root@Centos8 shells]# awk -F <span class="string">&quot;:&quot;</span> <span class="string">&#x27;&#123;print &quot;FileName: &quot;FILENAME &quot; 行号：&quot;NR &quot; 列数：&quot;NF&#125;&#x27;</span> passwd</span><br><span class="line">FileName: passwd 行号：1 列数：7</span><br><span class="line">FileName: passwd 行号：2 列数：7</span><br><span class="line">FileName: passwd 行号：3 列数：7</span><br><span class="line">FileName: passwd 行号：4 列数：7</span><br><span class="line">FileName: passwd 行号：5 列数：7</span><br><span class="line">FileName: passwd 行号：6 列数：7</span><br><span class="line">FileName: passwd 行号：7 列数：7</span><br><span class="line">FileName: passwd 行号：8 列数：7</span><br><span class="line">FileName: passwd 行号：9 列数：7</span><br><span class="line">FileName: passwd 行号：10 列数：7</span><br><span class="line">FileName: passwd 行号：11 列数：7</span><br><span class="line">FileName: passwd 行号：12 列数：7</span><br><span class="line">FileName: passwd 行号：13 列数：7</span><br><span class="line">FileName: passwd 行号：14 列数：7</span><br><span class="line">FileName: passwd 行号：15 列数：7</span><br><span class="line">FileName: passwd 行号：16 列数：7</span><br><span class="line">FileName: passwd 行号：17 列数：7</span><br><span class="line">FileName: passwd 行号：18 列数：7</span><br><span class="line">FileName: passwd 行号：19 列数：7</span><br><span class="line">FileName: passwd 行号：20 列数：7</span><br><span class="line">FileName: passwd 行号：21 列数：7</span><br><span class="line">FileName: passwd 行号：22 列数：7</span><br><span class="line">FileName: passwd 行号：23 列数：7</span><br><span class="line">FileName: passwd 行号：24 列数：7</span><br><span class="line">FileName: passwd 行号：25 列数：7</span><br><span class="line">FileName: passwd 行号：26 列数：7</span><br><span class="line">FileName: passwd 行号：27 列数：7</span><br><span class="line">FileName: passwd 行号：28 列数：7</span><br><span class="line">FileName: passwd 行号：29 列数：7</span><br><span class="line">FileName: passwd 行号：30 列数：7</span><br><span class="line">[root@Centos8 shells]# </span><br><span class="line"></span><br><span class="line"><span class="comment"># 查出所有的空行的行号</span></span><br><span class="line">[root@Centos8 shells]# ifconfig | awk <span class="string">&#x27;/^$/&#123;print &quot;行号：&quot; NR&#125;&#x27;</span></span><br><span class="line">行号：9</span><br><span class="line">行号：18</span><br><span class="line">[root@Centos8 shells]# </span><br><span class="line">[root@Centos8 shells]# ifconfig | grep -n ^$ | <span class="built_in">cut</span> -f 1 -d <span class="string">&quot;:&quot;</span></span><br><span class="line">9</span><br><span class="line">18</span><br><span class="line">[root@Centos8 shells]# ifconfig | grep -n ^$</span><br><span class="line">9:</span><br><span class="line">18:</span><br><span class="line">[root@Centos8 shells]# </span><br><span class="line"></span><br><span class="line"><span class="comment"># 切割IP</span></span><br><span class="line">[root@Centos8 shells]# ifconfig eth0 | awk <span class="string">&#x27;/netmask/&#123;print $2&#125;&#x27;</span></span><br><span class="line">172.17.9.131</span><br><span class="line">[root@Centos8 shells]# </span><br></pre></td></tr></table></figure></div>

<h1 id="Shell案例"><a href="#Shell案例" class="headerlink" title="Shell案例"></a>Shell案例</h1><h2 id="归档文件"><a href="#归档文件" class="headerlink" title="归档文件"></a>归档文件</h2><blockquote>
<p>实际生产中往往需要对重要数据进行归档备份<br>需求：实现一个每天对指定目录归档备份的脚本输入一个目录名称，末尾不带&#x2F;，将目录下的所有文件按天归档，并将归档日期附加在归档文件名上，放在&#x2F;root&#x2F;archive下<br>归档命令 tar<br>后面加上-c表示归档，加上-z表示压缩，得到的文件名后缀为.tar.gz</p>
</blockquote>
<div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建定时任务</span></span><br><span class="line">[root@Centos8 shells]# </span><br><span class="line">[root@Centos8 shells]# crontab -l</span><br><span class="line">no crontab <span class="keyword">for</span> root</span><br><span class="line">[root@Centos8 shells]# crontab -e</span><br><span class="line">[root@Centos8 shells]# crontab -l</span><br><span class="line">55 18 * * * /root/shells/tar01.sh /root/shells</span><br><span class="line">[root@Centos8 shells]# </span><br><span class="line">[root@Centos8 shells]# <span class="built_in">cat</span> tar01.sh </span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 判断输入的参数是否唯一，否则提示错误</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$#</span> -ne 1 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;参数不唯一！请输入一个归档目录名：&quot;</span></span><br><span class="line">    <span class="built_in">exit</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 从参数中获取目录名称</span></span><br><span class="line"><span class="comment"># -d 判断是否为目录</span></span><br><span class="line"><span class="keyword">if</span> [ -d <span class="variable">$1</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;目录不存在！&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取路径名</span></span><br><span class="line">DIR_NAME=$(<span class="built_in">basename</span> <span class="variable">$1</span>)</span><br><span class="line">DIR_PATH=$(<span class="built_in">cd</span> $(<span class="built_in">dirname</span> <span class="variable">$1</span>); <span class="built_in">pwd</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取当前日期</span></span><br><span class="line">DATE=$(<span class="built_in">date</span> +%y%m%d)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义生成的归档文件名称</span></span><br><span class="line">FILE=archive_<span class="variable">$&#123;DIR_NAME&#125;</span>_<span class="variable">$DATE</span>.tar.gz</span><br><span class="line">DEST=/root/backup/File/<span class="variable">$FILE</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 开始归档目录文件</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;开始归档。。。&#x27;</span></span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"></span><br><span class="line">tar -czf <span class="variable">$DEST</span> <span class="variable">$DIR_PATH</span>/<span class="variable">$DIR_NAME</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ $? -eq 0 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&#x27;归档成功！&#x27;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&#x27;归档文件为：&#x27;</span><span class="variable">$DEST</span></span><br><span class="line">    <span class="built_in">echo</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&#x27;归档出现问题！！！&#x27;</span></span><br><span class="line">    <span class="built_in">echo</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">[root@Centos8 shells]# </span><br></pre></td></tr></table></figure></div>

<h2 id="删除前一天的归档文件"><a href="#删除前一天的归档文件" class="headerlink" title="删除前一天的归档文件"></a>删除前一天的归档文件</h2><div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># After the backup is complete, check whether the number of files is correct </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$#</span> -ne 2 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">&quot;Args error! Please input 2 args: &quot;</span></span><br><span class="line">	<span class="built_in">exit</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Check whether is a directory</span></span><br><span class="line"><span class="keyword">if</span> [ -d <span class="variable">$1</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">	<span class="built_in">echo</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">&quot;1st arg is not a directory!&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">TOTAL=$(<span class="built_in">ls</span> -l <span class="variable">$1</span> |grep ^-|<span class="built_in">wc</span> -l)</span><br><span class="line"><span class="comment"># echo $TOTAL</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$TOTAL</span> -ne <span class="variable">$2</span> ];</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">&quot;The number of backup file is error!&quot;</span></span><br><span class="line">	<span class="built_in">exit</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">	<span class="built_in">echo</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">NOW_DATE=$(<span class="built_in">date</span> +%y%m%d)</span><br><span class="line">BEF_DATE=$((NOW_DATE-<span class="number">1</span>))</span><br><span class="line"></span><br><span class="line">find <span class="variable">$1</span> -<span class="built_in">type</span> f -name <span class="string">&quot;*<span class="variable">$BEF_DATE</span>*&quot;</span> -delete</span><br></pre></td></tr></table></figure></div>

<h2 id="正则匹配手机号"><a href="#正则匹配手机号" class="headerlink" title="正则匹配手机号"></a>正则匹配手机号</h2><div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@Centos8 shells]# <span class="built_in">echo</span> <span class="string">&quot;13212345678&quot;</span> | grep ^1[356789][0-9][0-9][0-9][0-9][0-9][0-9][0-7][0-9][0-9]$</span><br><span class="line">13212345678</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">echo</span> <span class="string">&quot;15212345678&quot;</span> | grep ^1[356789][0-9][0-9][0-9][0-9][0-9][0-9][0-7][0-9][0-9]$ </span><br><span class="line">15212345678</span><br><span class="line">[root@Centos8 shells]# <span class="built_in">echo</span> <span class="string">&quot;11212345678&quot;</span> | grep ^1[356789][0-9][0-9][0-9][0-9][0-9][0-9][0-7][0-9][0-9]$ </span><br><span class="line">[root@Centos8 shells]# </span><br><span class="line"></span><br><span class="line">[root@Centos8 shells]# <span class="built_in">echo</span> <span class="string">&quot;15212345678&quot;</span> | grep -E ^1[356789][0-9]&#123;9&#125;</span><br><span class="line">15212345678</span><br><span class="line">[root@Centos8 shells]# </span><br></pre></td></tr></table></figure></div>

<h2 id="发送消息"><a href="#发送消息" class="headerlink" title="发送消息"></a>发送消息</h2><blockquote>
<p>利用Linux的mesg和write向其他用户发送消息<br>需求：实现向某个用户快速发送消息，输入用户名作为第一个参数，后面直接跟要发送的消息。脚本需要检测用户是否登录在系统中，是否打开消息功能，以及当前发送消息是否为空</p>
</blockquote>
<div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 确认mesg是否开启</span></span><br><span class="line">[root@Centos8 ~]# mesg n</span><br><span class="line">[root@Centos8 ~]# mesg</span><br><span class="line">是 n</span><br><span class="line"><span class="comment"># 关闭</span></span><br><span class="line">[root@Centos8 ~]# mesg n</span><br><span class="line"><span class="comment"># + 打开 - 关闭</span></span><br><span class="line">[root@Centos8 ~]# <span class="built_in">who</span> -T</span><br><span class="line">root     - pts/0        2022-04-12 16:27 (45.116.153.139)</span><br><span class="line">admin    + pts/1        2022-04-12 16:58 (45.116.153.139)</span><br><span class="line">[root@Centos8 ~]# mesg</span><br><span class="line">是 n</span><br><span class="line">[root@Centos8 ~]# <span class="built_in">who</span> -T</span><br><span class="line">root     - pts/0        2022-04-12 16:27 (45.116.153.139)</span><br><span class="line">admin    + pts/1        2022-04-12 16:58 (45.116.153.139)</span><br><span class="line"><span class="comment"># 打开</span></span><br><span class="line">[root@Centos8 ~]# mesg y</span><br><span class="line">[root@Centos8 ~]# <span class="built_in">who</span> -T</span><br><span class="line">root     + pts/0        2022-04-12 16:27 (45.116.153.139)</span><br><span class="line">admin    + pts/1        2022-04-12 16:58 (45.116.153.139)</span><br><span class="line">[root@Centos8 ~]# </span><br><span class="line"></span><br><span class="line">[root@Centos8 ~]# <span class="built_in">cat</span> /root/shells/send_message.sh </span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="comment"># mesg 发送消息</span></span><br><span class="line"><span class="comment"># 查看用户是否登录</span></span><br><span class="line">LOGIN_USER=$(<span class="built_in">who</span> | grep -i -m 1 <span class="variable">$1</span> | awk <span class="string">&#x27;&#123;print $1&#125;&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ -z <span class="variable">$LOGIN_USER</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$1</span> 不在线！！！&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;脚本退出。。。&quot;</span></span><br><span class="line">    <span class="built_in">exit</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 用户是否开启mesg功能</span></span><br><span class="line">IS_ALLOWED=$(<span class="built_in">who</span> -T | grep -i -m 1 <span class="variable">$1</span> | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ <span class="string">&quot;+&quot;</span> != <span class="variable">$IS_ALLOWED</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$1</span> 没有开启消息功能！！！&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;脚本退出。。。&quot;</span></span><br><span class="line">    <span class="built_in">exit</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 确认是否有消息发送</span></span><br><span class="line"><span class="keyword">if</span> [ -z <span class="variable">$2</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;没有消息发送！！！&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;脚本退出！！&quot;</span></span><br><span class="line">    <span class="built_in">exit</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 从参数中获取要发送的消息</span></span><br><span class="line">MESSAGE=$(<span class="built_in">echo</span> $* | <span class="built_in">cut</span> -d <span class="string">&quot; &quot;</span> -f 2-)</span><br><span class="line"><span class="comment"># 获取用户登录终端</span></span><br><span class="line">USER_TERMINAL=$(<span class="built_in">who</span> | grep -i -m 1 <span class="variable">$1</span> | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 写入要发送的消息</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$MESSAGE</span> | write <span class="variable">$LOGIN_USER</span> <span class="variable">$USER_TERMINAL</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ $? -ne 0 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;发送成功！&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;发送失败！&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line"></span><br><span class="line">[root@Centos8 ~]# </span><br></pre></td></tr></table></figure></div>

<h2 id="计算程序消耗时间并自动输出日志到指定目录"><a href="#计算程序消耗时间并自动输出日志到指定目录" class="headerlink" title="计算程序消耗时间并自动输出日志到指定目录"></a>计算程序消耗时间并自动输出日志到指定目录</h2><div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;================================================================================&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;================================== Strat Test ==================================&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;================================================================================&quot;</span></span><br><span class="line"><span class="comment"># 获取执行脚本文件名称长度</span></span><br><span class="line">len=<span class="variable">$&#123;#string[0]&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 截取子字符串（去除文件名的.sh后缀）</span></span><br><span class="line">name=<span class="variable">$0</span></span><br><span class="line">exec_name=<span class="variable">$&#123;name:0:len-3&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 脚本执行结果存放文件名</span></span><br><span class="line">result_name=<span class="string">&quot;<span class="variable">$exec_name</span>-<span class="variable">$1</span>.log&quot;</span></span><br><span class="line"><span class="comment"># 创建脚本执行结果存放文件</span></span><br><span class="line"><span class="built_in">touch</span> <span class="string">&quot;./results/<span class="variable">$&#123;result_name:2&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 结果文件绝对路径</span></span><br><span class="line">abs_path=`<span class="built_in">pwd</span>`<span class="string">&quot;/results&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 开始测试</span></span><br><span class="line">start_ime=`<span class="built_in">date</span> +%Y%m%d-%H:%M:%S`</span><br><span class="line">start_time_s=`<span class="built_in">date</span> +%s`</span><br><span class="line"></span><br><span class="line"><span class="comment"># docker search 镜像名 查找镜像</span></span><br><span class="line">docker search <span class="variable">$1</span> | <span class="built_in">tee</span> ./results/<span class="variable">$&#123;result_name:2&#125;</span></span><br><span class="line"></span><br><span class="line">end_time=`<span class="built_in">date</span> +%Y%m%d-%H:%M:%S`</span><br><span class="line">end_time_s=`<span class="built_in">date</span> +%s`</span><br><span class="line"></span><br><span class="line">total_tiime=$[ <span class="variable">$end_time_s</span> - <span class="variable">$start_time_s</span> ]</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;================================================================================&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;===================================  End Test  =================================&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;================================================================================&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$start_ime</span> ---&gt; <span class="variable">$end_time</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Total:<span class="variable">$total_tiime</span> seconds&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;The results are saved in &quot;</span> <span class="variable">$&#123;abs_path&#125;</span><span class="variable">$&#123;result_name:1&#125;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;================================================================================&quot;</span></span><br></pre></td></tr></table></figure></div>

<h2 id="在程序运行前和运行后输出时间"><a href="#在程序运行前和运行后输出时间" class="headerlink" title="在程序运行前和运行后输出时间"></a>在程序运行前和运行后输出时间</h2><div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> start: `<span class="built_in">date</span>`</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> ((i=<span class="number">1</span>;i&lt;=<span class="number">10</span>;i++))</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">&quot;The next number is <span class="variable">$i</span>&quot;</span></span><br><span class="line">	<span class="built_in">pwd</span></span><br><span class="line">	<span class="built_in">sleep</span> 1</span><br><span class="line">	<span class="built_in">ls</span></span><br><span class="line">	<span class="built_in">sleep</span> 1</span><br><span class="line">	<span class="built_in">pwd</span></span><br><span class="line">	<span class="built_in">echo</span> $(<span class="built_in">date</span> +<span class="string">&#x27;%Y-%m-%d %H:%M:%S&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> end: `<span class="built_in">date</span>`</span><br></pre></td></tr></table></figure></div>

<h2 id="为当前目录下的文件包括子文件夹更改权限"><a href="#为当前目录下的文件包括子文件夹更改权限" class="headerlink" title="为当前目录下的文件包括子文件夹更改权限"></a>为当前目录下的文件包括子文件夹更改权限</h2><div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Specify the Author</span></span><br><span class="line"><span class="comment"># Author:Sun</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Specify the create date</span></span><br><span class="line"><span class="comment"># Created:2022/11/13 10:37</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Specify the script`s version</span></span><br><span class="line"><span class="comment"># Release:1.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Add Description</span></span><br><span class="line"><span class="comment"># Scription Description:Change the permissions of current directory and subdirectories</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># -c或——changes    # 效果类似“-v”参数，但仅回报更改的部分，如果文件权限已经改变，显示其操作信息；</span></span><br><span class="line"><span class="comment"># -f或--quiet或——silent # 操作过程中不显示任何错误信息；</span></span><br><span class="line"><span class="comment"># -R或——recursive  # 递归处理，将指令目录下的所有文件及子目录一并处理；</span></span><br><span class="line"><span class="comment"># -v或——verbose    # 显示命令运行时的详细执行过程；</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">chmod</span> -Rc 777 <span class="variable">$1</span>/*</span><br></pre></td></tr></table></figure></div>

<h2 id="从当前目录下复制文件并重命名"><a href="#从当前目录下复制文件并重命名" class="headerlink" title="从当前目录下复制文件并重命名"></a>从当前目录下复制文件并重命名</h2><div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">cp</span> ./a-script-demo.sh ./test<span class="variable">$1</span>.sh</span><br></pre></td></tr></table></figure></div>

<h2 id="从源文件夹复制到目录文件中"><a href="#从源文件夹复制到目录文件中" class="headerlink" title="从源文件夹复制到目录文件中"></a>从源文件夹复制到目录文件中</h2><div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">cp</span> -r <span class="variable">$1</span> <span class="variable">$2</span></span><br></pre></td></tr></table></figure></div>

<h2 id="删除指定文件夹下同一后缀的所有文件"><a href="#删除指定文件夹下同一后缀的所有文件" class="headerlink" title="删除指定文件夹下同一后缀的所有文件"></a>删除指定文件夹下同一后缀的所有文件</h2><div class="code-container" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># delete all file like *.out from /data/docker/vscode-server/C/Posix</span></span><br><span class="line">find <span class="variable">$1</span> -name/ <span class="string">&quot;*.out&quot;</span> -delete</span><br></pre></td></tr></table></figure></div>

<h1 id="Shell-实战"><a href="#Shell-实战" class="headerlink" title="Shell 实战"></a>Shell 实战</h1><h2 id="cron-定时任务配置"><a href="#cron-定时任务配置" class="headerlink" title="cron 定时任务配置"></a>cron 定时任务配置</h2><div class="code-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">docker conainers stop and start</span></span><br><span class="line">0 1 * * * /data/shell/docker_stop.sh vscode-server</span><br><span class="line">0 7 * * * /data/shell/docker_start.sh vscode-server</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Periodic delete file</span></span><br><span class="line">40 12,23 * * * /data/shell/tar_delete.sh /root/backup/File /data</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Periodic backup file</span></span><br><span class="line">30 12,23 * * * /data/shell/tar_delete.sh /root/backup/File /data</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">delete all file like *.out from /data/docker/vscode-server/C/Posix</span></span><br><span class="line">30 6-23 * * * /data/shell/delete_suf.sh /data/docker/vscode-server</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">chmod</span> 777 <span class="keyword">for</span> /data</span></span><br><span class="line">0 */4 * * * /data/shell/chmod_permission.sh /data/docker</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">update auth to ubuntu</span></span><br><span class="line">0 3 * * * /data/shell/update_ubuntu_auth.sh</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">sync</span> file from <span class="built_in">source</span> <span class="built_in">dir</span> to target <span class="built_in">dir</span></span></span><br><span class="line">25 6-23 * * * /data/shell/sync_files.sh /data/docker/vscode-server/Hexo/HexoGithub/source/_posts/ data/docker/vscode-server/Hexo/ldspdvsun.gitlab.io/source/_posts/</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">sync</span> <span class="built_in">local</span> and remote repo</span></span><br><span class="line">55 6-23 * * * /data/shell/sync_local_remote_repo.sh /data/docker/vscode-server/Hexo/HexoGithub/</span><br><span class="line">55 6-23 * * * /data/shell/sync_local_remote_repo.sh /data/docker/vscode-server/Hexo/ldspdvsun.gitlab.io/</span><br></pre></td></tr></table></figure></div>

<h2 id="容器定时关闭与启动"><a href="#容器定时关闭与启动" class="headerlink" title="容器定时关闭与启动"></a>容器定时关闭与启动</h2><div class="code-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">root@10-7-153-197:/data/shell# cat docker_stop.sh</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">docker stop $1</span><br><span class="line">root@10-7-153-197:/data/shell# cat docker_start.sh</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">docker start $1</span><br><span class="line">root@10-7-153-197:/data/shell#</span><br><span class="line"></span><br></pre></td></tr></table></figure></div>

<h2 id="定时备份与删除文件"><a href="#定时备份与删除文件" class="headerlink" title="定时备份与删除文件"></a>定时备份与删除文件</h2><div class="code-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">root@10-7-153-197:/data/shell# cat tar_delete.sh</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">设置备份目录</span></span><br><span class="line">backup_dir=$1</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">获取当前日期和时间</span></span><br><span class="line">now=$(date +&quot;%Y-%m-%d_%H-%M-%S&quot;)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">备份文件</span></span><br><span class="line">if [ $(date +%H) -eq 23 ] &amp;&amp; [ $(date +%M) -eq 30 ]; then</span><br><span class="line">    tar -czvf &quot;$&#123;backup_dir&#125;/backup_$&#123;now&#125;.tar.gz&quot; $2</span><br><span class="line">elif [ $(date +%H) -eq 12 ] &amp;&amp; [ $(date +%M) -eq 30 ]; then</span><br><span class="line">    tar -czvf &quot;$&#123;backup_dir&#125;/backup_$&#123;now&#125;.tar.gz&quot; $2</span><br><span class="line">fi</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">删除文件</span></span><br><span class="line">if [ $(date +%H) -eq 12 ] &amp;&amp; [ $(date +%M) -eq 40 ]; then</span><br><span class="line">    # 删除前一天23点的备份</span><br><span class="line">    last_day=$(date -d &quot;yesterday&quot; +&quot;%Y-%m-%d&quot;)</span><br><span class="line">    rm &quot;$&#123;backup_dir&#125;/backup_$&#123;last_day&#125;_23&quot;*&quot;.tar.gz&quot;</span><br><span class="line">elif [ $(date +%H) -eq 23 ] &amp;&amp; [ $(date +%M) -eq 40 ]; then</span><br><span class="line">    # 删除当天12点的备份</span><br><span class="line">    rm &quot;$&#123;backup_dir&#125;/backup_$&#123;now:0:10&#125;_12&quot;*&quot;.tar.gz&quot;</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">root@10-7-153-197:/data/shell#</span><br></pre></td></tr></table></figure></div>

<h2 id="删除指定后缀文件"><a href="#删除指定后缀文件" class="headerlink" title="删除指定后缀文件"></a>删除指定后缀文件</h2><div class="code-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">root@10-7-153-197:/data/shell# cat delete_suf.sh</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">delete all file like *.out</span></span><br><span class="line">sudo find $1/ -name &quot;*.out&quot; -delete</span><br><span class="line">sudo find $1/ -name &quot;*.o&quot; -delete</span><br><span class="line">sudo find $1/ -name &quot;*.log&quot; -delete</span><br><span class="line">sudo find &quot;$1&quot; -type d -name &quot;.pytest_cache&quot; -exec rm -rf &#123;&#125; +</span><br><span class="line">sudo find &quot;$1&quot; -type d -name &quot;__pycache__&quot; -exec rm -rf &#123;&#125; +</span><br><span class="line">sudo find &quot;$1&quot; -type d -name &quot;.mypy_cache&quot; -exec rm -rf &#123;&#125; +</span><br><span class="line">root@10-7-153-197:/data/shell#</span><br></pre></td></tr></table></figure></div>

<h2 id="修改指定文件权限"><a href="#修改指定文件权限" class="headerlink" title="修改指定文件权限"></a>修改指定文件权限</h2><div class="code-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root@10-7-153-197:/data/shell# cat chmod_permission.sh</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line">sudo chmod -R 777 $1/*</span><br></pre></td></tr></table></figure></div>

<h2 id="更改-Ubuntu-下-Nginx-认证权限"><a href="#更改-Ubuntu-下-Nginx-认证权限" class="headerlink" title="更改 Ubuntu 下 Nginx 认证权限"></a>更改 Ubuntu 下 Nginx 认证权限</h2><div class="code-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">root@10-7-153-197:/data/shell# cat update_ubuntu_auth.sh</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Step 1: Get current <span class="built_in">date</span> with a prefix</span></span><br><span class="line">current_date=$(date +&#x27;%m%d&#x27;)</span><br><span class="line">prefix=&quot;Author@&quot;</span><br><span class="line">prefixed_date=&quot;$&#123;prefix&#125;$&#123;current_date&#125;&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Step 2: Write the prefixed <span class="built_in">date</span> to password.txt</span></span><br><span class="line">echo &quot;$prefixed_date&quot; &gt; password.txt</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Step 3: Generate password and update .htpasswd file</span></span><br><span class="line">if sudo htpasswd -b -c /etc/nginx/.htpasswd Author &quot;$prefixed_date&quot;; then</span><br><span class="line">    echo &quot;Password updated successfully.&quot;</span><br><span class="line">else</span><br><span class="line">    echo &quot;Password update failed.&quot;</span><br><span class="line">    exit 1</span><br><span class="line">fi</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Step 4: Restart Nginx</span></span><br><span class="line">if sudo systemctl restart nginx; then</span><br><span class="line">    echo &quot;Nginx restarted successfully.&quot;</span><br><span class="line">else</span><br><span class="line">    echo &quot;Nginx restart failed.&quot;</span><br><span class="line">    exit 1</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">root@10-7-153-197:/data/shell#</span><br></pre></td></tr></table></figure></div>

<h2 id="同步本地文件夹与目标文件夹"><a href="#同步本地文件夹与目标文件夹" class="headerlink" title="同步本地文件夹与目标文件夹"></a>同步本地文件夹与目标文件夹</h2><div class="code-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">root@10-7-153-197:/data/shell# cat sync_files.sh</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">检查参数数量</span></span><br><span class="line">if [ &quot;$#&quot; -ne 2 ]; then</span><br><span class="line">  echo &quot;Usage: ./sync_files.sh SOURCE_DIR TARGET_DIR&quot;</span><br><span class="line">  exit 1</span><br><span class="line">fi</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">获取命令行参数</span></span><br><span class="line">SOURCE_DIR=&quot;$1&quot;</span><br><span class="line">TARGET_DIR=&quot;$2&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">确保目标目录存在</span></span><br><span class="line">mkdir -p &quot;$TARGET_DIR&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查找第一个目录下的所有文件</span></span><br><span class="line">find &quot;$SOURCE_DIR&quot; -type f | while read -r file</span><br><span class="line">do</span><br><span class="line"><span class="meta prompt_">  # </span><span class="language-bash">获取相对于 <span class="variable">$SOURCE_DIR</span> 的文件路径</span></span><br><span class="line">  relative_path=$&#123;file#$SOURCE_DIR&#125;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">  # </span><span class="language-bash">去掉路径前的<span class="string">&#x27;/&#x27;</span>符号</span></span><br><span class="line">  relative_path=$&#123;relative_path#/&#125;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">  # </span><span class="language-bash">定义在第二个目录中的文件路径</span></span><br><span class="line">  target_file=&quot;$TARGET_DIR/$relative_path&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">  # </span><span class="language-bash">确保目标文件所在的目录存在</span></span><br><span class="line">  mkdir -p &quot;$(dirname &quot;$target_file&quot;)&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">  # </span><span class="language-bash">检查文件在第二个目录中是否存在</span></span><br><span class="line">  if [ -f &quot;$target_file&quot; ]; then</span><br><span class="line">    # 比较文件内容</span><br><span class="line">    if ! diff -q &quot;$file&quot; &quot;$target_file&quot; &gt; /dev/null 2&gt;&amp;1; then</span><br><span class="line">      echo &quot;文件不一致，复制: $file -&gt; $target_file&quot;</span><br><span class="line">      cp &quot;$file&quot; &quot;$target_file&quot;</span><br><span class="line">    else</span><br><span class="line">      echo &quot;文件一致: $file -&gt; $target_file&quot;</span><br><span class="line">    fi</span><br><span class="line">  else</span><br><span class="line">    echo &quot;目标不存在，复制新文件: $file -&gt; $target_file&quot;</span><br><span class="line">    cp &quot;$file&quot; &quot;$target_file&quot;</span><br><span class="line">  fi</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">root@10-7-153-197:/data/shell#</span><br></pre></td></tr></table></figure></div>

<h2 id="同步本地与远程仓库"><a href="#同步本地与远程仓库" class="headerlink" title="同步本地与远程仓库"></a>同步本地与远程仓库</h2><div class="code-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">root@10-7-153-197:/data/shell# cat sync_local_remote_repo.sh</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">检查参数数量</span></span><br><span class="line">if [ &quot;$#&quot; -ne 1 ]; then</span><br><span class="line">  echo &quot;Usage: $0 REPO_DIR&quot;</span><br><span class="line">  exit 1</span><br><span class="line">fi</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">获取命令行参数</span></span><br><span class="line">REPO_DIR=&quot;$1&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">检查指定目录是否是Git仓库</span></span><br><span class="line">if [ ! -d &quot;$REPO_DIR/.git&quot; ]; then</span><br><span class="line">  echo &quot;The specified directory is not a Git repository.&quot;</span><br><span class="line">  exit 1</span><br><span class="line">fi</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">进入指定的Git仓库目录</span></span><br><span class="line">cd &quot;$REPO_DIR&quot; || exit</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">检查工作目录中的变化</span></span><br><span class="line">changes=$(git status --porcelain)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">如果没有变化，退出</span></span><br><span class="line">if [ -z &quot;$changes&quot; ]; then</span><br><span class="line">  echo &quot;No changes detected.&quot;</span><br><span class="line">  exit 0</span><br><span class="line">fi</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">获取变化的文件名</span></span><br><span class="line">changed_files=$(echo &quot;$changes&quot; | awk &#x27;&#123;print $2&#125;&#x27;)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">输出变化的文件</span></span><br><span class="line">echo &quot;Changes detected in the following files:&quot;</span><br><span class="line">echo &quot;$changed_files&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">添加所有变化</span></span><br><span class="line">git add .</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">提交变化，以变化的文件名作为提交信息</span></span><br><span class="line">commit_message=$(echo &quot;$changed_files&quot; | tr &#x27;\n&#x27; &#x27; &#x27;)</span><br><span class="line">git commit -m &quot;$commit_message&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">推送到远程仓库</span></span><br><span class="line">git push origin main</span><br><span class="line"></span><br><span class="line">echo &quot;Changes committed and pushed to the repository.&quot;</span><br><span class="line"></span><br><span class="line">root@10-7-153-197:/data/shell#</span><br></pre></td></tr></table></figure></div>

<h2 id="标准化编译-C-项目及-C-文件"><a href="#标准化编译-C-项目及-C-文件" class="headerlink" title="标准化编译 C 项目及 C 文件"></a>标准化编译 C 项目及 C 文件</h2><div class="code-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br></pre></td><td class="code"><pre><span class="line">root@10-7-153-197:/data/shell# cat sunmy_c_build.sh</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">--- 配置变量 ---</span></span><br><span class="line">CC=&quot;gcc&quot;</span><br><span class="line">CFLAGS=&quot;-Wall -O2&quot;</span><br><span class="line">LDFLAGS=&quot;-lpthread -lrt -lgcc&quot;</span><br><span class="line">SYMBOLS=70  # 分隔线符号数量</span><br><span class="line">OBJS_DIR_NAME=&quot;objs&quot;  # 统一对象文件目录名</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">--- 函数定义 ---</span></span><br><span class="line">help() &#123;</span><br><span class="line">    echo -n $(seq 1 $SYMBOLS | xargs -I &#123;&#125; printf &#x27;=&#x27;)</span><br><span class="line">    echo -e &quot;\n\033[1m\t\t\t  C 项目构建脚本帮助\033[0m&quot;</span><br><span class="line">    echo -e &quot;用法: \033[35m$0 [命令] [参数]\033[0m 或</span><br><span class="line">    \033[35m  $0 [项目目录] [命令]\033[0m&quot;</span><br><span class="line">    echo -e &quot;\033[33m支持设置环境变量 GCC 指定编译器路径 (如: GCC=/usr/bin/gcc)\033[0m&quot;</span><br><span class="line">    echo -n $(seq 1 $SYMBOLS | xargs -I &#123;&#125; printf &#x27;-&#x27;)</span><br><span class="line">    echo -e &quot;\n\033[32m命令列表:\033[0m&quot;</span><br><span class="line">    echo &quot;  [需要项目目录的命令]&quot;</span><br><span class="line">    echo &quot;    all         - 编译项目并生成可执行文件到项目目录/all_results&quot;</span><br><span class="line">    echo &quot;    clean       - 清理项目构建产物 (对象文件/可执行文件)&quot;</span><br><span class="line">    echo &quot;    debug       - 以调试模式编译 (添加 -DDEBUG 标志)&quot;</span><br><span class="line">    echo &quot;    run         - 编译并运行项目&quot;</span><br><span class="line">    echo &quot;    valgrind    - 使用 Valgrind 运行项目&quot;</span><br><span class="line">    echo &quot;    install     - 安装可执行文件到 /usr/local/bin&quot;</span><br><span class="line">    echo &quot;    uninstall   - 从 /usr/local/bin 卸载&quot;</span><br><span class="line">    echo &quot;  [独立命令]&quot;</span><br><span class="line">    echo &quot;    s  &lt;源文件&gt;  - 编译并运行单个 C 文件 (示例: $0 s test.c)&quot;</span><br><span class="line">    echo &quot;    sv &lt;源文件&gt;  - 用 Valgrind 调试单个 C 文件&quot;</span><br><span class="line">    echo &quot;    h            - 显示此帮助信息&quot;</span><br><span class="line">    echo -n $(seq 1 $SYMBOLS | xargs -I &#123;&#125; printf &#x27;=&#x27;)</span><br><span class="line">    echo -e &quot;\n\033[33m示例:\033[0m&quot;</span><br><span class="line">    echo &quot;  # 编译运行项目:&quot;</span><br><span class="line">    echo &quot;  $0 /path/to/project run&quot;</span><br><span class="line">    echo &quot;  # 调试单个文件:&quot;</span><br><span class="line">    echo &quot;  $0 sv test.c&quot;</span><br><span class="line">    echo -n $(seq 1 $SYMBOLS | xargs -I &#123;&#125; printf &#x27;=&#x27;)</span><br><span class="line">    echo</span><br><span class="line">    exit 0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">setup_project() &#123;</span><br><span class="line">    PROJECT_DIR=&quot;$1&quot;</span><br><span class="line">    if [ ! -d &quot;$PROJECT_DIR&quot; ]; then</span><br><span class="line">        echo -e &quot;\033[31m错误: 项目目录不存在 &#x27;$PROJECT_DIR&#x27;\033[0m&quot;</span><br><span class="line">        exit 1</span><br><span class="line">    fi</span><br><span class="line"></span><br><span class="line">    # 初始化项目相关路径</span><br><span class="line">    TARGET=&quot;$PROJECT_DIR/all_results&quot;</span><br><span class="line">    DIR_SRC=&quot;$PROJECT_DIR/src&quot;</span><br><span class="line">    DIR_INCLUDE=&quot;$PROJECT_DIR/include&quot;</span><br><span class="line">    OBJS_DIR=&quot;$PROJECT_DIR/$OBJS_DIR_NAME&quot;</span><br><span class="line"></span><br><span class="line">    # 搜索源文件 (最多搜索4层子目录)</span><br><span class="line">    if [ -d &quot;$DIR_SRC&quot; ]; then</span><br><span class="line">        DIRS=$(find &quot;$DIR_SRC&quot; -maxdepth 4 -type d)</span><br><span class="line">        SRCS_C=$(for dir in $DIRS; do find &quot;$dir&quot; -maxdepth 1 -name &quot;*.c&quot;; done)</span><br><span class="line">        OBJS_C=$(echo &quot;$SRCS_C&quot; | sed &quot;s|$DIR_SRC/|$OBJS_DIR/|g&quot; | sed &quot;s|.c|.o|g&quot;)</span><br><span class="line">    else</span><br><span class="line">        echo -e &quot;\033[33m警告: 项目目录中未找到 src 文件夹\033[0m&quot;</span><br><span class="line">    fi</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">compile_project() &#123;</span><br><span class="line">    echo -e &quot;\033[36m[编译] 生成对象文件到 $OBJS_DIR\033[0m&quot;</span><br><span class="line">    mkdir -p &quot;$OBJS_DIR&quot;</span><br><span class="line">    for src in $SRCS_C; do</span><br><span class="line">        obj=&quot;$OBJS_DIR/$(basename $src .c).o&quot;</span><br><span class="line">        echo &quot;编译: $src → $obj&quot;</span><br><span class="line">        $CC $CFLAGS -I &quot;$DIR_INCLUDE&quot; -c &quot;$src&quot; -o &quot;$obj&quot; || exit 1</span><br><span class="line">    done</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">link_project() &#123;</span><br><span class="line">    echo -e &quot;\033[36m[链接] 生成可执行文件: $TARGET\033[0m&quot;</span><br><span class="line">    $CC $CFLAGS -o &quot;$TARGET&quot; $OBJS_C $LDFLAGS || exit 1</span><br><span class="line">    echo -e &quot;\033[32m构建成功！使用 &#x27;file $TARGET&#x27; 查看详细信息\033[0m&quot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">--- 项目相关命令 ---</span></span><br><span class="line">cmd_all() &#123;</span><br><span class="line">    compile_project</span><br><span class="line">    link_project</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cmd_clean() &#123;</span><br><span class="line">    echo -e &quot;\033[31m清理: 删除 $OBJS_DIR 和 $TARGET\033[0m&quot;</span><br><span class="line">    rm -rf &quot;$OBJS_DIR&quot; &quot;$TARGET&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cmd_debug() &#123;</span><br><span class="line">    CFLAGS=&quot;$CFLAGS -DDEBUG -g&quot;</span><br><span class="line">    cmd_all</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cmd_run() &#123;</span><br><span class="line">    cmd_all</span><br><span class="line">    echo -e &quot;\n\033[36m[运行] $TARGET\033[0m&quot;</span><br><span class="line">    &quot;$TARGET&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cmd_valgrind() &#123;</span><br><span class="line">    cmd_all</span><br><span class="line">    echo -e &quot;\n\033[36m[Valgrind] 检测内存泄漏\033[0m&quot;</span><br><span class="line">    valgrind --leak-check=full --show-leak-kinds=all --track-origins=yes &quot;$TARGET&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cmd_install() &#123;</span><br><span class="line">    cmd_all</span><br><span class="line">    local install_path=&quot;/usr/local/bin/$(basename $TARGET)&quot;</span><br><span class="line">    echo -e &quot;\033[36m[安装] 复制到 $install_path\033[0m&quot;</span><br><span class="line">    sudo cp &quot;$TARGET&quot; &quot;$install_path&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cmd_uninstall() &#123;</span><br><span class="line">    local install_path=&quot;/usr/local/bin/$(basename $TARGET)&quot;</span><br><span class="line">    echo -e &quot;\033[31m[卸载] 移除 $install_path\033[0m&quot;</span><br><span class="line">    sudo rm -f &quot;$install_path&quot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">--- 独立命令 ---</span></span><br><span class="line">cmd_single() &#123;</span><br><span class="line">    local src=&quot;$1&quot;</span><br><span class="line">    if [ -z &quot;$src&quot; ]; then</span><br><span class="line">        echo -e &quot;\033[31m错误: 请指定源文件 (示例: $0 s test.c)\033[0m&quot;</span><br><span class="line">        exit 1</span><br><span class="line">    fi</span><br><span class="line">    if [ ! -f &quot;$src&quot; ]; then</span><br><span class="line">        echo -e &quot;\033[31m错误: 文件不存在 &#x27;$src&#x27;\033[0m&quot;</span><br><span class="line">        exit 1</span><br><span class="line">    fi</span><br><span class="line"></span><br><span class="line">    local out=&quot;$(basename $src .c).out&quot;</span><br><span class="line">    echo -e &quot;\033[36m[编译] $src → $out\033[0m&quot;</span><br><span class="line">    $CC $CFLAGS &quot;$src&quot; -o &quot;$out&quot; || exit 1</span><br><span class="line">    echo -e &quot;\033[32m[运行] 执行 $out\033[0m&quot;</span><br><span class="line">    ./&quot;$out&quot;</span><br><span class="line">    rm -f &quot;$out&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cmd_valgrind_single() &#123;</span><br><span class="line">    local src=&quot;$1&quot;</span><br><span class="line">    if [ -z &quot;$src&quot; ]; then</span><br><span class="line">        echo -e &quot;\033[31m错误: 请指定源文件 (示例: $0 sv test.c)\033[0m&quot;</span><br><span class="line">        exit 1</span><br><span class="line">    fi</span><br><span class="line"></span><br><span class="line">    local out=&quot;$(basename $src .c).out&quot;</span><br><span class="line">    echo -e &quot;\033[36m[编译] $src → $out\033[0m&quot;</span><br><span class="line">    $CC $CFLAGS &quot;$src&quot; -o &quot;$out&quot; || exit 1</span><br><span class="line">    echo -e &quot;\033[32m[Valgrind] 检测内存泄漏\033[0m&quot;</span><br><span class="line">    valgrind --leak-check=full --show-leak-kinds=all --track-origins=yes ./&quot;$out&quot;</span><br><span class="line">    rm -f &quot;$out&quot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">--- 主逻辑 ---</span></span><br><span class="line">main() &#123;</span><br><span class="line">    # 处理帮助命令</span><br><span class="line">    if [ &quot;$1&quot; = &quot;h&quot; ] || [ &quot;$1&quot; = &quot;-h&quot; ] || [ &quot;$1&quot; = &quot;--help&quot; ]; then</span><br><span class="line">        help</span><br><span class="line">    fi</span><br><span class="line"></span><br><span class="line">    # 解析命令模式</span><br><span class="line">    case &quot;$1&quot; in</span><br><span class="line">        s|sv|h)  # 独立命令</span><br><span class="line">            command=&quot;$1&quot;</span><br><span class="line">            shift</span><br><span class="line">            case &quot;$command&quot; in</span><br><span class="line">                s)  cmd_single &quot;$@&quot; ;;</span><br><span class="line">                sv) cmd_valgrind_single &quot;$@&quot; ;;</span><br><span class="line">                h)  help ;;</span><br><span class="line">            esac</span><br><span class="line">            ;;</span><br><span class="line">        *)  # 项目命令</span><br><span class="line">            if [ $# -lt 2 ]; then</span><br><span class="line">                echo -e &quot;\033[31m错误: 需要项目目录和命令 (使用 -h 查看帮助)\033[0m&quot;</span><br><span class="line">                exit 1</span><br><span class="line">            fi</span><br><span class="line">            PROJECT_DIR=&quot;$1&quot;</span><br><span class="line">            command=&quot;$2&quot;</span><br><span class="line">            shift 2</span><br><span class="line">            setup_project &quot;$PROJECT_DIR&quot;</span><br><span class="line">            case &quot;$command&quot; in</span><br><span class="line">                all)       cmd_all ;;</span><br><span class="line">                clean)     cmd_clean ;;</span><br><span class="line">                debug)     cmd_debug ;;</span><br><span class="line">                run)       cmd_run ;;</span><br><span class="line">                valgrind)  cmd_valgrind ;;</span><br><span class="line">                install)   cmd_install ;;</span><br><span class="line">                uninstall) cmd_uninstall ;;</span><br><span class="line">                *) echo -e &quot;\033[31m错误: 未知命令 &#x27;$command&#x27;\033[0m&quot;; help ;;</span><br><span class="line">            esac</span><br><span class="line">            ;;</span><br><span class="line">    esac</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">--- 执行主函数 ---</span></span><br><span class="line">main &quot;$@&quot;</span><br></pre></td></tr></table></figure></div>

<h2 id="采集Linux系统基本信息"><a href="#采集Linux系统基本信息" class="headerlink" title="采集Linux系统基本信息"></a>采集Linux系统基本信息</h2><div class="code-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">系统信息收集脚本 v1.0</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">功能：同时生成详细版和精简版系统信息报告</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">检查root权限</span></span><br><span class="line">check_root()&#123;</span><br><span class="line">    [ &quot;$EUID&quot; -ne 0 ] &amp;&amp; &#123; </span><br><span class="line">        echo -e &quot;\033[31m请使用root或sudo运行此脚本\033[0m&quot;</span><br><span class="line">        exit 1</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">全局变量</span></span><br><span class="line">LINE1=&#x27;================================================================================&#x27;</span><br><span class="line">LINE2=&#x27;--------------------------------------------------------------------------------&#x27;</span><br><span class="line">BASE_NAME=&quot;SystemInfo-$(date +&quot;%Y%m%d_%H%M%S&quot;)-$(hostname -s)&quot;</span><br><span class="line">FULL_FILE=&quot;$&#123;BASE_NAME&#125;-full.txt&quot;</span><br><span class="line">SIMPLE_FILE=&quot;$&#123;BASE_NAME&#125;-simple.txt&quot;</span><br><span class="line">PACKAGES_FILE=&quot;$&#123;BASE_NAME&#125;-packages.txt&quot;</span><br><span class="line">BLUE=&#x27;\033[34m&#x27;</span><br><span class="line">ORANGE=&#x27;\033[33m&#x27;</span><br><span class="line">GREEN=&#x27;\033[32m&#x27;</span><br><span class="line">RESET=&#x27;\033[0m&#x27;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">初始化输出文件</span></span><br><span class="line">init_files()&#123;</span><br><span class="line">    # 创建空文件</span><br><span class="line">    &gt; &quot;$FULL_FILE&quot;</span><br><span class="line">    &gt; &quot;$SIMPLE_FILE&quot;</span><br><span class="line">    &gt; &quot;$PACKAGES_FILE&quot;</span><br><span class="line">  </span><br><span class="line">    # 写入文件头</span><br><span class="line">    for file in &quot;$FULL_FILE&quot; &quot;$SIMPLE_FILE&quot;; do</span><br><span class="line">        echo -e &quot;$LINE1&quot; &gt;&gt; &quot;$file&quot;</span><br><span class="line">        echo -e &quot;$LINE2&quot; &gt;&gt; &quot;$file&quot;</span><br><span class="line">        if [[ &quot;$file&quot; == &quot;$FULL_FILE&quot; ]]; then</span><br><span class="line">            echo -e &quot;\t\t\t\t\t\t系统信息收集报告 - 完整版 By Sunmy&quot; &gt;&gt; &quot;$file&quot;</span><br><span class="line">        else</span><br><span class="line">            echo -e &quot;\t\t\t\t\t\t系统信息收集报告 - 精简版 By Sunmy&quot; &gt;&gt; &quot;$file&quot;</span><br><span class="line">        fi</span><br><span class="line">        echo -e &quot;\t\t\t\t\t\t版本: v1.0&quot; &gt;&gt; &quot;$file&quot;</span><br><span class="line">        echo -e &quot;\t\t\t\t\t\t生成时间: $(date &quot;+%Y-%m-%d %H:%M:%S&quot;)&quot; &gt;&gt; &quot;$file&quot;</span><br><span class="line">        echo -e &quot;\t\t\t\t\t\t主机名: $(hostname)&quot; &gt;&gt; &quot;$file&quot;</span><br><span class="line">        echo -e &quot;$LINE2&quot; &gt;&gt; &quot;$file&quot;</span><br><span class="line">        echo -e &quot;$LINE1&quot; &gt;&gt; &quot;$file&quot;</span><br><span class="line">    done</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">输出控制函数</span></span><br><span class="line">output()&#123;</span><br><span class="line">    local type=$1</span><br><span class="line">    shift</span><br><span class="line">    local content=&quot;$*&quot;</span><br><span class="line">  </span><br><span class="line">    case &quot;$type&quot; in</span><br><span class="line">        &quot;full&quot;) </span><br><span class="line">            echo -e &quot;$content&quot; &gt;&gt; &quot;$FULL_FILE&quot;</span><br><span class="line">            ;;</span><br><span class="line">        &quot;simple&quot;) </span><br><span class="line">            echo -e &quot;$content&quot; &gt;&gt; &quot;$SIMPLE_FILE&quot;</span><br><span class="line">            ;;</span><br><span class="line">        &quot;package&quot;)</span><br><span class="line">            echo -e &quot;$content&quot; &gt;&gt; &quot;$PACKAGES_FILE&quot;</span><br><span class="line">            ;;</span><br><span class="line">        &quot;both&quot;) </span><br><span class="line">            echo -e &quot;$content&quot; | tee -a &quot;$FULL_FILE&quot; &gt;/dev/null</span><br><span class="line">            echo -e &quot;$content&quot; &gt;&gt; &quot;$SIMPLE_FILE&quot;</span><br><span class="line">            ;;</span><br><span class="line">        &quot;display&quot;) </span><br><span class="line">            echo -e &quot;$content&quot;</span><br><span class="line">            ;;</span><br><span class="line">    esac</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">----------------------------------------------</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">信息收集模块</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">----------------------------------------------</span></span><br><span class="line"></span><br><span class="line">show_os_full()&#123;</span><br><span class="line">    # 完整版</span><br><span class="line">    output &quot;full&quot; &quot;&quot;</span><br><span class="line">    output &quot;full&quot; &quot;&quot;</span><br><span class="line">    output &quot;full&quot; &quot;$LINE1&quot;</span><br><span class="line">    output &quot;full&quot; &quot;\t\t\t\t\t\t\t\t[操作系统信息]&quot;</span><br><span class="line">    output &quot;full&quot; &quot;$LINE2&quot;</span><br><span class="line">  </span><br><span class="line">    output &quot;full&quot; &quot;\n# 内核版本:&quot;</span><br><span class="line">    output &quot;full&quot; &quot;$ uname -a&quot;</span><br><span class="line">    uname -a &gt;&gt; &quot;$FULL_FILE&quot;</span><br><span class="line"></span><br><span class="line">    output &quot;full&quot; &quot;&quot;</span><br><span class="line">    output &quot;full&quot; &quot;$ cat /proc/version&quot;</span><br><span class="line">    cat /proc/version &gt;&gt; &quot;$FULL_FILE&quot;</span><br><span class="line">  </span><br><span class="line">    output &quot;full&quot; &quot;\n# 内核参数:&quot;</span><br><span class="line">    output &quot;full&quot; &quot;$ cat /proc/cmdline&quot;</span><br><span class="line">    cat /proc/cmdline &gt;&gt; &quot;$FULL_FILE&quot;</span><br><span class="line">  </span><br><span class="line">    output &quot;full&quot; &quot;\n# 系统运行时间:&quot;</span><br><span class="line">    output &quot;full&quot; &quot;$ uptime&quot;</span><br><span class="line">    uptime &gt;&gt; &quot;$FULL_FILE&quot;</span><br><span class="line"></span><br><span class="line">    output &quot;full&quot; &quot;\n# 查看发行版详细信息:&quot;</span><br><span class="line">    output &#x27;$ cat /etc/os-release&#x27;</span><br><span class="line">    cat /etc/os-release &gt;&gt; &quot;$FULL_FILE&quot;</span><br><span class="line"></span><br><span class="line">    output &quot;full&quot; &quot;&quot;</span><br><span class="line">    output &quot;full&quot; &#x27;$ lsb_release -a&#x27;</span><br><span class="line">    lsb_release -a &gt;&gt; &quot;$FULL_FILE&quot;</span><br><span class="line"></span><br><span class="line">    output &quot;full&quot; &quot;$LINE2&quot;</span><br><span class="line">    output &quot;full&quot; &quot;$LINE1&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">show_os_simple()&#123;</span><br><span class="line">    # 精简版</span><br><span class="line">    output &quot;simple&quot; &quot;&quot;</span><br><span class="line">    output &quot;simple&quot; &quot;&quot;</span><br><span class="line">    output &quot;simple&quot; &quot;$LINE1&quot;</span><br><span class="line">    output &quot;simple&quot; &quot;\t\t\t\t\t\t\t\t[操作系统信息]&quot;</span><br><span class="line">    output &quot;simple&quot; &quot;$LINE2&quot;</span><br><span class="line"></span><br><span class="line">    output &quot;simple&quot; &quot;\n# 内核版本:&quot;</span><br><span class="line">    output &quot;simple&quot; &quot;$ uname -srmo&quot;</span><br><span class="line">    uname -srmo &gt;&gt; &quot;$SIMPLE_FILE&quot;</span><br><span class="line"></span><br><span class="line">    output &quot;simple&quot; &quot;&quot;</span><br><span class="line">    output &quot;simple&quot; &quot;$ cat /proc/version&quot;</span><br><span class="line">    cat /proc/version &gt;&gt; &quot;$SIMPLE_FILE&quot;</span><br><span class="line"></span><br><span class="line">    output &quot;simple&quot; &quot;\n# 内核参数:&quot;</span><br><span class="line">    output &quot;simple&quot; &quot;$ cat /proc/cmdline&quot;</span><br><span class="line">    cat /proc/cmdline &gt;&gt; &quot;$SIMPLE_FILE&quot;</span><br><span class="line"></span><br><span class="line">    output &quot;simple&quot; &quot;\n# 系统运行时间:&quot;</span><br><span class="line">    output &quot;simple&quot; &quot;$ uptime -p&quot;</span><br><span class="line">    uptime -p &gt;&gt; &quot;$SIMPLE_FILE&quot;</span><br><span class="line"></span><br><span class="line">    output &quot;simple&quot; &quot;\n# 查看发行版详细信息:&quot;</span><br><span class="line">    output &quot;simple&quot; &#x27;$ cat /etc/os-release&#x27;</span><br><span class="line">    cat /etc/os-release &gt;&gt; &quot;$SIMPLE_FILE&quot;</span><br><span class="line"></span><br><span class="line">    output &quot;simple&quot; &quot;&quot;</span><br><span class="line">    output &quot;simple&quot; &#x27;$ lsb_release -a&#x27;</span><br><span class="line">    lsb_release -a &gt;&gt; &quot;$SIMPLE_FILE&quot;</span><br><span class="line"></span><br><span class="line">    output &quot;simple&quot; &quot;$LINE2&quot;</span><br><span class="line">    output &quot;simple&quot; &quot;$LINE1&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">show_cpu_full()&#123;</span><br><span class="line">    # 完整版</span><br><span class="line">    output &quot;full&quot; &quot;&quot;</span><br><span class="line">    output &quot;full&quot; &quot;&quot;</span><br><span class="line">    output &quot;full&quot; &quot;$LINE1&quot;</span><br><span class="line">    output &quot;full&quot; &quot;\t\t\t\t\t\t\t\t[CPU信息]&quot;</span><br><span class="line">    output &quot;full&quot; &quot;$LINE2&quot;</span><br><span class="line"></span><br><span class="line">    output &quot;full&quot; &quot;\n# lscpu输出:&quot;</span><br><span class="line">    output &quot;full&quot; &quot;$ lscpu&quot;</span><br><span class="line">    lscpu &gt;&gt; &quot;$FULL_FILE&quot;</span><br><span class="line">  </span><br><span class="line">    output &quot;full&quot; &quot;\n# CPU详细信息:&quot;</span><br><span class="line">    output &quot;full&quot; &quot;$ cat /proc/cpuinfo&quot;</span><br><span class="line">    cat /proc/cpuinfo &gt;&gt; &quot;$FULL_FILE&quot;</span><br><span class="line"></span><br><span class="line">    output &quot;full&quot; &quot;$LINE2&quot;</span><br><span class="line">    output &quot;full&quot; &quot;$LINE1&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">show_cpu_simple()&#123;</span><br><span class="line">    # 精简版</span><br><span class="line">    output &quot;simple&quot; &quot;&quot;</span><br><span class="line">    output &quot;simple&quot; &quot;&quot;</span><br><span class="line">    output &quot;simple&quot; &quot;$LINE1&quot;</span><br><span class="line">    output &quot;simple&quot; &quot;\t\t\t\t\t\t\t\t[CPU信息]&quot;</span><br><span class="line">    output &quot;simple&quot; &quot;$LINE2&quot;</span><br><span class="line">  </span><br><span class="line">    output &quot;simple&quot; &quot;\n# CPU型号:&quot;</span><br><span class="line">    output &quot;simple&quot; &quot;$ cat /proc/cpuinfo | grep &#x27;model name&#x27; | uniq&quot;</span><br><span class="line">    cat /proc/cpuinfo | grep &#x27;model name&#x27; | uniq &gt;&gt; &quot;$SIMPLE_FILE&quot;</span><br><span class="line">  </span><br><span class="line">    output &quot;simple&quot; &quot;\n# 物理CPU数量:&quot;</span><br><span class="line">    output &quot;simple&quot; &quot;$ cat /proc/cpuinfo | grep &#x27;physical id&#x27; | sort | uniq | wc -l&quot;</span><br><span class="line">    cat /proc/cpuinfo | grep &#x27;physical id&#x27; | sort | uniq | wc -l &gt;&gt; &quot;$SIMPLE_FILE&quot;</span><br><span class="line"></span><br><span class="line">    output &quot;simple&quot; &quot;\n# CPU核心数:&quot;</span><br><span class="line">    output &quot;simple&quot; &quot;$ cat /proc/cpuinfo | grep &#x27;cpu cores&#x27; | uniq&quot;</span><br><span class="line">    cat /proc/cpuinfo | grep &#x27;cpu cores&#x27; | uniq &gt;&gt; &quot;$SIMPLE_FILE&quot;</span><br><span class="line"></span><br><span class="line">    output &quot;simple&quot; &quot;$LINE2&quot;</span><br><span class="line">    output &quot;simple&quot; &quot;$LINE1&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">show_memory_full()&#123;</span><br><span class="line">    # 完整版</span><br><span class="line">    output &quot;full&quot; &quot;&quot;</span><br><span class="line">    output &quot;full&quot; &quot;&quot;</span><br><span class="line">    output &quot;full&quot; &quot;$LINE1&quot;</span><br><span class="line">    output &quot;full&quot; &quot;\t\t\t\t\t\t\t\t[内存信息]&quot;</span><br><span class="line">    output &quot;full&quot; &quot;$LINE2&quot;</span><br><span class="line">  </span><br><span class="line">    output &quot;full&quot; &quot;\n# 完整内存信息:&quot;</span><br><span class="line">    output &quot;full&quot; &quot;$ cat /proc/meminfo&quot;</span><br><span class="line">    cat /proc/meminfo &gt;&gt; &quot;$FULL_FILE&quot;</span><br><span class="line"></span><br><span class="line">    output &quot;full&quot; &quot;&quot;</span><br><span class="line">    output &quot;full&quot; &quot;$ free -h&quot;</span><br><span class="line">    free -h &gt;&gt; &quot;$FULL_FILE&quot;</span><br><span class="line"></span><br><span class="line">    output &quot;full&quot; &quot;$LINE2&quot;</span><br><span class="line">    output &quot;full&quot; &quot;$LINE1&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">show_memory_simple()&#123;</span><br><span class="line">    # 精简版</span><br><span class="line">    output &quot;simple&quot; &quot;&quot;</span><br><span class="line">    output &quot;simple&quot; &quot;&quot;</span><br><span class="line">    output &quot;simple&quot; &quot;$LINE1&quot;</span><br><span class="line">    output &quot;simple&quot; &quot;\t\t\t\t\t\t\t\t[内存信息]&quot;</span><br><span class="line">    output &quot;simple&quot; &quot;$LINE2&quot;</span><br><span class="line">  </span><br><span class="line">    output &quot;simple&quot; &quot;\n# 主要内存信息:&quot;</span><br><span class="line">    output &quot;simple&quot; &quot;$ cat /proc/meminfo | grep -E &#x27;MemTotal|MemFree|MemAvailable|Buffers|Cached&#x27;&quot;</span><br><span class="line">    cat /proc/meminfo | grep -E &#x27;MemTotal|MemFree|MemAvailable|Buffers|Cached&#x27; &gt;&gt; &quot;$SIMPLE_FILE&quot;</span><br><span class="line"></span><br><span class="line">    output &quot;simple&quot; &quot;&quot;</span><br><span class="line">    output &quot;simple&quot; &quot;$ free -h&quot;</span><br><span class="line">    free -h &gt;&gt; &quot;$SIMPLE_FILE&quot;</span><br><span class="line"></span><br><span class="line">    output &quot;simple&quot; &quot;$LINE2&quot;</span><br><span class="line">    output &quot;simple&quot; &quot;$LINE1&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">show_disk_full()&#123;</span><br><span class="line">    # 完整版</span><br><span class="line">    output &quot;full&quot; &quot;&quot;</span><br><span class="line">    output &quot;full&quot; &quot;&quot;</span><br><span class="line">    output &quot;full&quot; &quot;$LINE1&quot;</span><br><span class="line">    output &quot;full&quot; &quot;\t\t\t\t\t\t\t\t[磁盘信息]&quot;</span><br><span class="line">    output &quot;full&quot; &quot;$LINE2&quot;</span><br><span class="line">  </span><br><span class="line">    output &quot;full&quot; &quot;\n# 分区表信息:&quot;</span><br><span class="line">    output &quot;full&quot; &quot;$ fdisk -l&quot;</span><br><span class="line">    fdisk -l &gt;&gt; &quot;$FULL_FILE&quot;</span><br><span class="line">  </span><br><span class="line">    output &quot;full&quot; &quot;\n# 块设备信息:&quot;</span><br><span class="line">    output &quot;full&quot; &quot;$ lsblk&quot;</span><br><span class="line">    lsblk &gt;&gt; &quot;$FULL_FILE&quot;</span><br><span class="line">  </span><br><span class="line">    output &quot;full&quot; &quot;\n# 磁盘使用情况:&quot;</span><br><span class="line">    output &quot;full&quot; &quot;$ df -hT&quot;</span><br><span class="line">    df -hT &gt;&gt; &quot;$FULL_FILE&quot;</span><br><span class="line"></span><br><span class="line">    output &quot;full&quot; &quot;$LINE2&quot;</span><br><span class="line">    output &quot;full&quot; &quot;$LINE1&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">show_disk_simple()&#123;</span><br><span class="line"></span><br><span class="line">    # 精简版</span><br><span class="line">    output &quot;simple&quot; &quot;&quot;</span><br><span class="line">    output &quot;simple&quot; &quot;&quot;</span><br><span class="line">    output &quot;simple&quot; &quot;$LINE1&quot;</span><br><span class="line">    output &quot;simple&quot; &quot;\t\t\t\t\t\t\t\t[磁盘信息]&quot;</span><br><span class="line">    output &quot;simple&quot; &quot;$LINE2&quot;</span><br><span class="line">  </span><br><span class="line">    output &quot;simple&quot; &quot;\n# 分区表信息:&quot;</span><br><span class="line">    output &quot;simple&quot; &quot;$ fdisk -l 2&gt;/dev/null&quot;</span><br><span class="line">    fdisk -l 2&gt;/dev/null &gt;&gt; &quot;$SIMPLE_FILE&quot;</span><br><span class="line">  </span><br><span class="line">    output &quot;simple&quot; &quot;\n# 块设备信息:&quot;</span><br><span class="line">    output &quot;simple&quot; &quot;$ lsblk -o NAME,FSTYPE,SIZE,MOUNTPOINT,LABEL,UUID&quot;</span><br><span class="line">    lsblk -o NAME,FSTYPE,SIZE,MOUNTPOINT,LABEL,UUID &gt;&gt; &quot;$SIMPLE_FILE&quot;</span><br><span class="line">  </span><br><span class="line">    output &quot;simple&quot; &quot;\n# 磁盘使用情况:&quot;</span><br><span class="line">    output &quot;simple&quot; &quot;$ df -hT&quot;</span><br><span class="line">    df -hT &gt;&gt; &quot;$SIMPLE_FILE&quot;</span><br><span class="line"></span><br><span class="line">    output &quot;simple&quot; &quot;$LINE2&quot;</span><br><span class="line">    output &quot;simple&quot; &quot;$LINE1&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">show_network_full()&#123;</span><br><span class="line">    # 完整版</span><br><span class="line">    output &quot;full&quot; &quot;&quot;</span><br><span class="line">    output &quot;full&quot; &quot;&quot;</span><br><span class="line">    output &quot;full&quot; &quot;$LINE1&quot;</span><br><span class="line">    output &quot;full&quot; &quot;\t\t\t\t\t\t\t\t[网络信息]&quot;</span><br><span class="line">    output &quot;full&quot; &quot;$LINE2&quot;</span><br><span class="line"></span><br><span class="line">    output &quot;full&quot; &quot;\n# 主机名解析:&quot;</span><br><span class="line">    output &quot;full&quot; &quot;$ cat /etc/hostname&quot;</span><br><span class="line">    cat /etc/hostname &gt;&gt; &quot;$FULL_FILE&quot;</span><br><span class="line"></span><br><span class="line">    output &quot;full&quot; &quot;\n# 查看网络信息:&quot;</span><br><span class="line">    output &quot;full&quot; &quot;$ ifconfig -a&quot;</span><br><span class="line">    ifconfig -a &gt;&gt; &quot;$FULL_FILE&quot; 2&gt;/dev/null</span><br><span class="line"></span><br><span class="line">    output &quot;full&quot; &quot;\n# IP地址信息:&quot;</span><br><span class="line">    output &quot;full&quot; &quot;$ ip addr show&quot;</span><br><span class="line">    ip addr show &gt;&gt; &quot;$FULL_FILE&quot;</span><br><span class="line">  </span><br><span class="line">    output &quot;full&quot; &quot;\n# 路由表信息:&quot;</span><br><span class="line">    output &quot;full&quot; &quot;$ ip route show&quot;</span><br><span class="line">    ip route show &gt;&gt; &quot;$FULL_FILE&quot;</span><br><span class="line">  </span><br><span class="line">    output &quot;full&quot; &quot;\n# 路由接口信息:&quot;</span><br><span class="line">    output &quot;full&quot; &quot;$ ip -s link&quot;</span><br><span class="line">    ip -s link &gt;&gt; &quot;$FULL_FILE&quot;</span><br><span class="line">    ip route show &gt;&gt; &quot;$FULL_FILE&quot;</span><br><span class="line">  </span><br><span class="line">    output &quot;full&quot; &quot;\n# 网络连接信息:&quot;</span><br><span class="line">    output &quot;full&quot; &quot;$ ss -tulnp&quot;</span><br><span class="line">    ss -tulnp &gt;&gt; &quot;$FULL_FILE&quot;</span><br><span class="line">  </span><br><span class="line">    output &quot;full&quot; &quot;\n# 防火墙状态:&quot;</span><br><span class="line">    if command -v ufw &amp;&gt;/dev/null; then</span><br><span class="line">        output &quot;full&quot; &quot;$ ufw status verbose&quot;</span><br><span class="line">        ufw status verbose &gt;&gt; &quot;$FULL_FILE&quot;</span><br><span class="line">    elif command -v firewall-cmd &amp;&gt;/dev/null; then</span><br><span class="line">        output &quot;full&quot; &quot;$ firewall-cmd --state&quot;</span><br><span class="line">        firewall-cmd --state &gt;&gt; &quot;$FULL_FILE&quot;</span><br><span class="line">    else</span><br><span class="line">        output &quot;full&quot; &quot;未检测到常用防火墙工具&quot;</span><br><span class="line">    fi</span><br><span class="line"></span><br><span class="line">    output &quot;full&quot; &quot;\n# DNS解析信息:&quot;</span><br><span class="line">    output &quot;full&quot; &quot;$ cat /etc/resolv.conf&quot;</span><br><span class="line">    cat /etc/resolv.conf &gt;&gt; &quot;$FULL_FILE&quot;</span><br><span class="line"></span><br><span class="line">    output &quot;full&quot; &quot;$LINE2&quot;</span><br><span class="line">    output &quot;full&quot; &quot;$LINE1&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">show_network_simple()&#123;</span><br><span class="line">    # 精简版</span><br><span class="line">    output &quot;simple&quot; &quot;&quot;</span><br><span class="line">    output &quot;simple&quot; &quot;&quot;</span><br><span class="line">    output &quot;simple&quot; &quot;$LINE1&quot;</span><br><span class="line">    output &quot;simple&quot; &quot;\t\t\t\t\t\t\t\t[网络信息]&quot;</span><br><span class="line">    output &quot;simple&quot; &quot;$LINE2&quot;</span><br><span class="line"></span><br><span class="line">    output &quot;simple&quot; &quot;\n# 网络接口简况:&quot;</span><br><span class="line">    output &quot;simple&quot; &quot;$ ip -br addr&quot;</span><br><span class="line">    ip -br addr &gt;&gt; &quot;$SIMPLE_FILE&quot;</span><br><span class="line"></span><br><span class="line">    output &quot;simple&quot; &quot;$LINE2&quot;</span><br><span class="line">    output &quot;simple&quot; &quot;$LINE1&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">show_packages_both()&#123;</span><br><span class="line">    output &quot;both&quot; &quot;\n[软件包信息]&quot;</span><br><span class="line">    output &quot;both&quot; &quot;$LINE1&quot;</span><br><span class="line">  </span><br><span class="line">    if command -v dpkg &amp;&gt;/dev/null; then</span><br><span class="line">        # Debian/Ubuntu系统</span><br><span class="line">        output &quot;both&quot; &quot;\n# 已安装软件包数:&quot;</span><br><span class="line">        dpkg -l | grep &#x27;^ii&#x27; | wc -l | tee -a &quot;$FULL_FILE&quot; &gt;&gt; &quot;$SIMPLE_FILE&quot;</span><br><span class="line">      </span><br><span class="line">        output &quot;package&quot; &quot;# Debian软件包列表&quot;</span><br><span class="line">        output &quot;package&quot; &quot;Package\tVersion\tArchitecture&quot;</span><br><span class="line">        dpkg-query -W -f=&#x27;$&#123;Package&#125;\t$&#123;Version&#125;\t$&#123;Architecture&#125;\n&#x27; | sort &gt;&gt; &quot;$PACKAGES_FILE&quot;</span><br><span class="line">      </span><br><span class="line">    elif command -v rpm &amp;&gt;/dev/null; then</span><br><span class="line">        # RHEL/CentOS系统</span><br><span class="line">        output &quot;both&quot; &quot;\n# 已安装软件包数:&quot;</span><br><span class="line">        rpm -qa | wc -l | tee -a &quot;$FULL_FILE&quot; &gt;&gt; &quot;$SIMPLE_FILE&quot;</span><br><span class="line">      </span><br><span class="line">        output &quot;package&quot; &quot;# RPM软件包列表&quot;</span><br><span class="line">        output &quot;package&quot; &quot;Name\tVersion\tRelease\tArch&quot;</span><br><span class="line">        rpm -qa --queryformat=&#x27;%&#123;NAME&#125;\t%&#123;VERSION&#125;\t%&#123;RELEASE&#125;\t%&#123;ARCH&#125;\n&#x27; | sort &gt;&gt; &quot;$PACKAGES_FILE&quot;</span><br><span class="line">    else</span><br><span class="line">        output &quot;both&quot; &quot;无法确定包管理器类型&quot;</span><br><span class="line">    fi</span><br><span class="line">  </span><br><span class="line">    output &quot;display&quot; &quot;\n软件包列表已保存到: $PACKAGES_FILE&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">show_security_full()&#123;</span><br><span class="line">    # 完整版</span><br><span class="line">    output &quot;full&quot; &quot;&quot;</span><br><span class="line">    output &quot;full&quot; &quot;&quot;</span><br><span class="line">    output &quot;full&quot; &quot;$LINE1&quot;</span><br><span class="line">    output &quot;full&quot; &quot;\t\t\t\t\t\t\t\t[安全信息]&quot;</span><br><span class="line">    output &quot;full&quot; &quot;$LINE2&quot;</span><br><span class="line"></span><br><span class="line">    output &quot;full&quot; &quot;\n# 登录用户历史:&quot;</span><br><span class="line">    output &quot;full&quot; &quot;$ last -n 20&quot;</span><br><span class="line">    last -n 20 &gt;&gt; &quot;$FULL_FILE&quot;</span><br><span class="line"></span><br><span class="line">    output &quot;full&quot; &quot;$LINE2&quot;</span><br><span class="line">    output &quot;full&quot; &quot;$LINE1&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">show_security_simple()&#123;</span><br><span class="line">  </span><br><span class="line">    # 精简版</span><br><span class="line">    output &quot;simple&quot; &quot;&quot;</span><br><span class="line">    output &quot;simple&quot; &quot;&quot;</span><br><span class="line">    output &quot;simple&quot; &quot;$LINE1&quot;</span><br><span class="line">    output &quot;simple&quot; &quot;\t\t\t\t\t\t\t\t[安全信息]&quot;</span><br><span class="line">    output &quot;simple&quot; &quot;$LINE2&quot;</span><br><span class="line"></span><br><span class="line">    output &quot;simple&quot; &quot;\n# 当前登录用户:&quot;</span><br><span class="line">    output &quot;simple&quot; &quot;$ who&quot;</span><br><span class="line">    who &gt;&gt; &quot;$SIMPLE_FILE&quot;</span><br><span class="line"></span><br><span class="line">    output &quot;simple&quot; &quot;$LINE2&quot;</span><br><span class="line">    output &quot;simple&quot; &quot;$LINE1&quot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">----------------------------------------------</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">主执行流程</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">----------------------------------------------</span></span><br><span class="line"></span><br><span class="line">main()&#123;</span><br><span class="line">    clear</span><br><span class="line">    check_root</span><br><span class="line">    init_files</span><br><span class="line">  </span><br><span class="line">    # 显示开始信息</span><br><span class="line">    output &quot;display&quot; &quot;$BLUE正在收集系统信息...$RESET&quot;</span><br><span class="line">    output &quot;display&quot; &quot;完整报告将保存到:$ORANGE $FULL_FILE $RESET&quot;</span><br><span class="line">    output &quot;display&quot; &quot;精简报告将保存到:$ORANGE $SIMPLE_FILE $RESET&quot;</span><br><span class="line">  </span><br><span class="line">    # 执行信息收集</span><br><span class="line">    show_os_full</span><br><span class="line">    show_cpu_full</span><br><span class="line">    show_memory_full</span><br><span class="line">    show_disk_full</span><br><span class="line">    show_network_full</span><br><span class="line">    show_security_full</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    show_os_simple</span><br><span class="line">    show_cpu_simple</span><br><span class="line">    show_memory_simple</span><br><span class="line">    show_disk_simple</span><br><span class="line">    show_network_simple</span><br><span class="line">    show_security_simple</span><br><span class="line">  </span><br><span class="line">    show_packages_both</span><br><span class="line">  </span><br><span class="line">    # 设置文件权限</span><br><span class="line">    sudo chmod 777 &quot;$FULL_FILE&quot; &quot;$SIMPLE_FILE&quot; &quot;$PACKAGES_FILE&quot;</span><br><span class="line">  </span><br><span class="line">    # 显示完成信息</span><br><span class="line">    output &quot;display&quot; &quot;\n$GREEN系统信息收集完成！$RESET&quot;</span><br><span class="line">    output &quot;display&quot; &quot;文件大小统计:&quot;</span><br><span class="line">    du -h &quot;$FULL_FILE&quot; &quot;$SIMPLE_FILE&quot; &quot;$PACKAGES_FILE&quot; | tee -a &quot;$FULL_FILE&quot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">执行主函数</span></span><br><span class="line">main</span><br></pre></td></tr></table></figure></div>

<h1 id="Linux常用命令之文件处理"><a href="#Linux常用命令之文件处理" class="headerlink" title="Linux常用命令之文件处理"></a>Linux常用命令之文件处理</h1><h2 id="文件管理"><a href="#文件管理" class="headerlink" title="文件管理"></a>文件管理</h2><ul>
<li>查看文件信息：ls</li>
<li>切换工作目录：cd</li>
<li>显示当前目录路径：pwd</li>
<li>创建新目录：mkdir</li>
<li>创建空文件：touch</li>
<li>删除文件或目录：rm</li>
<li>拷贝：cp</li>
<li>移动&#x2F;重命名：mv</li>
<li>建立文件链接：ln</li>
<li>查找文件：find</li>
<li>查找文件内容：cat\less\more\head\tail</li>
<li>打包压缩：tar</li>
</ul>
<h2 id="文本处理"><a href="#文本处理" class="headerlink" title="文本处理"></a>文本处理</h2><ul>
<li>文本编辑：vi&#x2F;vim</li>
<li>屏幕输出：echo</li>
<li>输出重定向：&gt;</li>
</ul>
<h2 id="修改文件权限"><a href="#修改文件权限" class="headerlink" title="修改文件权限"></a>修改文件权限</h2><ul>
<li>r；读权限read-4</li>
<li>w：写权限write-2</li>
<li>x：执行权限exeute-1</li>
<li>-：无权限-0</li>
<li>chmod 777 文件名</li>
</ul>
<h2 id="查看网卡信息"><a href="#查看网卡信息" class="headerlink" title="查看网卡信息"></a>查看网卡信息</h2><ul>
<li>ifconfig</li>
<li>ip addr</li>
</ul>
<h2 id="测试远程主机的流动性"><a href="#测试远程主机的流动性" class="headerlink" title="测试远程主机的流动性"></a>测试远程主机的流动性</h2><ul>
<li>ping<ul>
<li>-c：ping的次数</li>
<li>-i：每次ping的时间间隔</li>
</ul>
</li>
</ul>
<h2 id="打印linux网络网络的状态信息"><a href="#打印linux网络网络的状态信息" class="headerlink" title="打印linux网络网络的状态信息"></a>打印linux网络网络的状态信息</h2><ul>
<li>netstat<ul>
<li>-t：列出所有tcp</li>
<li>-n：以数字形式显示地址和端口</li>
<li>-p：显示进程的pid和名字</li>
</ul>
</li>
</ul>

		</div>

		
		<div class="post-copyright-info w-full my-8 px-2 sm:px-6 md:px-8">
			<div class="article-copyright-info-container">
    <ul>
        <li><strong>标题:</strong> Shell学习笔记</li>
        <li><strong>作者:</strong> Sunmy</li>
        <li><strong>创建于
                :</strong> 2023-06-30 16:56:57</li>
        
            <li>
                <strong>更新于
                    :</strong> 2025-06-29 21:05:24
            </li>
        
        <li>
            <strong>链接:</strong> https://ldspdvsun.github.io/cmchul3i1001h5mgbdp9m0ufi/
        </li>
        <li>
            <strong>
                版权声明:
            </strong>
            

            
                版权所有 &#169 Sunmy，禁止转载。
            
        </li>
    </ul>
</div>

		</div>
		

		
		<ul class="post-tags-box text-lg mt-1.5 flex-wrap justify-center flex md:hidden">
			
			<li class="tag-item mx-0.5">
				<a href="/tags/Shell/">#Shell</a>&nbsp;
			</li>
			
		</ul>
		

		
  <div class="recommended-article px-2 sm:px-6 md:px-8">
   <div class="recommended-desktop">
    <div class="recommended-article-header text-xl md:text-3xl font-bold mt-10">
     <i aria-hidden="true"></i><span>推荐阅读</span>
    </div>
    <div class="recommended-article-group"><a class="recommended-article-item" href="/cmchul3i0001b5mgb0z8p40rn/" title="Linux学习笔记" rel="bookmark">
  <img src="https://i.postimg.cc/52qB9kNm/10.png" alt="Linux学习笔记" class="!max-w-none">
  <span class="title">Linux学习笔记</span>
</a><a class="recommended-article-item" href="/cmchul3ih00495mgbci2c92g8/" title="Docker学习笔记" rel="bookmark">
  <img src="https://i.postimg.cc/52qB9kNm/10.png" alt="Docker学习笔记" class="!max-w-none">
  <span class="title">Docker学习笔记</span>
</a><a class="recommended-article-item" href="/cmchul3if003w5mgb1pro01qh/" title="Win11改用Win10右键菜单" rel="bookmark">
  <img src="https://i.postimg.cc/52qB9kNm/10.png" alt="Win11改用Win10右键菜单" class="!max-w-none">
  <span class="title">Win11改用Win10右键菜单</span>
</a></div>
   </div>
   <div class="recommended-mobile">
   <div class="recommended-article-header text-xl md:text-3xl font-bold mt-10">
     <i aria-hidden="true"></i><span>推荐阅读</span>
   </div>
   <div class="recommended-article-group"><a class="recommended-article-item" href="/cmchul3i0001b5mgb0z8p40rn/" title="Linux学习笔记" rel="bookmark">
  <img src="https://i.postimg.cc/52qB9kNm/10.png" alt="Linux学习笔记" class="!max-w-none">
  <span class="title">Linux学习笔记</span>
</a><a class="recommended-article-item" href="/cmchul3ih00495mgbci2c92g8/" title="Docker学习笔记" rel="bookmark">
  <img src="https://i.postimg.cc/52qB9kNm/10.png" alt="Docker学习笔记" class="!max-w-none">
  <span class="title">Docker学习笔记</span>
</a></div>
   </div>
  </div>

		
		<div class="article-nav my-8 flex justify-between items-center px-2 sm:px-6 md:px-8">
			
			<div class="article-prev border-border-color shadow-redefine-flat shadow-shadow-color-2 rounded-medium px-4 py-2 hover:shadow-redefine-flat-hover hover:shadow-shadow-color-2">
				<a class="prev" rel="prev" href="/cmchul3hy00135mgb0jp2dzvf/">
					<span class="left arrow-icon flex justify-center items-center">
						<i class="fa-solid fa-chevron-left"></i>
					</span>
					<span class="title flex justify-center items-center">
						<span class="post-nav-title-item">MySql</span>
						<span class="post-nav-item">上一篇</span>
					</span>
				</a>
			</div>
			
			
			<div class="article-next border-border-color shadow-redefine-flat shadow-shadow-color-2 rounded-medium px-4 py-2 hover:shadow-redefine-flat-hover hover:shadow-shadow-color-2">
				<a class="next" rel="next" href="/cmchul3i1001k5mgb0n82hh0b/">
					<span class="title flex justify-center items-center">
						<span class="post-nav-title-item">Nmon</span>
						<span class="post-nav-item">下一篇</span>
					</span>
					<span class="right arrow-icon flex justify-center items-center">
						<i class="fa-solid fa-chevron-right"></i>
					</span>
				</a>
			</div>
			
		</div>
		


		
		<div class="comment-container px-2 sm:px-6 md:px-8 pb-8">
			<div class="comments-container mt-10 w-full ">
    <div id="comment-anchor" class="w-full h-2.5"></div>
    <div class="comment-area-title w-full my-1.5 md:my-2.5 text-xl md:text-3xl font-bold">
        评论
    </div>
    

        
            
    <div class="twikoo-container">
        <script data-swup-reload-script
                src='https://cdnjs.cloudflare.com/ajax/libs/twikoo/1.6.36/twikoo.all.min.js'
        ></script>
        <div id="twikoo-comment"></div>
        <script data-swup-reload-script>
            function loadTwikoo() {
                twikoo.init({
                    el: '#twikoo-comment',
                    envId: 'https://twikoo-henna-six.vercel.app/',
                });
            }

            if ('true') {
                const loadTwikooTimeout = setTimeout(() => {
                    loadTwikoo();
                    clearTimeout(loadTwikooTimeout);
                }, 1000);
            } else {
                window.addEventListener('DOMContentLoaded', loadTwikoo);
            }
        </script>
    </div>


        
        
    
</div>

		</div>
		
	</div>

	
	<div class="toc-content-container">
		<div class="post-toc-wrap">
	<div class="post-toc">
		<div class="toc-title">目录</div>
		<div class="page-title">Shell学习笔记</div>
		<ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Shell%E4%BB%8B%E7%BB%8D"><span class="nav-text">Shell介绍</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#shell%E5%8A%9F%E8%83%BD"><span class="nav-text">shell功能</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="nav-text">shell脚本语法</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A6%82%E4%BD%95%E6%8A%92%E5%86%99shell%E8%84%9A%E6%9C%AC"><span class="nav-text">如何抒写shell脚本</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#shell%E8%84%9A%E6%9C%AC%E8%BF%90%E8%A1%8C%E6%96%B9%E6%B3%95"><span class="nav-text">shell脚本运行方法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#shell%E7%9A%84%E7%AC%A6%E5%8F%B7"><span class="nav-text">shell的符号</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AE%A1%E9%81%93"><span class="nav-text">管道</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BE%93%E5%87%BA%E9%87%8D%E5%AE%9A%E5%90%91%EF%BC%88-%E8%8B%B1%E6%96%87-%EF%BC%89"><span class="nav-text">输出重定向（&gt;(英文)）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BE%93%E5%85%A5%E9%87%8D%E5%AE%9A%E5%90%91%EF%BC%88"><span class="nav-text">输入重定向（&lt;(英文)）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%86%85%E8%BF%9E%E8%BE%93%E5%85%A5%E9%87%8D%E5%AE%9A%E5%90%91"><span class="nav-text">内连输入重定向(&lt;&lt;)</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%87%8D%E5%AE%9A%E5%90%91"><span class="nav-text">重定向</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#shell%E6%95%B0%E5%AD%A6%E8%BF%90%E7%AE%97"><span class="nav-text">shell数学运算</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#expr"><span class="nav-text">expr</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%8B%AC%E5%8F%B7"><span class="nav-text">使用方括号</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%84%9A%E6%9C%AC%E9%80%80%E5%87%BA"><span class="nav-text">脚本退出</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E9%80%80%E5%87%BA%E7%8A%B6%E6%80%81%E7%A0%81"><span class="nav-text">查看退出状态码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#exit"><span class="nav-text">exit</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%A0%BC%E5%BC%8F%E5%8C%96%E8%BE%93%E5%87%BA"><span class="nav-text">格式化输出</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#echo%E8%AF%AD%E6%B3%95"><span class="nav-text">echo语法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#time-sh"><span class="nav-text">time.sh</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%A2%9C%E8%89%B2%E8%BE%93%E5%87%BA"><span class="nav-text">颜色输出</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#fruits-shop-sh"><span class="nav-text">fruits_shop.sh</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%A0%BC%E5%BC%8F%E5%8C%96%E8%BE%93%E5%85%A5"><span class="nav-text">格式化输入</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#read%E5%91%BD%E4%BB%A4"><span class="nav-text">read命令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#login-sh"><span class="nav-text">login.sh</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#shell%E5%8F%98%E9%87%8F"><span class="nav-text">shell变量</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%98%E9%87%8F%E4%BB%8B%E7%BB%8D"><span class="nav-text">变量介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%98%E9%87%8F%E5%AE%9A%E4%B9%89"><span class="nav-text">变量定义</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E9%9C%80%E8%A6%81%E5%AE%9A%E4%B9%89%E5%8F%98%E9%87%8F%EF%BC%9F"><span class="nav-text">什么时候需要定义变量？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9A%E4%B9%89%E4%B8%80%E4%B8%AA%E5%8F%98%E9%87%8F"><span class="nav-text">定义一个变量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%96%E6%B6%88%E5%8F%98%E9%87%8F-unset"><span class="nav-text">取消变量 unset</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9C%89%E7%B1%BB%E5%9E%8B%E5%8F%98%E9%87%8F-declare"><span class="nav-text">有类型变量 declare</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%98%E9%87%8F%E5%88%86%E7%B1%BB"><span class="nav-text">变量分类</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9C%AC%E5%9C%B0%E5%8F%98%E9%87%8F"><span class="nav-text">本地变量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="nav-text">环境变量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F"><span class="nav-text">全局变量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%86%85%E7%BD%AE%E5%8F%98%E9%87%8F"><span class="nav-text">内置变量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%98%E9%87%8F%E6%AF%94%E8%BE%83"><span class="nav-text">变量比较</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%98%E9%87%8F%E7%AE%A1%E7%90%86"><span class="nav-text">变量管理</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#shell%E6%95%B0%E7%BB%84"><span class="nav-text">shell数组</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E7%BB%84%E4%BB%8B%E7%BB%8D"><span class="nav-text">数组介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%BB%98%E8%AE%A4%E6%95%B0%E7%BB%84"><span class="nav-text">默认数组</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%B3%E8%81%94%E6%95%B0%E5%AD%97"><span class="nav-text">关联数字</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#shell%E4%BA%94%E5%A4%A7%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-text">shell五大运算符</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%B5%8B%E5%80%BC"><span class="nav-text">赋值</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E5%AD%A6"><span class="nav-text">数学</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%AF%94%E8%BE%83"><span class="nav-text">比较</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%B3%E7%B3%BB"><span class="nav-text">关系</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E7%B1%BB%E5%9E%8B%E6%AF%94%E8%BE%83"><span class="nav-text">文件类型比较</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%9D%A1%E4%BB%B6%E6%8E%A7%E5%88%B6"><span class="nav-text">条件控制</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6"><span class="nav-text">流程控制</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#if"><span class="nav-text">if</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#if%E2%80%A6else"><span class="nav-text">if…else</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#if%E2%80%A6elif-else"><span class="nav-text">if…elif..else</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#if%E9%AB%98%E7%BA%A7%E8%AF%AD%E6%B3%95"><span class="nav-text">if高级语法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#case"><span class="nav-text">case</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#for"><span class="nav-text">for</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#for%E5%BE%AA%E7%8E%AF%E4%BB%8B%E7%BB%8D"><span class="nav-text">for循环介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8C%BA%E5%88%AB"><span class="nav-text">$* $@区别</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#while"><span class="nav-text">while</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#while%E8%AF%AD%E6%B3%95"><span class="nav-text">while语法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#while%E5%AE%9E%E6%88%98"><span class="nav-text">while实战</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#while%E5%AE%9E%E6%88%98-1"><span class="nav-text">while实战</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#util"><span class="nav-text">util</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#util%E4%BB%8B%E7%BB%8D"><span class="nav-text">util介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#util%E8%AF%AD%E6%B3%95"><span class="nav-text">util语法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#case%E4%BB%8B%E7%BB%8D"><span class="nav-text">case介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#case%E8%AF%AD%E6%B3%95"><span class="nav-text">case语法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%89%B9%E6%AE%8A%E5%8F%98%E9%87%8F"><span class="nav-text">特殊变量</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#shell%E5%87%BD%E6%95%B0"><span class="nav-text">shell函数</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%87%BD%E6%95%B0%E4%BB%8B%E7%BB%8D"><span class="nav-text">函数介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%87%BD%E6%95%B0%E8%AF%AD%E6%B3%95"><span class="nav-text">函数语法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%87%BD%E6%95%B0%E5%BA%94%E7%94%A8"><span class="nav-text">函数应用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%B3%BB%E7%BB%9F%E5%87%BD%E6%95%B0"><span class="nav-text">系统函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#date"><span class="nav-text">date</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#basename"><span class="nav-text">basename</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#diranaem"><span class="nav-text">diranaem</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%87%BD%E6%95%B0"><span class="nav-text">自定义函数</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="nav-text">正则表达式</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E4%BB%8B%E7%BB%8D"><span class="nav-text">正则表达式介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%89%B9%E6%AE%8A%E5%AD%97%E7%AC%A6"><span class="nav-text">特殊字符</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#POSIX%E5%AD%97%E7%AC%A6"><span class="nav-text">POSIX字符</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#shell%E5%AF%B9%E6%96%87%E4%BB%B6%E7%9A%84%E6%93%8D%E4%BD%9C"><span class="nav-text">shell对文件的操作</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#shell%E5%AF%B9%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C%E4%BB%8B%E7%BB%8D"><span class="nav-text">shell对文件操作介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#sed%E7%BC%96%E8%BE%91%E5%99%A8"><span class="nav-text">sed编辑器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E"><span class="nav-text">参数说明</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8A%A8%E4%BD%9C%E8%AF%B4%E6%98%8E"><span class="nav-text">动作说明</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#sed%E5%B0%8F%E6%8A%80%E5%B7%A7"><span class="nav-text">sed小技巧</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#shell%E5%AF%B9%E8%BE%93%E5%87%BA%E6%B5%81%E7%9A%84%E5%A4%84%E7%90%86"><span class="nav-text">shell对输出流的处理</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#cut"><span class="nav-text">cut</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#awk"><span class="nav-text">awk</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Shell%E6%A1%88%E4%BE%8B"><span class="nav-text">Shell案例</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BD%92%E6%A1%A3%E6%96%87%E4%BB%B6"><span class="nav-text">归档文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E5%89%8D%E4%B8%80%E5%A4%A9%E7%9A%84%E5%BD%92%E6%A1%A3%E6%96%87%E4%BB%B6"><span class="nav-text">删除前一天的归档文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%AD%A3%E5%88%99%E5%8C%B9%E9%85%8D%E6%89%8B%E6%9C%BA%E5%8F%B7"><span class="nav-text">正则匹配手机号</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%91%E9%80%81%E6%B6%88%E6%81%AF"><span class="nav-text">发送消息</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AE%A1%E7%AE%97%E7%A8%8B%E5%BA%8F%E6%B6%88%E8%80%97%E6%97%B6%E9%97%B4%E5%B9%B6%E8%87%AA%E5%8A%A8%E8%BE%93%E5%87%BA%E6%97%A5%E5%BF%97%E5%88%B0%E6%8C%87%E5%AE%9A%E7%9B%AE%E5%BD%95"><span class="nav-text">计算程序消耗时间并自动输出日志到指定目录</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9C%A8%E7%A8%8B%E5%BA%8F%E8%BF%90%E8%A1%8C%E5%89%8D%E5%92%8C%E8%BF%90%E8%A1%8C%E5%90%8E%E8%BE%93%E5%87%BA%E6%97%B6%E9%97%B4"><span class="nav-text">在程序运行前和运行后输出时间</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%BA%E5%BD%93%E5%89%8D%E7%9B%AE%E5%BD%95%E4%B8%8B%E7%9A%84%E6%96%87%E4%BB%B6%E5%8C%85%E6%8B%AC%E5%AD%90%E6%96%87%E4%BB%B6%E5%A4%B9%E6%9B%B4%E6%94%B9%E6%9D%83%E9%99%90"><span class="nav-text">为当前目录下的文件包括子文件夹更改权限</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%8E%E5%BD%93%E5%89%8D%E7%9B%AE%E5%BD%95%E4%B8%8B%E5%A4%8D%E5%88%B6%E6%96%87%E4%BB%B6%E5%B9%B6%E9%87%8D%E5%91%BD%E5%90%8D"><span class="nav-text">从当前目录下复制文件并重命名</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%8E%E6%BA%90%E6%96%87%E4%BB%B6%E5%A4%B9%E5%A4%8D%E5%88%B6%E5%88%B0%E7%9B%AE%E5%BD%95%E6%96%87%E4%BB%B6%E4%B8%AD"><span class="nav-text">从源文件夹复制到目录文件中</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E6%8C%87%E5%AE%9A%E6%96%87%E4%BB%B6%E5%A4%B9%E4%B8%8B%E5%90%8C%E4%B8%80%E5%90%8E%E7%BC%80%E7%9A%84%E6%89%80%E6%9C%89%E6%96%87%E4%BB%B6"><span class="nav-text">删除指定文件夹下同一后缀的所有文件</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Shell-%E5%AE%9E%E6%88%98"><span class="nav-text">Shell 实战</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#cron-%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E9%85%8D%E7%BD%AE"><span class="nav-text">cron 定时任务配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%B9%E5%99%A8%E5%AE%9A%E6%97%B6%E5%85%B3%E9%97%AD%E4%B8%8E%E5%90%AF%E5%8A%A8"><span class="nav-text">容器定时关闭与启动</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%9A%E6%97%B6%E5%A4%87%E4%BB%BD%E4%B8%8E%E5%88%A0%E9%99%A4%E6%96%87%E4%BB%B6"><span class="nav-text">定时备份与删除文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E6%8C%87%E5%AE%9A%E5%90%8E%E7%BC%80%E6%96%87%E4%BB%B6"><span class="nav-text">删除指定后缀文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E6%8C%87%E5%AE%9A%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90"><span class="nav-text">修改指定文件权限</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9B%B4%E6%94%B9-Ubuntu-%E4%B8%8B-Nginx-%E8%AE%A4%E8%AF%81%E6%9D%83%E9%99%90"><span class="nav-text">更改 Ubuntu 下 Nginx 认证权限</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%90%8C%E6%AD%A5%E6%9C%AC%E5%9C%B0%E6%96%87%E4%BB%B6%E5%A4%B9%E4%B8%8E%E7%9B%AE%E6%A0%87%E6%96%87%E4%BB%B6%E5%A4%B9"><span class="nav-text">同步本地文件夹与目标文件夹</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%90%8C%E6%AD%A5%E6%9C%AC%E5%9C%B0%E4%B8%8E%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93"><span class="nav-text">同步本地与远程仓库</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A0%87%E5%87%86%E5%8C%96%E7%BC%96%E8%AF%91-C-%E9%A1%B9%E7%9B%AE%E5%8F%8A-C-%E6%96%87%E4%BB%B6"><span class="nav-text">标准化编译 C 项目及 C 文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%87%87%E9%9B%86Linux%E7%B3%BB%E7%BB%9F%E5%9F%BA%E6%9C%AC%E4%BF%A1%E6%81%AF"><span class="nav-text">采集Linux系统基本信息</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E4%B9%8B%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86"><span class="nav-text">Linux常用命令之文件处理</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86"><span class="nav-text">文件管理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86"><span class="nav-text">文本处理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90"><span class="nav-text">修改文件权限</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E7%BD%91%E5%8D%A1%E4%BF%A1%E6%81%AF"><span class="nav-text">查看网卡信息</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B5%8B%E8%AF%95%E8%BF%9C%E7%A8%8B%E4%B8%BB%E6%9C%BA%E7%9A%84%E6%B5%81%E5%8A%A8%E6%80%A7"><span class="nav-text">测试远程主机的流动性</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%89%93%E5%8D%B0linux%E7%BD%91%E7%BB%9C%E7%BD%91%E7%BB%9C%E7%9A%84%E7%8A%B6%E6%80%81%E4%BF%A1%E6%81%AF"><span class="nav-text">打印linux网络网络的状态信息</span></a></li></ol></li></ol>

	</div>
</div>
	</div>
	
</div>
			</div>

			
		</div>

		<div class="main-content-footer">
			<footer class="footer mt-5 py-5 h-auto text-base text-third-text-color relative border-t-2 border-t-border-color">
    <div class="info-container py-3 text-center">
        
        <div class="text-center">
            &copy;
            
              <span>2023</span>
              -
            
            2025&nbsp;&nbsp;<i class="fa-solid fa-heart fa-beat" style="--fa-animation-duration: 0.5s; color: #f54545"></i>&nbsp;&nbsp;<a href="/">Sunmy</a>
            
                
                <p class="post-count space-x-0.5">
                    <span>
                        共撰写了 70 篇文章
                    </span>
                    
                        <span>
                            共 216.7k 字
                        </span>
                    
                </p>
            
        </div>
        
            <script data-swup-reload-script src="https://cn.vercount.one/js"></script>
            <div class="relative text-center lg:absolute lg:right-[20px] lg:top-1/2 lg:-translate-y-1/2 lg:text-right">
                
                    <span id="busuanzi_container_site_uv" class="lg:!block">
                        <span class="text-sm">访问人数</span>
                        <span id="busuanzi_value_site_uv"></span>
                    </span>
                
                
                    <span id="busuanzi_container_site_pv" class="lg:!block">
                        <span class="text-sm">总访问量</span>
                        <span id="busuanzi_value_site_pv"></span>
                    </span>
                
            </div>
        
        <div class="relative text-center lg:absolute lg:left-[20px] lg:top-1/2 lg:-translate-y-1/2 lg:text-left">
            <span class="lg:block text-sm">由 <?xml version="1.0" encoding="utf-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg class="relative top-[2px] inline-block align-baseline" version="1.1" id="圖層_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1rem" height="1rem" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve"><path fill="#0E83CD" d="M256.4,25.8l-200,115.5L56,371.5l199.6,114.7l200-115.5l0.4-230.2L256.4,25.8z M349,354.6l-18.4,10.7l-18.6-11V275H200v79.6l-18.4,10.7l-18.6-11v-197l18.5-10.6l18.5,10.8V237h112v-79.6l18.5-10.6l18.5,10.8V354.6z"/></svg><a target="_blank" class="text-base" href="https://hexo.io">Hexo</a> 驱动</span>
            <span class="text-sm lg:block">主题&nbsp;<a class="text-base" target="_blank" href="https://github.com/EvanNotFound/hexo-theme-redefine">Redefine v2.8.2</a></span>
        </div>
        
        
            <div>
                博客已运行 <span class="odometer" id="runtime_days" ></span> 天 <span class="odometer" id="runtime_hours"></span> 小时 <span class="odometer" id="runtime_minutes"></span> 分钟 <span class="odometer" id="runtime_seconds"></span> 秒
            </div>
        
        
            <script data-swup-reload-script>
                try {
                    function odometer_init() {
                    const elements = document.querySelectorAll('.odometer');
                    elements.forEach(el => {
                        new Odometer({
                            el,
                            format: '( ddd).dd',
                            duration: 200
                        });
                    });
                    }
                    odometer_init();
                } catch (error) {}
            </script>
        
        
        
    </div>  
</footer>
		</div>
	</div>

	
	<div class="post-tools">
		<div class="post-tools-container">
	<ul class="article-tools-list">
		<!-- TOC aside toggle -->
		
		<li class="right-bottom-tools page-aside-toggle">
			<i class="fa-regular fa-outdent"></i>
		</li>
		

		<!-- go comment -->
		
		<li class="go-comment">
			<i class="fa-regular fa-comments"></i>
		</li>
		
	</ul>
</div>
	</div>
	

	<div class="right-side-tools-container">
		<div class="side-tools-container">
	<ul class="hidden-tools-list">
		<li class="right-bottom-tools tool-font-adjust-plus flex justify-center items-center">
			<i class="fa-regular fa-magnifying-glass-plus"></i>
		</li>

		<li class="right-bottom-tools tool-font-adjust-minus flex justify-center items-center">
			<i class="fa-regular fa-magnifying-glass-minus"></i>
		</li>

		<li class="right-bottom-tools tool-dark-light-toggle flex justify-center items-center">
			<i class="fa-regular fa-moon"></i>
		</li>

		<!-- rss -->
		

		

		<li class="right-bottom-tools tool-scroll-to-bottom flex justify-center items-center">
			<i class="fa-regular fa-arrow-down"></i>
		</li>
	</ul>

	<ul class="visible-tools-list">
		<li class="right-bottom-tools toggle-tools-list flex justify-center items-center">
			<i class="fa-regular fa-cog fa-spin"></i>
		</li>
		
		<li class="right-bottom-tools tool-scroll-to-top flex justify-center items-center">
			<i class="arrow-up fas fa-arrow-up"></i>
			<span class="percent"></span>
		</li>
		
		
	</ul>
</div>
	</div>

	<div class="image-viewer-container">
	<img src="">
</div>

	
	<div class="search-pop-overlay">
	<div class="popup search-popup">
		<div class="search-header">
			<span class="search-input-field-pre">
				<i class="fa-solid fa-keyboard"></i>
			</span>
			<div class="search-input-container">
				<input autocomplete="off" autocorrect="off" autocapitalize="off" placeholder="站内搜索您需要的内容..." spellcheck="false" type="search" class="search-input">
			</div>
			<span class="popup-btn-close">
				<i class="fa-solid fa-times"></i>
			</span>
		</div>
		<div id="search-result">
			<div id="no-result">
				<i class="fa-solid fa-spinner fa-spin-pulse fa-5x fa-fw"></i>
			</div>
		</div>
	</div>
</div>
	

</main>



<script src="/js/build/libs/Swup.min.js"></script>

<script src="/js/build/libs/SwupSlideTheme.min.js"></script>

<script src="/js/build/libs/SwupScriptsPlugin.min.js"></script>

<script src="/js/build/libs/SwupProgressPlugin.min.js"></script>

<script src="/js/build/libs/SwupScrollPlugin.min.js"></script>

<script src="/js/build/libs/SwupPreloadPlugin.min.js"></script>

<script>
    const swup = new Swup({
        plugins: [
            new SwupScriptsPlugin({
                optin: true,
            }),
            new SwupProgressPlugin(),
            new SwupScrollPlugin({
                offset: 80,
            }),
            new SwupSlideTheme({
                mainElement: ".main-content-body",
            }),
            new SwupPreloadPlugin(),
        ],
        containers: ["#swup"],
    });
</script>




	
<script src="/js/build/tools/imageViewer.js" type="module"></script>

<script src="/js/build/utils.js" type="module"></script>

<script src="/js/build/main.js" type="module"></script>

<script src="/js/build/layouts/navbarShrink.js" type="module"></script>

<script src="/js/build/tools/scrollTopBottom.js" type="module"></script>

<script src="/js/build/tools/lightDarkSwitch.js" type="module"></script>

<script src="/js/build/layouts/categoryList.js" type="module"></script>



    
<script src="/js/build/tools/localSearch.js" type="module"></script>




    
<script src="/js/build/tools/codeBlock.js" type="module"></script>




    
<script src="/js/build/layouts/lazyload.js" type="module"></script>




    
<script src="/js/build/tools/runtime.js"></script>

    
<script src="/js/build/libs/odometer.min.js"></script>

    
<link rel="stylesheet" href="/assets/odometer-theme-minimal.css">




  
<script src="/js/build/libs/Typed.min.js"></script>

  
<script src="/js/build/plugins/typed.js" type="module"></script>











    
<script src="/js/build/tools/tocToggle.js" type="module" data-swup-reload-script=""></script>

<script src="/js/build/layouts/toc.js" type="module" data-swup-reload-script=""></script>

<script src="/js/build/plugins/tabs.js" type="module" data-swup-reload-script=""></script>




<script src="/js/build/libs/moment-with-locales.min.js" data-swup-reload-script=""></script>


<script src="/js/build/layouts/essays.js" type="module" data-swup-reload-script=""></script>





	
</body>

</html>